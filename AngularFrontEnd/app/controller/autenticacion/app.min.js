function PagesController(e,t,o,a,r,i){var n=a.name,l=n.replace(/\|/g,"/"),s="../"+l;i.get("IDUSUARIO")&&i.get("USUARIO")&&(o.current.templateUrl=s,t.get(o.current.templateUrl).then(function(t){$("#ng-view").html(r(t.data)(e))}))}var app=angular.module("myApp",["ngResource","ngRoute","ngAnimate","toaster","ngTable","ui.bootstrap","angularMoment","hSweetAlert","ngCkeditor","integralui","treeGrid","xeditable","angularFileUpload","angularSoap","pdf"]);app.factory("wsRgistrarPubliciadad",["$soap",function(e){var t="http://srvcronos/webservicios/registrapublicidad.asmx";return{registra_publicidades:function(o){return e.post(t,"registra_publicidades",{letrero:{idActividadEconomica:91340,idContribuyente:244605,clase:"N",ipUsuario:"192.168.32.30",equipo:"gmlppc05909",funcionario:"rita.flores",idCategoria:6,idTipoLetrero:40,idCaracteristica:1,fechaInicio:"01/01/2015",fechaFin:"01/01/1900",viaMatriz:"VA",idZona:262,tipoVia:"AV",via:"14 de septiembre",numero:"78",placa:"ND",caras:[{desc:"cara superior",sup:"32,45"},{desc:"cara inferir",sup:"25,45"}]}})}}}]),app.factory("wsObito",["$soap",function(e){var t="http://prometeo/AdministracionSatelite/Service1.asmx";return{RegistroSIMGEPsolicitud:function(o){return e.post(t,"RegistroSIMGEPsolicitud",{nombres_t:o.nombres_t,primer_apellido_t:o.primer_apellido_t,segundo_apellido_t:o.segundo_apellido_t,carnet_t:o.carnet_t,ci_expedido_t:o.ci_expedido_t,parentesco:parseInt(o.parentesco),motivo:parseInt(o.motivo),titular_zona:o.titular_zona,titular_via:o.titular_via,tipo_via:o.tipo_via,titular_nro:parseInt(o.titular_nro),titular_fono:parseInt(o.titular_fono),titular_correo:o.titular_correo,nombres_f:o.nombres_f,primer_apellido_f:o.primer_apellido_f,segundo_apellido_f:o.segundo_apellido_f,apellido_casado_f:o.apellido_casado_f,fecha_def_1:o.fecha_def_1,fecha_def_2:o.fecha_def_2,carnet_f:parseInt(o.carnet_f),observaciones:" "})}}}]),app.service("registroLog",function(e){this.almacenarLog=function(e,t,o,a){var r=new Date,i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),n=new reglasnegocio;n.identificador="RCCIUDADANO_171",n.parametros={lgs_usr_id:e,lgs_dtspsl_id:t,lgs_frm_id:o,lgs_evento:a,lgs_registrado:i,lgs_modificado:i},n.parametros='{"lgs_usr_id":"'+e+'","lgs_dtspsl_id":"'+t+'","lgs_frm_id":"'+o+'","lgs_evento":"'+a+'","lgs_registrado":"'+i+'","lgs_modificado":"'+i+'"}',n.llamarregla(function(e){e.length>0?console.log("Se almaceno al historico",e):console.log("Error al almacenar historico")})}}),app.service("obtFechaActual",function(e){this.obtenerFechaActual=function(){var e=new Date,t=e.getMonth()+1;return t=t<10?"0"+t:t,fechactual=e.getFullYear()+"-"+t+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),fechactual}}),app.service("obtFechaCorrecta",function(e){this.obtenerFechaCorrecta=function(e){var t="";if(null!=e&&""!=e){var o="";if(e.split("/").length>1){var a=e.split("/");o=new Date(a[2],a[1]-1,a[0])}else o=new Date(e);var r="",i="";"Invalid Date"!=o&&(r=o.getMonth()+1,r=r<10?"0"+r:r,i=o.getDate()<10?"0"+o.getDate():o.getDate(),t=o.getFullYear()+"-"+r+"-"+i)}else t=e;return t}}),app.directive("uploaderModel",["$parse",function(e){return{restrict:"A",link:function(t,o,a){o.on("change",function(r){e(a.uploaderModel).assign(t,o[0].files[0])})}}}]),app.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,o){var a=new FormData;a.append("files",t),e.post(o+t.name+"?app_name=todoangular",a,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){}).error(function(){})}}]),app.controller("NavCtrl",["$scope","$http","$rootScope","sessionService","CONFIG",function(e,t,o,a,r){"use strict";e.generarMenu=function(){var t=new reglasnegocio;t.identificador="RCCIUDADANO_170",t.parametros='{"idmenu":"4"}',t.llamarregla(function(t){if(t.length>0){var o="",a=[],r=[],i=0;console.log("RESULTADO :",t),$.each(t,function(e,t){var n=[],l=t.contenido.replace("../","");l=l.replace(/\//gi,"|"),n[0]={},n[0].id_opcion=t.idopcion,n[0].opcion=t.opcion,n[0].contenido=l;var s=JSON.stringify(n),s=s.substring(1,s.length),s=s.substring(0,s.length-1);o!=t.grp&&(""!=o&&(r=[]),a[i]={},a[i].id_grupo=t.idgrp,a[i].grupo=t.grp,a[i].sub_categories=n,o=t.grp,i+=1),a[i-1].sub_categories=r,r.push(s)});var n=JSON.stringify(a);n=n.replace(/\[\"/gi,"["),n=n.replace(/}","{/gi,"},{"),n=n.replace(/\"\]/gi,"]"),n=n.replace(/\\"/gi,'"'),e.categories=JSON.parse(n)}else e.msg="Error en usurio y/o contraseÃ±a"})},e.validarRenderizacion=function(){document.getElementById("dvContenido").style.display="block",document.getElementById("menuIzqui").style.display="block",document.getElementById("menuIzqui2").style.display="block"},e.$on("api:ready",function(){e.validarRenderizacion()}),e.inicioMenu=function(){e.validarRenderizacion()}}]),app.config(["$routeProvider",function(e){$default="../autenticacion/index.html",e.when("/login",{title:"Login",templateUrl:"partials/cargando.html",controller:"authCtrl"}).when("/logout",{title:"Logout",templateUrl:"partials/cargando.html",controller:"logoutCtrl"}).when("/signup",{title:"Signup",templateUrl:"partials/signup.html",controller:"authCtrl"}).when("/registro",{title:"Registro",templateUrl:"../registro_ciudadano/registro/index.html",controller:"registroCiudadanoController"}).when("/dashboard",{title:"Dashboard",templateUrl:"../registro_ciudadano/datosCiudadano/index.html",controller:"authCtrl"}).when("/",{title:"Login",templateUrl:"partials/cargando.html",controller:"authCtrl",role:"0"}).when("/:name",{templateUrl:"partials/blank.html",controller:PagesController}).otherwise({templateUrl:"partials/nofound.html"})}]).run(function(e,t,o,a,r){e.$on("$routeChangeStart",function(o,r,i){var n=window.location,l=n.href;if(l&&!sessionStorage.getItem("urliniciomoduloigob")&&(l=l.split("#"),l[1]&&l[1].length>10&&sessionStorage.setItem("urliniciomoduloigob",l[1])),sessionStorage.getItem("autenticacion")){if(e.authenticated=!1,e.usuario=a.get("IDUSUARIO"),e.usRol=a.get("US_ROL"),e.usNombre=a.get("US_NOMBRE"),e.usPaterno=a.get("US_PATERNO"),e.usMaterno=a.get("US_MATERNO"),e.usTipoPersona=a.get("TIPO_PERSONA"),e.stiporol=a.get("US_IDROL"),e.usuario)e.nombre=a.get("USUARIO");else if("/registro"!=r.originalPath){try{document.getElementById("menuIzqui").style.display="none",document.getElementById("menuIzqui2").style.display="none"}catch(e){}t.path("")}}else if("/registro"!=r.originalPath){try{document.getElementById("menuIzqui").style.display="none",document.getElementById("menuIzqui2").style.display="none"}catch(e){}window.location.href="../autenticacion/partials/login_.html"}})}),PagesController.$inject=["$scope","$http","$route","$routeParams","$compile","sessionService"];