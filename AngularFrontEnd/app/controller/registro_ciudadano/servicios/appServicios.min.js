app.controller("serviciosController",function(e,a,o,t,i,_,s,d,n,c,p,l,f,u,I,m,A,C,g){function O(a){var o=numero1,t=new captcha;t.identificador=o,t.respuesta=a,t.verificarCaptcha(function(a){json=JSON.parse(a);var o=json.success.length;0==o?(e.habGuardar1=!0,e.ErrorCapchasXX="Verifique el Capcha",e.SuccesCapchasxx="",e.$apply()):(e.habGuardar1=!1,e.ErrorCapchasXX="",e.SuccesCapchasxx="Capcha correcto",e.$apply())})}angular.module("myApp2",["ui.select2"]);e.imageCST="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAIAAADtz9qMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAbSURBVBhXY3growJHIM5/GIBy0GWgHCiSUQEAe00iZYBvZ5oAAAAASUVORK5CYII=",e.imageLNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAIAAADtz9qMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAbSURBVBhXY3growJHIM5/GIBy0GWgHCiSUQEAe00iZYBvZ5oAAAAASUVORK5CYII=";var T=new Date,N=T.getFullYear()+"-"+(T.getMonth()+1)+"-"+T.getDate()+" "+T.getHours()+":"+T.getMinutes()+":"+T.getSeconds();e.txtMsgConexionGen="",e.txtCiudadanoExiste="",a.looo="",a.laaa="",e.tablaTramites={},e.tramitesUsuario=[],e.servicio=1,e.divServicio=null,a.f01_tipo_lic="",a.f01_categoria_agrupada_descripcion="",a.f01_categoria_descrip="",a.f01_tipo_lic_descrip="",a.f01_categoria_agrupada_dem="",a.f01_categoria_agrupada_descrip="",a.f01_categoria_descripcion="",a.f01_categoria_descrip2="",a.f01_categoria="",e.f01_categoria_agrupada12=!0,e.formRegularRegistrado="",e.datosinic={},e.btover_c=!1,e.desabilitadocat=!1,e.desabilitadoact=!1,e.mostrarCategoria=!1,e.documentosarc=["","","","","","","","","","","","","",""];s.get("US_IDROL");e.templates=[{name:"template0.html",url:"../../../app/index.html"},{name:"template1.html",url:"../../../app/view/servicios/internet/index.html"},{name:"template2.html",url:"../../../app/index.html"},{name:"template3.html",url:"../../../app/view/registro_ciudadano/regMedico/index.html"},{name:"template4.html",url:"../../../app/view/servicios/publicidad/index.html"},{name:"template5.html",url:"../../../app/view/servicios/historial/index.html"},{name:"template6.html",url:"../../../app/view/servicios/internet/index_2.html"},{name:"template7.html",url:"../../../app/view/servicios/semdes/solicitud_viaje.html"},{name:"template8.html",url:"../../../app/view/servicios/semdes/solicitud_viaje.html"},{name:"template9.html",url:"../../../app/view/servicios/semdes/solicitud_viaje.html"},{name:"template10.html",url:"../../../app/view/servicios/aeregular/natural.html"},{name:"template11.html",url:"../../../app/view/servicios/aeregular/juridico.html"}],e.serivicosInternet=[{name:"Internet y Juegos en Red ",id:"1"},{name:"Juegos Mecánicos y/o Electromecánicos ",id:"6"},{name:"Actividades Economicas Regulares",id:"10"}],e.btnEnviarForm=!0,e.datosGuardados=!1,e.habGuardar1=!0,e.ErrorCapchasXX="",e.SuccesCapchasxx="",e.limpiarFormTramite=function(){e.procesoSeleccionado="",e.btnNuevoTramtite=!0,e.getCaptchasX(),e.datos.f01_tipo_lic="",e.datos.f01_categoria_agrupada_r="",e.datos.f01_actividad_desarrollada="",e.datosActividad="",a.f01_tipo_lic="",a.f01_categoria_agrupada_descripcion="",a.f01_categoria_descrip="",a.f01_tipo_lic_descrip="",a.f01_categoria_agrupada_dem="",a.f01_categoria_agrupada_descrip="",a.f01_categoria_descripcion="",a.f01_categoria_descrip2="",a.f01_categoria=""},e.template="";var v=new Array;e.recuperarDatosRegistro=function(){$.blockUI();var o={},t=new rcNatural;t.oid=s.get("IDSOLICITANTE"),t.datosCiudadanoNatural(function(a){if(results=JSON.parse(a),results[0].dtspsl_file_fotocopia_ci&&(e.btover=!0),results[0].dtspsl_file_fotocopia_ci_r&&(e.btover1=!0),"NATURAL"==results[0].dtspsl_tipo_persona){results[0].dtspsl_file_fotocopia_ci;o.FILE_FOTOCOPIA_CI=results[0].dtspsl_file_fotocopia_ci,o.FILE_FOTOCOPIA_CI_R=results[0].dtspsl_file_fotocopia_ci_r,o.FILE_FACTURA_LUZ=results[0].dtspsl_file_factura_luz}else"JURIDICO"==results[0].dtspsl_tipo_persona&&(o.FILE_FOTOCOPIA_CI=results[0].dtspsl_file_fotocopia_ci,o.FILE_FOTOCOPIA_CI_R=results[0].dtspsl_file_fotocopia_ci_r,$.unblockUI())}),e.datosinic=o,a.archivoCI=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datosinic.FILE_FOTOCOPIA_CI+"?app_name=todoangular",a.archivoCIR=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datosinic.FILE_FOTOCOPIA_CI_R+"?app_name=todoangular",a.archivoLuz=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datosinic.FILE_FACTURA_LUZ+"?app_name=todoangular",$.unblockUI()},e.recuperandoDatosInicialesCiudadano=function(){var a=s.get("IDUSUARIO");e.habGuardar1=!0,e.datosIniciales="";var o={},t="",i=new rcNatural;i.oid=a,i.datosCiudadanoNatural(function(a){if(resultadoApi=JSON.parse(a),datos=resultadoApi[0],t=resultadoApi[0].dtspsl_tipo_persona,e.sTipoPersona=resultadoApi[0].dtspsl_tipo_persona,N=T.getFullYear()+"/"+T.getMonth()+"/"+T.getDate(),"NATURAL"==t?(o.f01_tipo_per=t,o.f01_nom_completo=datos.dtspsl_nombres+" "+datos.dtspsl_paterno+" "+datos.dtspsl_materno,o.f01_tip_doc_prop="CI",o.f01_num_dos_prop=datos.dtspsl_ci,o.f01_expedido_prop=datos.dtspsl_expedido,o.f01_email_prop=datos.dtspsl_correo,o.f01_cel_prop=datos.dtspsl_movil,o.f01_tel=datos.dtspsl_telefono,o.INT_FEC_SOLICITUD=N,o.CI_BIGDATA=datos._id,o.f01_form_id=datos._id,o.f01_pri_nom_prop=datos.dtspsl_nombres,o.f01_ape_pat_prop=datos.dtspsl_paterno,o.f01_ape_mat_prop=datos.dtspsl_materno,o.f01_ape_cas_prop=datos.dtspsl_ctercer,datosFecha=new Date(datos.dtspsl_fec_nacimiento),o.f01_fecha_nac=datosFecha.getFullYear()+"/"+parseInt(datosFecha.getMonth()+1)+"/"+datosFecha.getDate(),o.INT_MACRODISTRITO=datos.dtspsl_macrodistrito,o.INT_NUMERO_DOMICILIO="",o.INT_TIPO_VIA="",o.INT_OCUPACION=datos.dtspsl_ocupacion,o.INT_DIRECCION=datos.dtspsl_direccion,o.TIPO="AE_INT_EMISION",o.f01_raz_soc=datos.f01_raz_soc,o.f01_sup="",o.f01_de_hor="",o.f01_a_hor="",o.INT_AC_ESTADO="",o.INT_AC_MACRO="",o.INT_AC_ZONA="",o.INT_AC_TIP_VIA="",o.INT_AC_NOMBRE_VIA="",o.INT_AC_NUMERO="",o.INT_AC_EDIFICIO="",o.INT_AC_BLOQUE="",o.INT_AC_PISO="",o.INT_AC_NUME="",o.INT_AC_TEL="",o.INT_AC_COR="",o.INT_AC_MACRO_ID="",o.f01_macro=datos.dtspsl_macrodistrito,o.f01_distrito=datos.dtspsl_distrito,o.f01_zona=datos.dtspsl_zona,o.f01_macro_des=datos.dtspsl_macrodistrito_desc,o.f01_distrito_desc=datos.dtspsl_distrito_desc,o.f01_zon_prop_valor=datos.dtspsl_zona_desc,o.INT_VIA=datos.dtspsl_tipo_via,o.f01_nom_via_prop=datos.dtspsl_nombre_via,o.f01_num_prop=datos.dtspsl_numero_casa,o.INT_EDIF=datos.dtspsl_edificio,o.f01_bloq_prop=datos.dtspsl_bloque,o.INT_PISO=datos.dtspsl_piso,o.INT_NUM_DEP=datos.dtspsl_oficina,o.INT_DIR_DET=datos.dtspsl_direccion,o.f01_tip_via_prop=datos.dtspsl_tipo_via,"LPZ"==datos.dtspsl_expedido||"CBB"==datos.dtspsl_expedido||"SCZ"==datos.dtspsl_expedido||"CHQ"==datos.dtspsl_expedido||"TJA"==datos.dtspsl_expedido||"PTS"==datos.dtspsl_expedido||"ORU"==datos.dtspsl_expedido||"BNI"==datos.dtspsl_expedido||"PND"==datos.dtspsl_expedido?(o.f01_nac_prop="BOLIVIANA",o.INT_NACIONALIDAD="BOLIVIANA"):(o.f01_nac_prop="EXTRANJERO",o.INT_NACIONALIDAD="EXTRANJERO")):(o.f01_tipo_per=t,o.f01_tip_doc_prop="NIT",o.f01_num_doc_per_jur=datos.dtspsl_nit,o.f01_raz_soc_per_jur=datos.dtspsl_razon_social,o.f01_ges_vig_pod=datos.dtspsl_poder_replegal,o.f01_num_doc_rep=datos.dtspsl_ci_representante,o.f01_num_pod_leg="",o.f01_zona_rep=datos.dtspsl_zona,o.f01_tip_doc_rep="CI",o.f01_expedido_rep=datos.dtspsl_expedido,o.f01_email_rep=datos.dtspsl_correo,o.f01_cel_rep=datos.dtspsl_movil,o.f01_telef_rep=datos.dtspsl_telefono,o.INT_FEC_SOLICITUD=N,o.CI_BIGDATA=datos._id,datosFecha=new Date(datos.dtspsl_fec_nacimiento),o.f01_fecha_nac=datosFecha.getFullYear()+"/"+parseInt(datosFecha.getMonth()+1)+"/"+datosFecha.getDate(),o.TIPO="AE_INT_EMISION",o.f01_raz_soc=datos.f01_raz_soc,o.f01_sup="",o.f01_de_hor="",o.INT_AC_HR_FINAL="",o.INT_AC_ESTADO="",o.INT_AC_MACRO="",o.INT_AC_ZONA="",o.INT_AC_TIP_VIA="",o.INT_AC_NOMBRE_VIA="",o.INT_AC_NUMERO="",o.INT_AC_EDIFICIO="",o.INT_AC_BLOQUE="",o.INT_AC_PISO="",o.INT_AC_NUME="",o.INT_AC_NUME="",o.INT_AC_TEL="",o.INT_AC_COR="",o.INT_AC_MACRO_ID="",o.f01_rl_nit=datos.dtspsl_nit,o.INT_RL_TIPO_DOCUMENTO="NIT",o.f01_macro=datos.dtspsl_macrodistrito,o.f01_distrito=datos.dtspsl_distrito,o.f01_zona=datos.dtspsl_zona,o.f01_macro_des=datos.dtspsl_macrodistrito_desc,o.f01_distrito_desc=datos.dtspsl_distrito_desc,o.f01_id_zona_rep=datos.dtspsl_zona,o.f01_zon_rep_valor=datos.dtspsl_zona_desc,o.INT_VIA=datos.dtspsl_tipo_via,o.f01_nom_via_rep=datos.dtspsl_nombre_via,o.f01_num_rep=datos.dtspsl_numero_casa,o.f01_tipo_viarep=datos.dtspsl_tipo_via,o.INT_RL_FEC_EMISION_DOCUMENTO="2016-03-2016",o.f01_num_notaria=datos.dtspsl_nro_notaria,o.INT_NACIONALIDAD="BOLIVIANA",datosFecha=new Date(datos.dtspsl_fec_nacimiento),o.INT_RL_FEC_NACIMIENTO=datosFecha.getFullYear()+"/"+parseInt(datosFecha.getMonth()+1)+"/"+datosFecha.getDate(),o.INT_NIT=datos.dtspsl_nit,o.f01_poder_representante=datos.dtspsl_file_poder_legal,o.f01_test_cons_sociedad_j=datos.dtspsl_file_test_const,o.file_num_ident=datos.dtspsl_file_num_ident,o.file_reg_comer=datos.dtspsl_file_reg_comer,o.file_fund_emp=datos.dtspsl_file_fund_emp),datos.dtspsl_ci_representante||null!=datos.dtspsl_ci_representante&&""!=datos.dtspsl_ci_representante)try{var i=new rcNatural;i.tipo_persona="NATURAL",i.ci=datos.dtspsl_ci_representante,i.buscarPersona(function(e){resultadoApiRepre=JSON.parse(e);var a=resultadoApiRepre;"undefined"==typeof a[0].dtspsl_nombres?"":a[0].dtspsl_nombres,"undefined"==typeof a[0].dtspsl_paterno?"":a[0].dtspsl_paterno,"undefined"==typeof a[0].dtspsl_materno?"":a[0].dtspsl_materno;o.id_representante=a[0]._id,o.f01_pri_nom_prop="undefined"==typeof a[0].dtspsl_nombres?"":a[0].dtspsl_nombres,o.f01_ape_pat_prop="undefined"==typeof a[0].dtspsl_paterno?"":a[0].dtspsl_paterno,o.f01_ape_mat_prop="undefined"==typeof a[0].dtspsl_materno?"":a[0].dtspsl_materno,o.INT_RL_FECHA_NAC="undefined"==typeof a[0].dtspsl_fec_nacimiento?"":a[0].dtspsl_fec_nacimiento,o.INT_RL_FEC_NACIMIENTO="undefined"==typeof new Date(a[0].dtspsl_fec_nacimiento)?"":new Date(a[0].dtspsl_fec_nacimiento),o.oid_representante_legal=a[0]._id;var t=a[0].dtspsl_nombres.split(" ");o.f01_pri_nom_rep="undefined"==a[0].dtspsl_nombres?"":a[0].dtspsl_nombres,o.f01_seg_nom_rep="undefined"==typeof t[1]?"":t[1],o.f01_ape_cas_rep="undefined"==typeof a[0].dtspsl_tercer_apellido?"":a[0].dtspsl_tercer_apellido,o.f01_ape_pat_rep="undefined"==typeof a[0].dtspsl_paterno?"":a[0].dtspsl_paterno,o.f01_ape_mat_rep="undefined"==typeof a[0].dtspsl_materno?"":a[0].dtspsl_materno,o.f01_expedido_rep=a[0].dtspsl_expedido,o.FILE_FOTOCOPIA_CI_RA=a[0].dtspsl_file_fotocopia_ci,o.FILE_FOTOCOPIA_CI_RR=a[0].dtspsl_file_fotocopia_ci_r;var t=a[0].dtspsl_nombres.split(" ")})}catch(e){console.log("*Error*",e)}var r="undefined"==typeof o.INT_ZONA?"":o.INT_ZONA,_="undefined"==typeof o.f01_macro?"":o.f01_macro,s="undefined"==typeof o.f01_distrito?"":o.f01_distrito;if(""!=r&&""!=_&&""!=s){var d="undefined"==typeof o.f01_zon_prop_valor?"":o.f01_zon_prop_valor,n="undefined"==typeof o.f01_macro_des?"":o.f01_macro_des,c="undefined"==typeof o.f01_distrito_desc?"":o.f01_distrito_desc;if(""==n)try{var p=new macrodistritoLstid;p.idMacro=_,p.obtmacrodistrito(function(e){x=JSON.parse(e);var a=x.success.data;a.length>0&&(n=a.mcdstt_macrodistrito,o.INT_MACRO_DESC=n)})}catch(e){console.log("error en macrodistrito")}if(""==c)try{var l=new tipoVia;l.idDistrito=s,l.obtdistrito(function(e){x=JSON.parse(e);var a=x.success;a.length>0&&(c=a[0].dstt_distrito,o.INT_DISTRITO_DESC=c)})}catch(e){console.log("error en distrito id")}if(""==d)try{var f=new zonaLstid;f.idzona=r,f.obtzona(function(e){x=JSON.parse(e);var a=x.success;a.length>0&&(d=a[0].dist_nombre,o.INT_ZONA_DESC=d)})}catch(e){console.log("error en zona id")}}datos.dtspsl_expedido||(o.f01_expedido_prop="LPZ"),e.datosIniciales=o})},e.habilitarCrear=function(a){e.procesoSeleccionado=10,e.btnNuevoTramtite=!1},e.re=!1,e.rej=!1,e.recuperandoDatosGenesis=function(){var a=s.get("TIPO_PERSONA"),o="",t="",i="";"NATURAL"==a?(o=s.get("CICIUDADANO"),i="C01"):"JURIDICO"==a&&(t=s.get("NITCIUDADANO"),i="C02");var r=new gLstDatos;r.idContribuyente="",r.clase="",r.padron="",r.identificacion=o,r.primerNombre="",r.primerApellido="",r.segundoApellido="",r.nit=t,r.empresa="",r.p_accion=i;try{r.lstDatosContribuyente(function(a){if(resultadoApi=JSON.parse(a),resultadoApi.success){var o=resultadoApi;e.txtMsgConexionGen="",o.success.dataSql.length>0?e.dataGenesisCidadano=o.success.dataSql:e.dataGenesisCidadano={}}else e.txtMsgConexionGen="Se ha producido un problema de conexion al cargar los datos",$.unblockUI()})}catch(a){e.txtMsgConexionGen="Se ha producido un problema de conexion al cargar los datos"}},e.tramitesCiudadano=function(){sIdCiudadano=s.get("IDSOLICITANTE");try{var a=new rcTramitesAe;a.oid=sIdCiudadano,a.obtTramites(function(a){r=JSON.parse(a),results=r.success,angular.forEach(results,function(e,a){e.form_contenido&&(results[a].datos=JSON.parse(e.form_contenido))}),e.tramitesUsuario=results;results;e.tablaTramites.reload()})}catch(e){console.log("Error Interno : ",e)}},e.tablaTramites=new l({page:1,count:4,filter:{},sorting:{vtra_id:"desc"}},{total:e.tramitesUsuario.length,getData:function(a,o){var t=o.filter()?f("filter")(e.tramitesUsuario,o.filter()):e.tramitesUsuario,i=o.sorting()?f("orderBy")(t,o.orderBy()):e.tramitesUsuario;o.total(e.tramitesUsuario.length),a.resolve(i.slice((o.page()-1)*o.count(),o.page()*o.count()))}}),e.iniciandoDatos=function(){var o=e.datosIniciales,t=C.obtenerFechaActual();e.datos={};var i={};e.formRegularRegistrado&&(i.f01_tipo_lic=e.formRegularRegistrado.f01_tipo_lic,i.f01_categoria_agrupada=e.formRegularRegistrado.f01_categoria_agrupada,i.f01_categoria_descrip=e.formRegularRegistrado.f01_categoria_descrip,i.f01_categoria_descrip=e.formRegularRegistrado.f01_categoria_descrip,i.f01_actividadesSecundarias=e.formRegularRegistrado.f01_actividadesSecundarias,i.f01_tipo_lic_descrip=e.formRegularRegistrado.f01_tipo_lic_descrip,i.f01_categoria_agrupada_dem=e.formRegularRegistrado.f01_categoria_agrupada_dem,i.f01_categoria_agrupada_descrip=e.formRegularRegistrado.f01_categoria_agrupada_descrip,i.f01_categoria_descripcion=e.formRegularRegistrado.f01_categoria_descripcion,i.f01_categoria_descrip2=e.formRegularRegistrado.f01_categoria_descrip2,i.f01_categoria_agrupada_descripcion=e.formRegularRegistrado.f01_categoria_agrupada_descripcion),i.f01_id=o.f01_id,i.CI_BIGDATA=o.CI_BIGDATA,i.INT_FEC_SOLICITUD=t,i.f01_nom_completo=o.f01_nom_completo,i.f01_tip_doc_prop=o.f01_tip_doc_prop,i.f01_num_dos_prop=o.f01_num_dos_prop,i.f01_expedido_prop=o.f01_expedido_prop,i.f01_email_prop=o.f01_email_prop,i.f01_cel_prop=o.f01_cel_prop,i.f01_telef_prop=o.f01_telef_prop,i.f01_fecha_nac=o.f01_fecha_nac,i.f01_ape_mat_prop=o.f01_ape_mat_prop,i.f01_ape_pat_prop=o.f01_ape_pat_prop,i.f01_pri_nom_prop=o.f01_pri_nom_prop,i.f01_tel_ciudadano=o.f01_tel,i.f01_piso_prop=o.f01_piso_prop,i.f01_depa_prop=o.f01_depa_prop,i.f01_rl_nit=o.f01_rl_nit,i.f01_rl_razon_zocial=o.f01_rl_razon_zocial,i.INT_RL_TIPO_DOCUMENTO="",i.f01_rl_num_documento="",i.f01_tipo_per=o.f01_tipo_per,i.f01_pri_nom_prop=o.f01_pri_nom_prop,i.f01_ape_pat_prop=o.f01_ape_pat_prop,i.f01_ape_mat_prop=o.f01_ape_mat_prop,i.f01_ape_cas_prop=o.f01_ape_cas_prop,i.f01_macro=o.f01_macro,i.f01_macro_des=o.f01_macro_des,i.f01_distrito=o.f01_distrito,i.f01_distrito_desc=o.f01_distrito_desc,i.f01_zona=o.f01_zona,i.f01_zon_prop_valor=o.f01_zon_prop_valor,i.INT_VIA=o.INT_VIA,i.f01_nom_via_prop=o.f01_nom_via_prop,i.f01_num_prop=o.f01_num_prop,i.INT_EDIF=o.INT_EDIF,i.f01_bloq_prop=o.f01_bloq_prop,i.INT_PISO=o.INT_PISO,i.INT_NUM_DEP=o.INT_NUM_DEP,i.INT_DIR_DET=o.INT_DIR_DET,i.INT_RL_FEC_EMISION_DOCUMENTO=o.INT_RL_FEC_EMISION_DOCUMENTO,i.INT_NACIONALIDAD=o.INT_NACIONALIDAD,i.INT_RL_FEC_NACIMIENTO=o.INT_RL_FEC_NACIMIENTO,i.INT_NIT=o.INT_NIT,i.f01_tip_via_prop=o.f01_tip_via_prop,i.INT_RL_TIPO_DOCUMENTO=o.INT_RL_TIPO_DOCUMENTO,i.f01_rl_num_documento=o.f01_rl_num_documento,i.INT_RL_FECHA_NAC=o.INT_RL_FECHA_NAC,i.IDTRAMITE=o.IDTRAMITE,i.f01_num_doc_rep=o.f01_num_doc_rep,i.f01_num_notaria=o.f01_num_notaria,i.f01_num_rep=o.f01_num_rep,i.f01_tip_doc_rep="NIT",i.f01_num_doc_per_jur=o.f01_num_doc_per_jur,i.f01_raz_soc_per_jur=o.f01_raz_soc_per_jur,i.f01_tip_doc_rep=o.f01_tip_doc_rep,i.f01_expedido_rep=o.f01_expedido_rep,i.f01_pri_nom_rep=o.f01_pri_nom_rep,i.f01_seg_nom_rep=o.f01_seg_nom_rep,i.f01_ter_nom_rep=o.f01_ter_nom_rep,i.f01_ape_pat_rep=o.f01_ape_pat_rep,i.f01_ape_mat_rep=o.f01_ape_mat_rep,i.f01_ape_cas_rep=o.f01_ape_cas_rep,i.f01_ges_vig_pod=o.f01_ges_vig_pod,i.f01_num_doc_rep=o.f01_num_doc_rep,i.f01_num_pod_leg=o.f01_num_pod_leg,i.f01_tip_doc_rep=o.f01_tip_doc_rep,i.f01_email_rep=o.f01_email_rep,i.f01_cel_rep=o.f01_cel_rep,i.f01_telef_rep=o.f01_telef_rep,i.INT_FEC_SOLICITUD=t,i.f01_fecha_nac=o.f01_fecha_nac,i.TIPO="AE_INT_EMISION",i.f01_raz_soc=o.f01_raz_soc,i.INT_RL_TIPO_DOCUMENTO="NIT",i.f01_num_rep=o.f01_num_rep,i.f01_nom_via_rep=o.f01_nom_via_rep,i.f01_tipo_viarep=o.f01_tipo_viarep,i.f01_id_zona_rep=o.f01_id_zona_rep,i.f01_zona_rep=o.f01_zona_rep,i.f01_zon_rep_valor=o.f01_zon_rep_valor,i.INT_NIT=o.INT_NIT,i.f01_poder_representante=o.f01_poder_representante,i.f01_test_cons_sociedad_j=o.f01_test_cons_sociedad_j,i.file_num_ident=o.file_num_ident,i.file_reg_comer=o.file_reg_comer,i.file_fund_emp=o.file_fund_emp,i.INT_AC_TIP_VIA=o.INT_AC_TIP_VIA,"N"==o.f01_tipo_per||"NATURAL"==o.f01_tipo_per?(i.FILE_FOTOCOPIA_CI=e.datosinic.FILE_FOTOCOPIA_CI,i.FILE_FOTOCOPIA_CI_R=e.datosinic.FILE_FOTOCOPIA_CI_R,i.FILE_FACTURA_LUZ=e.datosinic.FILE_FACTURA_LUZ):"J"!=o.f01_tipo_per&&"JURIDICO"!=o.f01_tipo_per||(e.btover_c=!0,i.id_representante=o.id_representante,i.FILE_FOTOCOPIA_CI=o.FILE_FOTOCOPIA_CI_RA,i.FILE_FOTOCOPIA_CI_R=o.FILE_FOTOCOPIA_CI_RR,i.f01_poder_representante=o.f01_poder_representante,i.f01_test_cons_sociedad_j=o.f01_test_cons_sociedad_j,i.file_num_ident=o.file_num_ident,i.file_reg_comer=o.file_reg_comer,i.file_fund_emp=o.file_fund_emp),i.IDTRAMITE=e.sIdTramiteSeleccionado,a.looo=0,a.laaa=0,e.datos=i,"N"!=o.f01_tipo_per&&"NATURAL"!=o.f01_tipo_per||(o.f01_macro&&o.f01_distrito&&o.f01_distrito_desc&&o.f01_zona&&o.f01_zon_prop_valor&&o.f01_tip_via_prop&&o.f01_nom_via_prop&&o.f01_num_prop?e.validacionDireccion=!1:(e.validacionDireccion=!0,swal("Complete información","Datos de dirección son obligatorios debe completar la información de su cuenta","error")))},e.seleccionarTramite=function(o){e.getCaptchasXX(),a.tramiteId=o.vtra_id,s.set("IDTRAMITE",o.vtra_id),s.set("IDSERVICIO",o.vdvser_id),s.set("ESTADO",o.venviado),e.template="",e.formulario="mostrar";var t=s.get("TIPO_PERSONA"),i=o.vdvser_id;"NATURAL"==t&&10==i&&(i=10),"JURIDICO"==t&&10==i&&(i=11),"SI"==o.venviado?e.template=e.templates[i]:e.template=e.templates[i],"NATURAL"==t?e.recuperarSerializarInfo(o):e.recuperarSerializarInfo(o),e.tramiteSeleccionado=o.vtra_id;var r=document.getElementById("tipo_contribuyente");r&&(r.style.display="none")};new Array;e.recuperarSerializarInfo=function(o){e.btover_c=!0,e.recuperarDatosRegistro();var t=o.vtra_id;e.sIdTramiteSeleccionado=o.vtra_id;var i=s.get("IDSOLICITANTE"),_=s.get("IDSERVICIO");try{var d=new datosFormularios;d.frm_tra_id_ciudadano=i,d.frm_tra_dvser_id=_,d.frm_idTramite=t,d.splistafrmdatos(function(i){r=JSON.parse(i),results=r.success;var _="";results&&(datoform=JSON.parse(results[0].form_contenido),_="undefined"==typeof datoform.INT_FORM_ALMACENADO||null==datoform.INT_FORM_ALMACENADO?"":datoform.INT_FORM_ALMACENADO,"G"==_?(e.datos.INT_FORM_ALMACENADO="G",a.campoidform=results[0].form_id,datos=JSON.parse(results[0].form_contenido),e.adjuntosArray=datos.ARCHIVOS_MULTIPLES,e.datos=datos,"NATURAL"==e.datos.f01_tipo_per||"N"==e.datos.f01_tipo_per?(e.datos.FILE_FOTOCOPIA_CI=e.datosinic.FILE_FOTOCOPIA_CI,e.datos.FILE_FOTOCOPIA_CI_R=e.datosinic.FILE_FOTOCOPIA_CI_R,e.datos.FILE_FACTURA_LUZ=e.datosinic.FILE_FACTURA_LUZ):"JURIDICO"!=e.datos.f01_tipo_per&&"J"!=e.datos.f01_tipo_per||(e.datos.FILE_FOTOCOPIA_CI=e.datosIniciales.FILE_FOTOCOPIA_CI_RA,e.datos.FILE_FOTOCOPIA_CI_R=e.datosIniciales.FILE_FOTOCOPIA_CI_RR),"POS/EMPR2017"==e.datos.g_origen&&"CP"==e.datos.swpublicidad&&"CP"==e.datos.sw_publicidad,e.datos.IDTRAMITE=t,e.publicid=[],e.publicid=e.datos.publicidad,a.looo=e.datos.INT_AC_longitud,a.laaa=e.datos.INT_AC_latitud,e.nroRegistros=datos.length):"C"==_?(e.datos.IDTRAMITE=t,a.campoidform=results[0].form_id,e.formRegularRegistrado=JSON.parse(results[0].form_contenido),e.datos.INT_FORM_ALMACENADO="C",e.iniciandoDatos()):(e.nroRegistros=0,e.datos="",e.adjuntosArray="",e.iniciandoDatos(),s.set("IDTRAMITE",t)),a.$broadcast("iniciaBtnHabilitar",datoform.INT_FORM_ALMACENADO)),setTimeout(function(){a.$broadcast("validarBtnEnviar",results.length),a.$broadcast("inicializarCamposInternet",e.datos),a.$broadcast("inicializarGrillaAE",[{datos:e.datos,venviado:o.venviado}]),a.$broadcast("inicializarFechaOblitatorio",e.datos),a.$broadcast("inicializarHtmlForm",o)},3e3)})}catch(e){console.log("Error Interno : ",e)}},e.bloquearBtnEnviarForm=function(){e.botones=null},e.subirArchivos=function(){var a=new Array;a.push(e.FILE_FOTOCOPIA_CI),a.push(e.FILE_FACTURA_SERVICIO),a.push(e.FILE_CROQUIS),a.push(e.FILE_ANTECEDENTES),a.push(e.FILE_ANTECEDENTES1),a.push(e.FILE_CONSTITUCION),a.push(e.FILE_PODER),a.push(e.FILE_FOTOCOPIA_CI_REP),a.push(e.FILE_LICENCIA),a.push(e.FILE_POLIZA),a.push(e.FILE_CERTIFICACION),a.push(e.FILE_COMPROMISO),a.push(e.FILE_IBNORCA),a.push(e.FILE_DECLARACION_JURADA),e.almacenarDocumentos(a)},e.serializarInformacion=function(o){var t=document.getElementById("f01_tipo_lic"),i=t.options[t.selectedIndex].text;if(3375!=o.f01_tipo_lic){var r=document.getElementById("f01_categoria_agrupada");selected1=r.options[r.selectedIndex].text;var _=document.getElementById("f01_categoria_descrip");selected2=_.options[_.selectedIndex].text}else selected1="",selected2="",o.f01_categoria_descrip=3375,o.f01_categoria_agrupada=3375;if("--Seleccionar--"==selected2&&(_=document.getElementById("f01_categoria_agrupada"),selected2=_.options[_.selectedIndex].text),"1"==o.f01_tipo_lic||"3"==o.f01_tipo_lic||"4"==o.f01_tipo_lic){var d=document.getElementById("f01_categoria_agrupada");o.f01_actividadesSecundarias=d.options[d.selectedIndex].text}else 3375==o.f01_tipo_lic?o.f01_actividadesSecundarias=o.f01_actividadesSecundarias:o.f01_actividadesSecundarias="";var n=C.obtenerFechaActual();o.INT_AC_NOMBRE_VIA="undefined"==typeof o.INT_AC_NOMBRE_VIA||null==o.INT_AC_NOMBRE_VIA?"":o.INT_AC_NOMBRE_VIA.toUpperCase(),o.f01_raz_soc="undefined"==typeof o.f01_raz_soc||null==o.f01_raz_soc?"":o.f01_raz_soc.toUpperCase(),o.INT_AC_EDIFICIO="undefined"==typeof o.INT_AC_EDIFICIO||null==o.INT_AC_EDIFICIO?"":o.INT_AC_EDIFICIO.toUpperCase(),o.INT_AC_NUMERO="undefined"==typeof o.INT_AC_NUMERO||null==o.INT_AC_NUMERO?"":o.INT_AC_NUMERO.toUpperCase(),o.INT_AC_BLOQUE="undefined"==typeof o.INT_AC_BLOQUE||null==o.INT_AC_BLOQUE?"":o.INT_AC_BLOQUE.toUpperCase(),o.INT_AC_PISO="undefined"==typeof o.INT_AC_PISO||null==o.INT_AC_PISO?"":o.INT_AC_PISO.toUpperCase(),o.INT_AC_NUME="undefined"==typeof o.INT_AC_NUME||null==o.INT_AC_NUME?"":o.INT_AC_NUME.toUpperCase(),o.INT_FEC_SOLICITUD="undefined"==typeof o.INT_FEC_SOLICITUD||null==o.INT_FEC_SOLICITUD?"":n,o.INT_DIR_DET="undefined"==typeof o.INT_DIR_DET||null==o.INT_DIR_DET?"":o.INT_DIR_DET.toUpperCase(),o.AE_ORD_DEM="undefined"==typeof o.AE_ORD_DEM||null==o.AE_ORD_DEM?"":o.AE_ORD_DEM.toUpperCase(),o.f01_ci_extranjero="undefined"==typeof o.f01_ci_extranjero||null==o.f01_ci_extranjero?"":o.f01_ci_extranjero.toUpperCase(),o.misDocs=e.documentosarc,o.File_Adjunto=a.FileAdjuntos,o.INT_FORM_ALMACENADO="G","NATURAL"==o.f01_tipo_per?(o.f01_tipo_per="N",o.f01_tipo_per_desc="NATURAL"):(o.f01_tipo_per="J",o.f01_tipo_per_desc="JURIDICO"),o.f01_tipo_lic_descrip=i,o.f01_categoria_agrupada_dem=selected1,o.f01_categoria_agrupada_descrip=selected1,o.f01_categoria_agrupada_descripcion=selected2,o.f01_categoria=o.f01_categoria_descrip,o.f01_categoria_descripcion=selected2,o.f01_categoria_descrip2=selected2,e.datos.f01_tipo_lic_descrip=i,e.datos.f01_categoria_agrupada_dem=selected1,e.datos.f01_categoria_agrupada_descrip=selected1,e.datos.f01_categoria_agrupada_descripcion=selected2,e.datos.f01_categoria=o.f01_categoria_descrip,e.datos.f01_categoria_descripcion=selected2,e.datos.f01_categoria_descrip2=selected2;try{var c=JSON.stringify(o),p=s.get("IDSOLICITANTE"),l=s.get("IDTRAMITE"),f=s.get("IDSERVICIO"),u=new datosFormularios;u.frm_tra_dvser_id=f,u.data_json=c,u.frm_tra_id_ciudadano=p,u.frm_tra_id_usuario=1,u.frm_idTramite=l,a.btnGuardarForm=!0,$.blockUI(),u.sp_crear_datos_formulario(function(o){o=JSON.parse(o),o=o.success,o.length>0?($.unblockUI(),e.btnEnviarForm=!1,e.btnGuardarForm=!1,a.$broadcast("inicializarFechaOblitatorio",e.datos),a.$broadcast("iniciaBtnHabilitar","G"),swal("","Formulario almacenado","success")):($.unblockUI(),swal("","Formulario no almacenado","error"))})}catch(a){e.btnGuardarForm=!1,$.unblockUI()}},e.enviarInformacion=function(a){$.blockUI();try{var o=s.get("IDTRAMITE");idUsuario=s.get("IDUSUARIO");var t=new datosFormularios;sIdCiudadano=s.get("IDSOLICITANTE"),t.frm_idTramite=o,t.frm_tra_enviado="SI",t.frm_tra_id_usuario=idUsuario,t.frm_tra_modificado=N,t.enviarFormulario(function(a){a=JSON.parse(a),swal("","Formulario enviado al G.A.M.L.P.","success"),e.tramitesCiudadano(),e.desabilitado=!0})}catch(e){console.log(e),swal("","Registro no modificado","error"),$.unblockUI()}},e.GetValueLicencia=function(){var e=document.getElementById("f01_tipo_lic");a.f01_tipo_lic_descrip=e.options[e.selectedIndex].text},e.GetValueCategoriaAgrupada=function(){var e=document.getElementById("f01_categoria_agrupada");a.f01_categoria_agrupada_dem=e.options[e.selectedIndex].text,a.f01_categoria_agrupada_descrip=e.options[e.selectedIndex].text},e.GetValueCategoria=function(){e.limpformDesarrollada();var o=document.getElementById("f01_actividad_desarrollada");a.f01_categoria_descripcion=o.options[o.selectedIndex].text,a.f01_categoria_descrip2=o.options[o.selectedIndex].text,a.f01_categoria=a.f01_actividad_desarrollada,a.f01_categoria_agrupada_descripcion=o.options[o.selectedIndex].text},e.limpformDesarrollada=function(){a.f01_categoria_descripcion="",a.f01_categoria_descrip2="",a.f01_categoria="",a.f01_categoria_agrupada_descripcion=""},e.lista_categorias=function(a){e.procesoSeleccionado=10,e.btnNuevoTramtite=!0;try{3375==a?(e.procesoSeleccionado=10,e.btnNuevoTramtite=!1,e.f01_categoria_agrupada12=!1,e.desabilitadocat=!0,e.desabilitadoact=!0,e.mostrarCategoria=!1):(e.procesoSeleccionado=10,e.f01_categoria_agrupada12=!0,e.desabilitadocat=!1,e.desabilitadoact=!1,e.mostrarCategoria=!0);var o=new categoriasAgrpLicencia;o.dependencia=a,o.categorias_AgrpLicencia(function(a){x=JSON.parse(a),response=x.success.data,e.datoscategoria=response,e.datos.f01_actividad_desarrollada="",e.datosActividad=""})}catch(e){console.log("Error en categoria agrupada")}datoObjectFile1=new Object,datoObjectFile2=new Object,datoObjectFiles_ci=[];var t=s.get("TIPO_PERSONA");"NATURAL"!=t&&"N"!=t||(datoObjectFile1.url=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datos.FILE_FOTOCOPIA_CI+"?app_name=todoangular",datoObjectFile1.campo="Cedula de identidad (Anverso)",datoObjectFile1.nombre="Cedula de identidad (Reverso)",datoObjectFiles_ci[0]=datoObjectFile1,datoObjectFile2.url=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datos.FILE_FOTOCOPIA_CI_R+"?app_name=todoangular",datoObjectFile2.campo="Cedula de identidad (Anverso)",datoObjectFile2.nombre="Cedula de identidad (Reverso)",datoObjectFiles_ci[1]=datoObjectFile2,e.datos.FILE_CI=datoObjectFiles_ci),"JURIDICO"!=t&&"J"!=t||(datoObjectFile1=new Object,datoObjectFile2=new Object,datoObjectFile3=new Object,datoObjectFile4=new Object,datoObjectFile5=new Object,datoObjectFile6=new Object,datoObjectFiles_ci=[],e.datos.FILE_CI="",e.datos.fileArchivosAd="",datoObjectFile1.url=d.APIURL+"/files/RC_CLI/"+e.datos.id_representante+"/"+e.datos.FILE_FOTOCOPIA_CI+"?app_name=todoangular",datoObjectFile1.campo="Cedula de identidad (Anverso)",datoObjectFile1.nombre="Cedula de identidad (Reverso)",datoObjectFiles_ci[0]=datoObjectFile1,datoObjectFile2.url=d.APIURL+"/files/RC_CLI/"+e.datos.id_representante+"/"+e.datos.FILE_FOTOCOPIA_CI_R+"?app_name=todoangular",datoObjectFile2.campo="Cedula de identidad (Anverso)",datoObjectFile2.nombre="Cedula de identidad (Reverso)",datoObjectFiles_ci[1]=datoObjectFile2,datoObjectFile3.url=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datos.f01_poder_representante+"?app_name=todoangular",datoObjectFile3.campo="Poder de Representación Legal",datoObjectFile3.nombre="Poder de Representación Legal",datoObjectFiles_ci[2]=datoObjectFile3,datoObjectFile4.url=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datos.f01_test_cons_sociedad_j+"?app_name=todoangular",datoObjectFile4.campo="Testimonio de Constitución de Sociedad",datoObjectFile4.nombre="Testimonio de Constitución de Sociedad",datoObjectFiles_ci[3]=datoObjectFile4,datoObjectFile5.url=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datos.file_num_ident+"?app_name=todoangular",datoObjectFile5.campo="NIT o inscripción al Régimen Simplificado",datoObjectFile5.nombre="NIT o inscripción al Régimen Simplificado",datoObjectFiles_ci[4]=datoObjectFile5,datoObjectFile6.url=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+e.datos.file_fund_emp+"?app_name=todoangular",datoObjectFile6.campo="FUNDEMPRESA o Matricula de Comercio",datoObjectFile6.nombre="FUNDEMPRESA o Matricula de Comercio",datoObjectFiles_ci[5]=datoObjectFile6,e.datos.FILE_CI=datoObjectFiles_ci)},e.catactividadDesarrollada=function(){e.datos.f01_actividad_desarrollada="",e.datosActividad="";try{var a=new actividaddesarrolladagrupo;a.actividad_desarrolladagrupo(function(a){e.datosActividad="",e.datos.f01_actividad_desarrollada="",x=JSON.parse(a),response=x.success.data,response.length>0?e.datosActividad=response:e.msg="Error !!"})}catch(e){alert("Error en la actividad desarrollada")}},e.LicenciaXCategoria=function(a){try{var o=new categoriaagrupadalicenciades;o.dependencia=a,o.categoriaagrupadalicencia_des(function(o){if(e.datosActividadLicencia="",x=JSON.parse(o),response=x.success.data,response.length>0){e.datosActividadLicencia=response,e.datos.f01_tipo_lic=response[0].idlicencia,e.datos.f01_categoria_agrupada=response[0].catagrpuid,e.datos.f01_categoria_descrip=a,e.datos.f01_tipo_lic_descrip=response[0].deslicencia,e.datos.f01_categoria_agrupada_dem=response[0].idcategoriaagrupada,e.datos.f01_categoria_agrupada_descrip=response[0].idcategoriaagrupada;var t=document.getElementById("f01_actividad_desarrollada");selected2=t.options[t.selectedIndex].text,e.datos.f01_categoria_descripcion=selected2,e.datos.f01_categoria_descrip2=selected2,e.datos.f01_categoria_agrupada_descripcion=selected2}else e.msg="Error !!"})}catch(e){console.log("Error en la actividad desarrollada")}},e.adicionarServicioGamlp=function(o){var t={},i=new Date,r=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),_=10,d=s.get("IDSOLICITANTE"),n=r;t.INT_FORM_ALMACENADO="C";var c=JSON.stringify(t);$.blockUI();try{var p=new adicionaTramitesFormulario;p.frm_tra_fecha=n,p.frm_tra_enviado="NO",p.frm_tra_registrado=r,p.frm_tra_modificado=r,p.id_servicio=_,p.data_json=c,p.oid_ciudadano=d,p.id_usuario=3,$.blockUI(),p.adiciona_Tramites_Formulario(function(o){x=JSON.parse(o),response=x.success,response.length>0?(s.set("IDTRAMITE",response[0].sp_insertar_formulario_tramites),$.unblockUI(),e.tramitesCiudadano(),e.getCaptchasX(),swal("","Registro Creado correctamente","success"),s.destroy("NROTRAMITE"),s.destroy("NROTRAMITEID"),s.destroy("IDPROCESO"),e.btnEnviarForm=!1,e.btnGuardarForm=!1,a.$broadcast("inicializarFechaOblitatorio",e.datos),$("#registro").modal("hide")):$.unblockUI()})}catch(e){console.log("*Error*"),$.unblockUI()}},e.btnCapcha=!0,e.ErrorCapcha="",e.crearTramiteAE=function(){""!=e.procesoSeleccionado&&e.adicionarServicioGamlp(10),href="#registro_ciudadano|servicios|index.html"},e.getCaptchasX=function(){e.valorrandom=Math.floor(223*Math.random()+1),
e.resultadoC="";var a=new captcha;a.obtcaptcha(function(a){json=JSON.parse(a),partes=json.success[0].sp_captcha_porx1.split(","),E=partes[0].substring(1),i1=partes[2]+","+partes[3],i2=partes[4]+","+partes[5],e.imageLNG=i1.substring(1,i1.length-1),e.imageCST=i2.substring(1,i2.length-2);var o="";"A"==partes[1]?o="AYMARA":"Q"==partes[1]?o="QUECHUA":"G"==partes[1]?o="GUARANI":"C"==partes[1]?o="CASTELLANO":console.log("error",partes[1]),e.toltipTt="Palabra en "+o,e.palabraT="Ingrese texto: "+o+" CASTELLANO"})},e.getCaptchasXX=function(){$("#resultadoCC").val(""),e.habGuardar1=!0,e.validarAdjuntos=!0,e.ErrorCapchasXX="",e.SuccesCapchasxx="",e.valorrandomm=Math.floor(223*Math.random()+1),e.resultadoCC="";var a=new captcha;a.obtcaptcha(function(a){json=JSON.parse(a),partes=json.success[0].sp_captcha_porx1.split(","),numero1=partes[0].substring(1),i1=partes[2]+","+partes[3],i2=partes[4]+","+partes[5],e.imageLNGG=i1.substring(1,i1.length-1),e.imageCSTT=i2.substring(1,i2.length-2);var o="";"A"==partes[1]?o="AYMARA":"Q"==partes[1]?o="QUECHUA":"G"==partes[1]?o="GUARANI":"C"==partes[1]?o="CASTELLANO":console.log("error",partes[1]),e.toltipTt="Palabra en "+o,e.palabraT="Ingrese texto: "+o+" CASTELLANO"})},e.lmpCaptcha=function(a){e.ErrorCapcha=""};var E=0;e.VerificarCapcha=function(a,o){e.habGuardar1=!0;var t=$("#resultadoC").val(),i=E,r=new captcha;r.identificador=i,r.respuesta=t,r.verificarCaptcha(function(t){json=JSON.parse(t),void 0==json.success[0]?(e.getCaptchasX(),e.ErrorCapcha="Error en el captcha intentar de nuevo por favor"):e.confirmarServicioGamlp(a,o)}),e.getCaptchasX()};var R=null;e.VerificarCapchaa=function(a){var o=$("#resultadoCC").val();0==o.length&&(e.ErrorCapchasXX=""),o.length>3&&(clearTimeout(R),R=setTimeout(O.bind(void 0,o),1500))},e.VerificarCapchaaViajes=function(a){e.serializarInfViajes(a),e.habilitarEnvioTramite(a)},e.$on("api:ready",function(){e.tramitesCiudadano(),e.recuperandoDatosInicialesCiudadano(),e.recuperandoDatosGenesis(),e.getCaptchasX(),e.getCaptchasXX(),e.catactividadDesarrollada()}),e.inicioServicios=function(){e.tramitesCiudadano(),e.recuperandoDatosInicialesCiudadano(),e.recuperandoDatosGenesis(),e.getCaptchasX(),e.getCaptchasXX(),e.catactividadDesarrollada()},e.getSeleccionaMunicipios=function(a){e.municipio=a},e.getProvinciasDepto=function(a){try{var o=a.split("-");e.depto=o[0];var t=new provinciaLst;t.idProv=o[0],t.obtprovincia(function(a){data=JSON.parse(a),e.obtDatos=data.success,"undefined"==e.municipio&&null==e.municipio||(e.getSeleccionaMunicipios(e.municipio),document.getElementById("TER_MIN").value=e.municipio)})}catch(e){console.log("Error : ",e)}},e.getProvincias=function(a){try{e.depto=a;var o=new provinciaLst;o.idProv=parseInt(e.depto),o.obtprovincia(function(a){data=JSON.parse(a),e.obtDatos=data.success,"undefined"==e.municipio&&null==e.municipio||(e.getSeleccionaMunicipios(e.municipio),document.getElementById("TER_MIN").value=e.municipio)})}catch(e){console.log("Error : ",e)}},e.startDateOpen1=function(a){a.preventDefault(),a.stopPropagation(),e.startDateOpened1=!0},e.startDateOpen2=function(a){a.preventDefault(),a.stopPropagation(),e.startDateOpened2=!0},e.habilitarEnvioTramite=function(a){if(""==a.TER_TIP_PERMISO||""==a.TER_MIN||""==a.TER_MOT||0==a.TER_NNA_VIAJAN.length||0==a.TER_RESP.length)e.btnEnviarFormPermisos=!0,swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud");else if("D"!=e.PERMISO)""==a.TER_SOLOS?(e.btnEnviarFormPermisos=!0,swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud")):e.btnEnviarFormPermisos=!1;else if(""==a.TER_NNA_DEL||""==a.TER_NOM_INST||""==a.TER_INST_DIR||""==a.TER_INST_TELF)e.btnEnviarFormPermisos=!0,swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud");else{swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud");var o=a.TER_NNA_VIAJAN.length,t=a.NNA_CANT_NN,i=a.NNA_NRO_ADO,r=a.NNA_CANT_TOTAL;o==t?e.btnEnviarFormPermisos=!1:(e.btnEnviarFormPermisos=!0,swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud"),o==i?e.btnEnviarFormPermisos=!1:(e.btnEnviarFormPermisos=!0,swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud"),o==r?e.btnEnviarFormPermisos=!1:(e.btnEnviarFormPermisos=!0,swal("Señor ciudadano","Complete los datos del formulario para enviar su solicitud"))))}},e.getListache=function(a){e.caras=a},e.mostrarHistorico=function(o){a.tramiteId=o.vtra_id,s.set("IDTRAMITE",o.vtra_id),s.set("IDSERVICIO",o.vdvser_id),s.set("ESTADO",o.venviado),e.recuperarSerializarInfo(o),e.template="",e.formulario="mostrar","SI"==o.venviado?(e.desabilitado=!0,e.template="",e.template=e.templates[5],e.btnEnviarFormPermisos=!0):(e.desabilitado=!1,e.template="",e.template=e.templates[5]);var t=document.getElementById("tipo_contribuyente");t&&(t.style.display="none")};var b=s.get("IDCIUDADANO");e.uploader=new m({url:d.APIURL+"?desripcion=ciudadano&&idCiudadano="+b});var F=e.uploader;F.filters.push({name:"customFilter",fn:function(e,a){return this.queue.length<10}}),F.onWhenAddingFileFailed=function(e,a,o){},F.onAfterAddingFile=function(a){tipoDocumento=a.file.type;var o=tipoDocumento.split("/");tipoDocumento=o[1];"png"==tipoDocumento||"jpg"==tipoDocumento||"jpeg"==tipoDocumento||"txt"==tipoDocumento||"plain"==tipoDocumento||"zip"==tipoDocumento||"rar"==tipoDocumento||"vnd.ms-word.document.12"==tipoDocumento||"vnd.openxmlformats-officedocument.spreadsheetml.sheet"==tipoDocumento||"vnd.visio"==tipoDocumento||"vnd.ms-publisher"==tipoDocumento||"msaccess"==tipoDocumento||"vnd.openxmlformats-officedocument.wordprocessingml.document"==tipoDocumento?(e.botonSubirOriginal=null,e.botonSubirError="oculta"):(e.botonSubirError=null,e.botonSubirOriginal="oculta")},e.falla=function(){swal("","Tipo de archivo incorrecto elimine porfavor","error"),e.desabilitado2=!0};F.onSuccessItem=function(o,t,i,r){e.direccionvirtual="RC_CLI";var _=d.APIURL+"/files/"+e.direccionvirtual+"/"+a.tramiteId+"/"+o._file.name+"?app_name=todoangular",s=o._file.name,n=o._file.size/1024/1024;n=n.toFixed(2),v=e.datos.ARCHIVOS_MULTIPLES?e.datos.ARCHIVOS_MULTIPLES:new Array;var c={nombre_archivo:s,tam_archivo:n,estado_archivo:"Env.",opcion_archivo:"-",url_archivo:_};v.push(c),e.adjuntosArray=v;var p=new Array;p.push(o._file),e.almacenarDocumentos(p),o.remove(),e.datos.ARCHIVOS_MULTIPLES=v,a.$broadcast("inicializarFechaOblitatorio",e.datos)};var D=a.$on("validarBtn",function(a,o){o.frm_tra_id&&e.tramitesCiudadano()});e.$on("$destroy",function(){D()}),e.eliminarMultipleAdjunto=function(o){e.datos.ARCHIVOS_MULTIPLES&&(e.adjuntosArray=e.datos.ARCHIVOS_MULTIPLES),e.adjuntosArray&&e.adjuntosArray.splice(o,1),a.$broadcast("inicializarFechaOblitatorio",e.datos)};a.$on("almacenarDocumentosInternet",function(a){var o=new Array;o.push(e.FILE_FOTOCOPIA_CI),e.almacenarDocumentos(o)});e.almacenarDocumentos=function(a){e.archivos=a,e.oidCiudadano=s.get("IDSOLICITANTE");var o=s.get("IDTRAMITE");e.direccionvirtual="RC_CLI/"+e.oidCiudadano;var t=d.APIURL+"/files/"+e.direccionvirtual+"/"+o+"/";angular.forEach(a,function(a,i){"undefined"!=typeof a&&(e.documentosarc[i]=d.APIURL+"/files/"+e.direccionvirtual+"/"+o+"/"+a.name+"?app_name=todoangular",A.uploadFileToUrl(a,t))})},e.bloquearForm=function(){e.desabilitado=!0},e.desBloquearForm=function(){e.desabilitado=!1},e.cambioServicio=function(a){e.servicio=a},e.combo="<select id='servicio' class='seleccionaServicio'>  <option value='1'>Internet</option> <option value='3'>Salud</option> <option value='4'>Publicidad</option> </select> <br>";try{$("body").removeClass("modal-open"),$(".modal-backdrop").remove()}catch(e){console.log("error",e)}}),app.directive("confirmButton",function(e,a){return{restrict:"A",link:function(o,t,i){var r,_,s,d,n,c;return r=Math.floor(1e10*Math.random()),i.buttonId=r,s=i.message||"Are you sure?",c=i.yes||"Yes",d=i.no||"No",n=i.title||"Crear nuevo tramite",_="<div style='width:190px;' id=\"button-"+r+'">\n '+o.combo+'<span class="confirmbutton-msg">'+s+"</span><br>\n   <button ng-disabled='frmServicio.$invalid' data-dismiss='modal' class=\"confirmbutton-yes btn btn-success\">"+c+'</button>\n    <button class="confirmbutton-no btn btn-danger">'+d+"</button> \n</div>",t.popover({content:_,html:!0,trigger:"manual",title:n}),t.bind("click",function(_){var s,d;s=!0,_.stopPropagation(),t.popover("show"),d=$("#button-"+r),d.closest(".popover").click(function(e){s&&e.stopPropagation()}),d.find(".seleccionaServicio").change(function(e){o.cambioServicio(servicio.value)}),d.find(".confirmbutton-yes").click(function(e){s=!1;var t=a(i.confirmButton);t(o)}),d.find(".confirmbutton-no").click(function(a){s=!1,e.off("click.confirmbutton."+r),t.popover("hide")}),e.on("click.confirmbutton."+r,":not(.popover, .popover *)",function(){e.off("click.confirmbutton."+r),t.popover("hide")})})}}});