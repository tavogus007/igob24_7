app.controller("serviciosObitoController",function(o,a,t,e,i,n,s,d,c,l,p,u,_,m,f,I,g,v,C){var b=new Date,A=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()+" "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();o.txtMsgConexionGen="",o.txtCiudadanoExiste="",a.looo="",a.laaa="",o.tablaTramites={},o.tramitesUsuario=[],o.servicio=9;s.get("US_IDROL");o.parentescos=0,o.templates=[{name:"template7.html",url:"../../../app/view/servicios/obito/index.html"}],o.serivicosInternet=[{name:"Solicitud de Certificado de Óbito",id:"9"}],o.seleccionarProceso=function(a){o.procesoSeleccionado=a.id,o.btnNuevoTramtite=!1},o.limpiarFormTramite=function(){o.procesoSeleccionado="",o.btnNuevoTramtite=!0,o.getCaptchasX()},o.seleccionarProceso=function(a){o.procesoSeleccionado=a.id,o.btnNuevoTramtite=!1},o.crearTramiteObito=function(){if(o.serivicosInternet){var a=o.serivicosInternet[0].id;o.adicionarServicioGamlp(a)}},o.loginPagoEnLinea=function(){var o=new gLogin;o.login(function(o){})},o.selParentesco=function(t){t=parseInt(t),a.parentescos=t,19==t?(a.archivoDivCI=!1,a.archivoDivOJ=!0):(a.archivoDivCI=!0,a.archivoDivOJ=!1,o.datos.FILE_FOTOCOPIA_CI||(o.datos.FILE_FOTOCOPIA_CI=o.datosIniciales.file_fotocopi_ci))},o.subirSesionFum=function(o){""!=a.email?(s.set("IDFUM",o),window.location.href="#servicios|epagos"):p.show("","En pago en línea es obligatorio el correo electrónico","error")},o.imprimirProforma=function(o){window.open("http://obito.lapaz.bo/wsProforma/proforma.asmx/obtenerProforma?idFum="+o,"_blank")},o.verConcepto=function(a){o.datosPago=JSON.parse(a.contenidofum),o.conceptoIdFum=o.datosPago[0].idFum,o.conceptoItemRecaudador=o.datosPago[0].idItemRecaudador,o.conceptoCabecera=o.datosPago[0].cabecera,o.conceptoFechaRegistro=o.datosPago[0].fechaRegistro,o.conceptoDescripcion=o.datosPago[0].descripcion,o.conceptoTotalGeneral=o.datosPago[0].AcctotalGeneral,o.conceptoTotalParcial=o.datosPago[0].AcctotalParcial,o.conceptoDetalle=o.datosPago[0].detalle,o.conceptoDetalleA=o.datosPago[0].detalleA,o.conceptoDetalleB=o.datosPago[0].detalleB,o.conceptoDetalleC=o.datosPago[0].detalleC,o.conceptoDetalleD=o.datosPago[0].detalleD,o.conceptoIdentificacion=o.datosPago[0].identificacion,o.conceptoNombre=o.datosPago[0].nombre},o.obtDatosFallecido=function(a){o.todo=JSON.parse(a.contenidofum),o.dtFallecidoNroProforma=a.vnroproforma,o.dtFallecidoNombre=o.todo[0].nombre+" "+o.todo[0].paterno+" "+o.todo[0].materno,o.dtFallecidoEdad=o.todo[0].edad,o.dtFallecidoEstado=o.todo[0].nestado_civil,o.dtFallecidoFecha=o.todo[0].nfechamuerte,o.dtFallecidoCausa=o.todo[0].ncausamuerte,o.dtFallecidoNacionalidad=o.todo[0].nnacionalidad,o.dtFallecidoCarpeta=o.todo[0].nlibro,o.dtFallecidoFolio=o.todo[0].nfolio},o.refrescar=function(){o.tramitesCiudadano()},o.mostrarimg=function(){if($.blockUI(),19==a.parentescos){var t="",e=o.datos.FILE_ORDEN_JUDICIAL.split(":");t=void 0!=e[1]?o.datos.FILE_ORDEN_JUDICIAL.substring(12):o.datos.FILE_ORDEN_JUDICIAL,o.archivoOrdenJ=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+t+"?app_name=todoangular"}else{var t="",e=o.datos.FILE_FOTOCOPIA_CI.split(":");t=void 0!=e[1]?o.datos.FILE_FOTOCOPIA_CI.substring(12):o.datos.FILE_FOTOCOPIA_CI,o.archivoCI=d.APIURL+"/files/RC_CLI/"+s.get("IDSOLICITANTE")+"/"+t+"?app_name=todoangular"}$.unblockUI()},o.limpiarFormTramite=function(){o.procesoSeleccionado="",o.btnNuevoTramtite=!0},o.template="";var O=new Array;o.recuperandoDatosInicialesCiudadano=function(){o.datosIniciales="";var t={},e=s.get("IDUSUARIO"),i=new rcNatural;if(i.oid=e,i.datosCiudadanoNatural(function(o){datos=JSON.parse(o)}),datos[0].dtspsl_ci)t.ci_bigdata=datos[0]._id,t.fec_solicitud=A,t.solicitante=datos[0].dtspsl_nombres+" "+datos[0].dtspsl_paterno+" "+datos[0].dtspsl_materno,t.nombres_t=datos[0].dtspsl_nombres,t.primer_apellido_t=datos[0].dtspsl_paterno,t.segundo_apellido_t=datos[0].dtspsl_materno,t.carnet_t=datos[0].dtspsl_ci,"LPZ"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="LP"),"CBB"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="CO"),"SCZ"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="SC"),"CHQ"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="CH"),"TJA"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="TA"),"PTS"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="PO"),"ORU"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="OR"),"BNI"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="BN"),"PND"==datos[0].dtspsl_expedido&&(t.ci_expedido_t="PA"),t.parentesco="",t.motivo="",t.titular_zona=datos[0].dtspsl_zona_desc,t.titular_nro=datos[0].dtspsl_numero_casa,t.tipo_via=datos[0].dtspsl_tipo_via,t.titular_via=datos[0].dtspsl_nombre_via,t.titular_fono=datos[0].dtspsl_telefono,t.titular_correo=datos[0].dtspsl_correo,a.email=datos[0].dtspsl_correo,t.nombre="",t.paterno="",t.materno="",t.apellido_casada="",t.ci_fallecido="",t.fecha1="",t.fecha2="",t.file_fotocopi_ci=datos[0].dtspsl_file_fotocopia_ci,o.datosIniciales=t;else if(datos[0].dtspsl_ci_representante){ci2=datos[0].dtspsl_ci_representante;var r=new rcNatural;r.ci=ci2,r.buscarNatural(function(o){datosJ=JSON.parse(o)}),t.ci_bigdata=datosJ[0]._id,t.fec_solicitud=A,t.solicitante=datosJ[0].dtspsl_nombres+" "+datosJ[0].dtspsl_paterno+" "+datosJ[0].dtspsl_materno,t.nombres_t=datosJ[0].dtspsl_nombres,t.primer_apellido_t=datosJ[0].dtspsl_paterno,t.segundo_apellido_t=datosJ[0].dtspsl_materno,t.carnet_t=datosJ[0].dtspsl_ci,"LPZ"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="LP"),"CBB"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="CO"),"SCZ"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="SC"),"CHQ"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="CH"),"TJA"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="TA"),"PTS"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="PO"),"ORU"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="OR"),"BNI"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="BN"),"PND"==datosJ[0].dtspsl_expedido&&(t.ci_expedido_t="PA"),t.parentesco="",t.motivo="",t.titular_zona=datosJ[0].dtspsl_zona_desc,t.titular_nro=datosJ[0].dtspsl_numero_casa,t.tipo_via=datosJ[0].dtspsl_tipo_via,t.titular_via=datosJ[0].dtspsl_nombre_via,t.titular_fono=datosJ[0].dtspsl_telefono,t.titular_correo=datosJ[0].dtspsl_correo,t.nombre="",t.paterno="",t.materno="",t.apellido_casada="",t.ci_fallecido="",t.fecha1="",t.fecha2="",t.FILE_FOTOCOPIA_CI="",o.datosIniciales=t}else p.show("","error en identificador de ciudadano","error")},o.actualizarFumsPagados=function(a,t){var e={idfum:t},i=s.get("TOKEN"),r='Bearer <\\"'+i+'\\">';$.ajax({async:!0,type:"POST",url:"https://pagonline.lapaz.bo/api/comprobante",data:e,dataType:"json",crossDomain:!0,headers:{"cache-control":"no-cache"},headers:{authorization:r},success:function(t){try{t.Resultado[0].idFum&&o.actualizarDatos(a,JSON.stringify(t.Resultado[0]))}catch(o){}}})},o.actualizarDatos=function(o,a){var t=new reglasnegocio;t.identificador="RCCIUDADANO_274",t.parametros='{"tramite_id":"'+o+'", "fum":"'+a+'"}',t.llamarregla(function(o){o=JSON.parse(o),"[]"==o||"[{}]"==o||"[{ }]"==o||" "==o||""==o?p.show("","No existen datos","warning"):console.log(o)})},o.tramitesCiudadano=function(){sIdCiudadano=s.get("IDSOLICITANTE");var a=new reglasnegocio;a.identificador="RCCIUDADANO_133",a.parametros='{"sidciudadano":"'+sIdCiudadano+'"}',a.llamarregla(function(a){if(a=JSON.parse(a),"[]"==a||"[{}]"==a||"[{ }]"==a||" "==a||""==a)p.show("","No existen datos","warning");else{angular.forEach(a,function(t,e){var i,r;t.form_contenido&&(a[e].datos=t.form_contenido),i=t.vnroproforma,r=t.vtra_id,i&&o.actualizarFumsPagados(r,i)}),o.tramitesUsuario=a;o.tablaTramites.reload()}})},o.tablaTramites=new u({page:1,count:4,filter:{},sorting:{vtra_id:"desc"}},{total:o.tramitesUsuario.length,getData:function(a,t){var e=t.filter()?_("filter")(o.tramitesUsuario,t.filter()):o.tramitesUsuario,i=t.sorting()?_("orderBy")(e,t.orderBy()):o.tramitesUsuario;t.total(o.tramitesUsuario.length),a.resolve(i.slice((t.page()-1)*t.count(),t.page()*t.count()))}}),o.tramitesObservaciones=function(a,t){o.observaciones="mostrar";var e=s.get("IDSOLICITANTE"),i=new reglasnegocio;i.identificador="RCCIUDADANO_65",i.parametros='{"sidciudadano":"'+e+'"}',i.llamarregla(function(a){if(a=JSON.parse(a),"[]"==a||"[{}]"==a||"[{ }]"==a||" "==a||""==a)p.show("","No existen datos","warning");else{o.noticias=a;o.tablaNoticias=new u({page:1,count:4,filter:{},sorting:{}},{total:o.noticias.length,getData:function(a,t){var e=t.filter()?_("filter")(o.noticias,t.filter()):o.noticias,i=t.sorting()?_("orderBy")(e,t.orderBy()):o.noticias;t.total(i.length),a.resolve(i.slice((t.page()-1)*t.count(),t.page()*t.count()))}})}})},o.iniciandoDatos=function(){var t=o.datosIniciales,e=v.obtenerFechaActual();o.datos={};var i={};i.ci_bigdata=t.ci_bigdata,i.fec_solicitud=e,i.solicitante=t.solicitante,i.nombres_t=t.nombres_t,i.primer_apellido_t=t.primer_apellido_t,i.segundo_apellido_t=t.segundo_apellido_t,i.carnet_t=t.carnet_t,i.ci_expedido_t=t.ci_expedido_t,i.parentesco=t.parentesco,i.motivo=t.motivo,i.titular_zona=t.titular_zona,i.titular_nro=t.titular_nro,i.tipo_via=t.tipo_via,i.titular_via=t.titular_via,i.titular_fono=t.titular_fono,i.titular_correo=t.titular_correo,a.email=t.titular_correo,i.nombre=t.nombre,i.paterno=t.paterno,i.materno=t.materno,i.apellido_casada=t.apellido_casada,i.ci_fallecido=t.ci_fallecido,i.fecha1=t.fecha1,i.fecha2=t.fecha2,o.datos=i,t.titular_zona?o.validacionDireccion=!1:(o.validacionDireccion=!0,p.show("Complete información","Datos de dirección son obligatorios debe completar la información de su cuenta","error"))},o.recuperarSerializarInfo=function(t){var e=t.vtra_id,i=s.get("IDSOLICITANTE"),n=s.get("IDSERVICIO");if(i){var d=new reglasnegocio;d.identificador="RCCIUDADANO_275",d.parametros='{"sidciudadano":"'+i+'","sidservicio":"'+n+'","sidtramite":"'+e+'"}',d.llamarregla(function(i){i=JSON.parse(i),"[]"==i||"[{}]"==i||"[{ }]"==i||" "==i||""==i?p.show("","No existen datos","warning"):angular.forEach(i,function(o,a){o.form_contenido&&(r=o.form_contenido)}),1==i.length?(datos=JSON.parse(i[0].form_contenido),o.adjuntosArray=datos.ARCHIVOS_MULTIPLES,o.datos=datos,o.datos.titular_correo=datos.titular_correo.replace("<x>",""),o.publicid=[],o.publicid=o.datos.publicidad,a.looo=o.datos.INT_AC_latitud,a.laaa=o.datos.INT_AC_longitud,o.selParentesco(o.datos.parentesco),o.nroRegistros=datos.length,o.$apply()):(a.archivoDivCI=!1,a.archivoDivOJ=!1,o.nroRegistros=0,o.datos="",o.adjuntosArray="",o.iniciandoDatos(),s.set("IDTRAMITE",e),o.$apply()),"SI"==t.venviado?(o.btnGuardarForm=!0,o.desabilitado=!0,o.botones=null,o.cibloq=null):null!=t.vnroproforma?(o.desabilitado=!0,o.botones=null,o.$apply()):(o.btnGuardarForm=!1,o.desabilitado=!1,o.botones="mostrar",o.cibloq="mostrar",o.$apply()),a.$broadcast("validarBtnEnviar",i.length),a.$broadcast("inicializarCamposInternet",o.datos),a.$broadcast("inicializarGrillaAE",[{datos:o.datos,venviado:t.venviado}]),a.$broadcast("inicializarFechaOblitatorio",o.datos)})}else alert("NO existe id ciudadano")},o.bloquearBtnEnviarForm=function(){o.botones=null},o.almacenarGDocumental=function(o,a){var t="",e="",i=o.name,r={};r.doc_sistema="RC_CLI",r.doc_proceso="ADJUNTO",r.doc_ci_nodo="DMS",r.doc_datos=t,r.doc_version="1",r.doc_tiempo="0",r.doc_firma_digital=0,r.doc_acceso="",r.doc_tipo_documento="pdf",r.doc_tamanio_documento="0",r.doc_tps_doc_id="1",r.doc_tipo_documentacion="U",r.doc_tipo_ingreso="I",r.doc_estado_de_envio="N",r.doc_correlativo="",r.doc_tipo_documento_ext="",r.doc_nrotramite_nexo="",r.doc_id_carpeta="",r.doc_registro=A,r.doc_modificacion=A,r.doc_usuario=s.get("USUARIO"),r.doc_estado="A",r.doc_url=a,r.doc_url_logica=e,r.doc_nombre=i},o.almacenarDocumentos=function(t){var e=s.get("IDSOLICITANTE");o.direccionvirtual="RC_CLI";var i=d.APIURL+"/files/"+o.direccionvirtual+"/"+e+"/";t[0]&&(t[0].size<=3145728?(g.uploadFileToUrl(t,i),19==a.parentescos?o.datos.FILE_ORDEN_JUDICIAL=t[0].name:o.datos.FILE_FOTOCOPIA_CI=t[0].name,o.Advertencia1="ok"):(p.show("Advertencia","El tamaño de la imagen CEDULA DE IDENTIDAD es muy grande","error"),o.Advertencia1="advertencia",t[0].name="",document.getElementById("FILE_FOTOCOPIA_CI").value="",document.getElementById("FILE_ORDEN_JUDICIAL").value="")),angular.forEach(t,function(o,a){"undefined"!=typeof o?g.uploadFileToUrl(o,i):console.log("error en el archivo")})},o.serializarInformacionViajes=function(t){var e=(v.obtenerFechaActual(),new Array);e.push(o.FILE_FOTOCOPIA_CI),e.push(o.FILE_FACTURA_SERVICIO),e.push(o.FILE_CROQUIS_AMBIENTE),e.push(o.FILE_CERTIFICADO_PENAL);var i=t,r=s.get("IDSOLICITANTE"),n=s.get("IDTRAMITE"),d=s.get("IDSERVICIO"),c=new reglasnegocio;c.identificador="RCCIUDADANO_80",c.parametros='{"id_servicio":"'+d+'","data_json":"'+i+'","oid_ciudadano":"'+r+'","id_usuario":1,"id_trm_form":"'+n+'"}',o.btnGuardarForm=!0,$.blockUI(),c.llamarregla(function(t){t.length>0?($.unblockUI(),o.btnEnviarForm=!1,o.btnGuardarForm=!1,a.$broadcast("inicializarFechaOblitatorio",o.datos),p.show("","Formulario almacenado","success")):($.unblockUI(),p.show("","Formulario no almacenado","error"))})},o.cambiarFile=function(t,e){$.blockUI(),setTimeout(function(){var t=new Array;19==a.parentescos?(o.FILE_ORDEN_JUDICIAL=o.FILE_ORDEN_JUDICIAL,document.getElementById("FILE_ORDEN_JUDICIAL").value=e,t.push(o.FILE_ORDEN_JUDICIAL)):(o.FILE_FOTOCOPIA_CI=o.FILE_FOTOCOPIA_CI,document.getElementById("FILE_FOTOCOPIA_CI").value=e,t.push(o.FILE_FOTOCOPIA_CI));d.APIURL+"/files/RC_CLI/"+s.get("IDCIUDADANO")+"/";o.almacenarDocumentos(t),$.unblockUI()},1e3)},o.serializarInformacion=function(t){var e=(v.obtenerFechaActual(),new Array);t.solicitante="undefined"==typeof t.solicitante||null==t.solicitante?"":t.solicitante.toUpperCase(),t.nombres_t="undefined"==typeof t.nombres_t||null==t.nombres_t?"":t.nombres_t.toUpperCase(),t.primer_apellido_t="undefined"==typeof t.primer_apellido_t||null==t.primer_apellido_t?"":t.primer_apellido_t.toUpperCase(),t.segundo_apellido_t="undefined"==typeof t.segundo_apellido_t||null==t.segundo_apellido_t?"":t.segundo_apellido_t.toUpperCase(),t.titular_zona="undefined"==typeof t.titular_zona||null==t.titular_zona?"":t.titular_zona.toUpperCase(),t.titular_via="undefined"==typeof t.titular_via||null==t.titular_via?"":t.titular_via.toUpperCase(),t.nombre="undefined"==typeof t.nombre||null==t.nombre?"":t.nombre.toUpperCase(),t.paterno="undefined"==typeof t.paterno||null==t.paterno?"":t.paterno.toUpperCase(),t.materno="undefined"==typeof t.materno||null==t.materno?"":t.materno.toUpperCase(),t.apellido_casada="undefined"==typeof t.apellido_casada||null==t.apellido_casada?"":t.apellido_casada.toUpperCase(),t.idTramite=s.get("IDTRAMITE"),19==a.parentescos?e.push(o.FILE_ORDEN_JUDICIAL):e.push(o.FILE_FOTOCOPIA_CI),o.almacenarDocumentos(e);var i=JSON.stringify(t),n=i.replace(/"/g,"\\$&"),d=s.get("IDSOLICITANTE"),c=s.get("IDTRAMITE"),l=s.get("IDSERVICIO"),u=new reglasnegocio;u.identificador="RCCIUDADANO_80",u.parametros='{"id_servicio":"'+l+'","data_json":"'+n+'","oid_ciudadano":"'+d+'","id_usuario":1,"id_trm_form":"'+c+'"}',o.btnGuardarForm=!0,$.blockUI(),u.llamarregla(function(t){r=JSON.parse(t),r.error?($.unblockUI(),p.show("","Formulario no almacenado","error")):($.unblockUI(),o.btnEnviarForm=!1,o.btnGuardarForm=!1,a.$broadcast("inicializarFechaOblitatorio",o.datos),p.show("","Formulario almacenado","success"))})},o.enviarInformacion=function(a){var t=s.get("IDTRAMITE");idUsuario=s.get("IDUSUARIO");var e=new reglasnegocio;e.identificador="RCCIUDADANO_160",e.parametros='{"id":"'+t+'",frm_tra_enviado":"SI","frm_tra_id_usuario":"'+idUsuario+'","frm_tra_modificado":"'+A+'"}',e.llamarregla(function(a){p.show("","Formulario enviado al G.A.M.L.P.","success"),o.tramitesCiudadano(),o.desabilitado=!0,o.desabilitado="disabled"})},o.adicionarServicioGamlp=function(a){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),i=a,r=s.get("IDSOLICITANTE"),n=e,d=3,c=new reglasnegocio;c.identificador="RCCIUDADANO_68",c.parametros='{"frm_tra_dvser_id":"'+i+'","frm_tra_id_ciudadano":"'+r+'","frm_tra_fecha":"'+n+'","frm_tra_enviado":"NO","frm_tra_id_usuario":"'+d+'"}',c.llamarregla(function(a){$.blockUI(),o.tramitesCiudadano(),$.unblockUI(),p.show("","Registro almacenado correctamente","success"),$("#registro").modal("hide"),o.getCaptchasX()})},o.confirmarServicioGamlp=function(a){""!=o.procesoSeleccionado&&o.adicionarServicioGamlp(o.procesoSeleccionado)},a.TipoAutorizacion1=function(a){if("1-F"==a)var t="../catastro/img/caso1.png";if("2-F"==a)var t="../catastro/img/caso2.png";if("3-F"==a)var t="../catastro/img/caso3.png";if("4-F"==a)var t="../catastro/img/caso4.png";if("5-D"==a)var t="../catastro/img/caso5.png";o.ooooo=t},o.ErrorCapcha="",o.getlimpiareRROR=function(){o.ErrorCapcha=""},o.getCaptchasX=function(){var a=new captcha;a.obtcaptcha(function(a){json=JSON.parse(a),partes=json.success[0].sp_captcha_porx1.split(","),numero=partes[0].substring(1),i1=partes[2]+","+partes[3],i2=partes[4]+","+partes[5],o.imageLNG=i1.substring(1,i1.length-1),o.imageCST=i2.substring(1,i2.length-2);var t="";"A"==partes[1]?t="AYMARA":"Q"==partes[1]?t="QUECHUA":"G"==partes[1]?t="GUARANI":"C"==partes[1]?t="CASTELLANO":console.log("error",partes[1]),o.toltipTt="Palabra en "+t,o.palabraT="Ingrese texto: "+t+" CASTELLANO"})},o.getCaptchasXX=function(){var a=new captcha;a.obtcaptcha(function(a){json=JSON.parse(a),partes=json.success[0].sp_captcha_porx1.split(","),numero=partes[0].substring(1),i1=partes[2]+","+partes[3],i2=partes[4]+","+partes[5];var t="";"A"==partes[1]?t="AYMARA":"Q"==partes[1]?t="QUECHUA":"G"==partes[1]?t="GUARANI":"C"==partes[1]?t="CASTELLANO":console.log("error",partes[1]),null!=document.getElementById("imageLNG")?(document.getElementById("imageLNG").src=i1.substring(1,i1.length-1),document.getElementById("imageCST").src=i2.substring(1,i2.length-2),document.getElementById("palabraT").value="Ingrese texto: "+t+" CASTELLANO"):(o.imageLNG=i1.substring(1,i1.length-1),o.imageCST=i2.substring(1,i2.length-2)),o.toltipTt="Palabra en "+t,o.palabraT="Ingrese texto: "+t+" CASTELLANO"})},o.VerificarCapcha=function(a){var t=$("#resultadoC").val(),e=numero,i=new captcha;i.identificador=e,i.respuesta=t,i.verificarCaptcha(function(t){json=JSON.parse(t),void 0==json.success[0]?(o.getCaptchasX(),document.getElementById("resultadoCC").value="",o.ErrorCapcha="Error en el captcha intentar de nuevo por favor"):(o.confirmarServicioGamlp(a),o.ErrorCapcha="")})},o.VerificarCapchaa=function(a){var t=$("#resultadoCC").val(),e=numero,i=new captcha;i.identificador=e,i.respuesta=t,i.verificarCaptcha(function(t){json=JSON.parse(t),void 0==json.success[0]?(o.getCaptchasXX(),o.ErrorCapcha="Error en el captcha intentar de nuevo por favor"):(o.serializarInformacion(a),o.ErrorCapcha="")})},o.$on("api:ready",function(){o.loginPagoEnLinea(),o.tramitesCiudadano(),o.recuperandoDatosInicialesCiudadano(),o.getCaptchasX()}),o.inicioServicios=function(){o.loginPagoEnLinea(),o.tramitesCiudadano(),o.recuperandoDatosInicialesCiudadano(),o.getCaptchasX()},o.recuperarSerializarInfomacion=function(t){setTimeout(function(){var e=t.vtra_id,i=s.get("IDSOLICITANTE"),r=s.get("IDSERVICIO");if(i){var n=new reglasnegocio;n.identificador="RCCIUDADANO_39",n.parametros='{"sidciudadano":"'+i+'","sidservicio":"'+r+'","sidtramite":"'+e+'"}',n.llamarregla(function(i){if(i=JSON.parse(i),"[]"==i||"[{}]"==i||"[{}]"==i||" "==i||""==i)p.show("","No existen datos","warning");else{if(i.length>0){var r=JSON.parse(i[0].form_contenido);o.publicid=[],o.publicid=o.datos.publicidad,a.looo=o.datos.INT_AC_latitud,a.laaa=o.datos.INT_AC_longitud,o.nroRegistros=r.length}else o.nroRegistros=0,o.datos="",o.adjuntosArray="",o.iniciandoDatos(),s.set("IDTRAMITE",e);"SI"==t.venviado?(o.btnGuardarForm=!0,o.desabilitado=!0,o.botones=null,o.cibloq=null):(o.btnGuardarForm=!1,o.desabilitado=!1,o.botones="mostrar",o.cibloq="mostrar"),a.$broadcast("validarBtnEnviar",i.length),a.$broadcast("inicializarCamposInternet",o.datos),a.$broadcast("inicializarGrillaAE",[{datos:o.datos,venviado:t.venviado}]),a.$broadcast("inicializarFechaOblitatorio",o.datos)}})}else alert("NO existe id ciudadano")},1e3)},o.formTipoPermiso=function(a){"1-F"==a&&(o.PERMISO="F"),"2-F"==a&&(o.PERMISO="F"),"3-F"==a&&(o.PERMISO="F"),"4-F"==a&&(o.PERMISO="F"),"5-D"==a&&(o.PERMISO="D"),o.TER_TIP_PERMISO=a},o.formTipoSolicitud=function(a){o.TER_TIP_SOL=a},o.formSolos=function(a){o.TER_SOLOS=a},o.formAutoriza=function(a){o.TER_2_PROG=a},o.formViajan=function(a){o.TER_NNA_DEL=a,o.datos.NNA_CANT_MAS=0,o.datos.NNA_CAN_FEM=0,o.datos.NNA_CANT_NN=0,o.datos.NNA_CAN_MAS=0,o.datos.NNA_CAN_FEM=0,o.datos.NNA_NRO_ADO=0,o.datos.NNA_CANT_TOTAL=0},o.getSeleccionaMunicipios=function(a){o.municipio=a},o.getProvinciasDepto=function(a){var t=a.split("-");o.depto=t[0];var e=new reglasnegocio;e.identificador="RCCIUDADANO_30",e.parametros='{"prv_dpto_codigo":"'+t[0]+'"}',e.llamarregla(function(a){a=JSON.parse(a),"[]"==results||"[{}]"==results||"[{ }]"==results||" "==results||""==results?p.show("","No existen datos","warning"):(o.obtDatos=a,"undefined"==o.municipio&&null==o.municipio||setTimeout(function(){o.getSeleccionaMunicipios(o.municipio),document.getElementById("TER_MIN").value=o.municipio},1e3))})},o.seleccionarTramite=function(t){o.getCaptchasXX(),null!=document.getElementById("resultadoCC")&&(document.getElementById("resultadoCC").value="",$("#alert").hide()),a.tramiteId=t.vtra_id,s.set("IDTRAMITE",t.vtra_id),s.set("IDSERVICIO",t.vdvser_id),s.set("ESTADO",t.venviado),o.template="",o.formulario="mostrar",o.template=o.templates[0],"VIAJES"==t.vservicio?o.recuperarInfomacionViajes(t):o.recuperarSerializarInfo(t),o.tramiteSeleccionado=t.vtra_id;var e=document.getElementById("tipo_contribuyente");e&&(e.style.display="none")},o.getListache=function(a){o.caras=a},o.imprSelec=function(o){var a=document.getElementById(o),t=window.open(" ","popimpr");t.document.write(a.innerHTML),t.document.close(),t.print(),t.close()},o.mostrarHistorico=function(t){a.tramiteId=t.vtra_id,s.set("IDTRAMITE",t.vtra_id),s.set("IDSERVICIO",t.vdvser_id),s.set("ESTADO",t.venviado),o.recuperarSerializarInfo(t),o.template="",o.formulario="mostrar","SI"==t.venviado?(o.desabilitado=!0,o.template="",o.template=o.templates[5]):(o.desabilitado=!1,o.template="",o.template=o.templates[5]);var e=document.getElementById("tipo_contribuyente");e&&(e.style.display="none")};var D=s.get("IDCIUDADANO");o.uploader=new I({url:d.APIURL+"?desripcion=ciudadano&&idCiudadano="+D});var h=o.uploader;h.filters.push({name:"customFilter",fn:function(o,a){return this.queue.length<10}}),h.onWhenAddingFileFailed=function(o,a,t){},h.onAfterAddingFile=function(a){tipoDocumento=a.file.type;var t=tipoDocumento.split("/");tipoDocumento=t[1];"png"==tipoDocumento||"jpg"==tipoDocumento||"jpeg"==tipoDocumento||"txt"==tipoDocumento||"plain"==tipoDocumento||"zip"==tipoDocumento||"rar"==tipoDocumento||"vnd.ms-word.document.12"==tipoDocumento||"vnd.openxmlformats-officedocument.spreadsheetml.sheet"==tipoDocumento||"vnd.visio"==tipoDocumento||"vnd.ms-publisher"==tipoDocumento||"msaccess"==tipoDocumento||"vnd.openxmlformats-officedocument.wordprocessingml.document"==tipoDocumento?(o.botonSubirOriginal=null,o.botonSubirError="oculta"):(o.botonSubirError=null,o.botonSubirOriginal="oculta")},o.falla=function(){p.show("","Tipo de archivo incorrecto elimine porfavor","error"),o.desabilitado2=!0};h.onSuccessItem=function(t,e,i,r){o.direccionvirtual="RC_CLI";var n=d.APIURL+"/files/"+o.direccionvirtual+"/"+a.tramiteId+"/"+t._file.name+"?app_name=todoangular",s=t._file.name,c=t._file.size/1024/1024;c=c.toFixed(2),O=o.datos.ARCHIVOS_MULTIPLES?o.datos.ARCHIVOS_MULTIPLES:new Array;var l={nombre_archivo:s,tam_archivo:c,estado_archivo:"Env.",opcion_archivo:"-",url_archivo:n};O.push(l),o.adjuntosArray=O;var p=new Array;p.push(t._file),o.almacenarDocumentos(p),t.remove(),o.datos.ARCHIVOS_MULTIPLES=O,a.$broadcast("inicializarFechaOblitatorio",o.datos)};var E=a.$on("validarBtn",function(a,t){t.frm_tra_id&&o.tramitesCiudadano()});o.$on("$destroy",function(){E()}),o.eliminarMultipleAdjunto=function(t){o.datos.ARCHIVOS_MULTIPLES&&(o.adjuntosArray=o.datos.ARCHIVOS_MULTIPLES),o.adjuntosArray&&o.adjuntosArray.splice(t,1),a.$broadcast("inicializarFechaOblitatorio",o.datos)},o.bloquearForm=function(){o.desabilitado=!0},o.desBloquearForm=function(){o.desabilitado=!1},o.cambioServicio=function(a){o.servicio=a},o.combo="<select id='servicio' class='seleccionaServicio'>  <option value='1'>Internet</option> <option value='3'>Salud</option> <option value='4'>Publicidad</option> </select> <br>";try{$("body").removeClass("modal-open"),$(".modal-backdrop").remove()}catch(o){console.log("error",o)}}),app.directive("confirmButton",function(o,a){return{restrict:"A",link:function(t,e,i){var r,n,s,d,c,l;return r=Math.floor(1e10*Math.random()),i.buttonId=r,s=i.message||"Are you sure?",l=i.yes||"Yes",d=i.no||"No",c=i.title||"Crear nuevo tramite",n="<div style='width:190px;' id=\"button-"+r+'">\n '+t.combo+'<span class="confirmbutton-msg">'+s+"</span><br>\n   <button ng-disabled='frmServicio.$invalid' data-dismiss='modal' class=\"confirmbutton-yes btn btn-success\">"+l+'</button>\n    <button class="confirmbutton-no btn btn-danger">'+d+"</button> \n</div>",e.popover({content:n,html:!0,trigger:"manual",title:c}),e.bind("click",function(n){var s,d;s=!0,n.stopPropagation(),e.popover("show"),d=$("#button-"+r),d.closest(".popover").click(function(o){s&&o.stopPropagation()}),d.find(".seleccionaServicio").change(function(o){t.cambioServicio(servicio.value)}),d.find(".confirmbutton-yes").click(function(o){s=!1;var e=a(i.confirmButton);e(t)}),d.find(".confirmbutton-no").click(function(a){s=!1,o.off("click.confirmbutton."+r),e.popover("hide")}),o.on("click.confirmbutton."+r,":not(.popover, .popover *)",function(){o.off("click.confirmbutton."+r),e.popover("hide")})})}}});