app.controller("serviciosSemdesController",function(e,_,t,o,a,l,d,A,n,i,N,r,s,c,E,R,T,I,u,m){function f(e){dpc_sDatos_inspector=new Array,dpc_k=0,dpc_sDatos_inspector[dpc_k]=new Array("-- Seleccione --","-1"),dpc_k+=1,$.each(e,function(e,_){dpc_sDatos_inspector[dpc_k]=new Array(_.dato,_.valor),dpc_k+=1})}function C(e){for(dpc_i=0,$("#"+e).empty(),dpc_i=0;dpc_i<dpc_sDatos_inspector.length;dpc_i++)dpc_miClave=dpc_sDatos_inspector[dpc_i][0],dpc_miValor=dpc_sDatos_inspector[dpc_i][1],$("#"+e).append("<option value="+dpc_miValor+">"+dpc_miClave+"</option>")}e.imageCST="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAIAAADtz9qMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAbSURBVBhXY3growJHIM5/GIBy0GWgHCiSUQEAe00iZYBvZ5oAAAAASUVORK5CYII=",e.imageLNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAIAAADtz9qMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAbSURBVBhXY3growJHIM5/GIBy0GWgHCiSUQEAe00iZYBvZ5oAAAAASUVORK5CYII=";var p=new Date,D=(A.get("CICIUDADANO").toString(),p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate()+" "+p.getHours()+":"+p.getMinutes()+":"+p.getSeconds()),O=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate(),v=0,U=0,L=0,G=0,g=0,S=0;e.txtMsgConexionGen="",e.txtCiudadanoExiste="",t.looo="",t.laaa="",e.mostrarMsgActividadTrue=!1,e.mostrarMsgActividadFalse=!1,e.tablaTramites={},e.tramitesUsuario=[],e.servicio=1,e.datosGuardados=!1;A.get("US_IDROL");e.templates=[{name:"template0.html",url:"../../../app/index.html"},{name:"template1.html",url:"../../../app/view/servicios/internet/index.html"},{name:"template2.html",url:"../../../app/index.html"},{name:"template3.html",url:"../../../app/view/registro_ciudadano/regMedico/index.html"},{name:"template4.html",url:"../../../app/view/servicios/publicidad/index.html"},{name:"template5.html",url:"../../../app/view/servicios/historial/index.html"},{name:"template6.html",url:"../../../app/view/servicios/internet/index_2.html"},{name:"template7.html",url:"../../../app/view/servicios/semdes/solicitud_viaje2.html"}],e.cargarZonasCiudadano=function(_,t){try{var o=new zonaLstM;o.idMacro=_,o.obtzonaM(function(_){_=JSON.parse(_),e.zonas=_.success,setTimeout(function(){e.$apply(function(){e.model.selected.f01_NNA_TER_ZONA_valor=t})},2e3),$.unblockUI()})}catch(e){console.log("Error al cargar zona ciudadano!",e),$.unblockUI()}},e.contadorNna=function(_){e.model.selected=angular.copy(_),e.comp=_,angular.forEach(e.comp,function(e,_,t,o,a,l){})},e.cargarZonasCiudadanoA=function(_,t){try{var o=new zonaLstM;o.idMacro=_,o.obtzonaM(function(_){_=JSON.parse(_),e.zonas=_.success,setTimeout(function(){e.$apply(function(){e.modelResp.selectedR.f01_ADUL_TER_ZONA_valor=t})},2e3),$.unblockUI()})}catch(e){console.log("Error al cargar zona ciudadano A!",e),$.unblockUI()}},e.cargarZonas=function(_){try{var t=document.getElementById("f01_NNA_TER_MACRO_valor"),o=t.options[t.selectedIndex].text;e.model.selected.f01_NNA_TER_MACRO=o;var a=new zonaLstM;a.idMacro=_,a.obtzonaM(function(_){_=JSON.parse(_),e.zonas=_.success,$.unblockUI()})}catch(e){console.log("Error al cargar Zonas!",e),$.unblockUI()}},e.zonaValor=function(_){var t=document.getElementById("f01_NNA_TER_ZONA_valor"),o=t.options[t.selectedIndex].text;e.model.selected.f01_NNA_TER_ZONA=o},e.cargarZonasA=function(_){try{var t=document.getElementById("f01_ADUL_TER_MACRO_valor"),o=t.options[t.selectedIndex].text;e.modelResp.selectedR.f01_ADUL_TER_MACRO=o;var a=new zonaLstM;a.idMacro=_,a.obtzonaM(function(_){_=JSON.parse(_),e.zonas=_.success,$.unblockUI()})}catch(e){console.log("Error al cargar Zonas A!",e),$.unblockUI()}},e.zonaValorA=function(_){var t=document.getElementById("f01_ADUL_TER_ZONA_valor"),o=t.options[t.selectedIndex].text;e.modelResp.selectedR.f01_ADUL_TER_ZONA=o},e.mostrarServicios=function(){},e.serivicosInternet=[{name:"Verificación de Documentos para Autorización de Viaje",id:"7"}],e.crearTramiteSemdes=function(){if(e.serivicosInternet){var _=e.serivicosInternet[0].id;e.adicionarServicioGamlp(_)}v=0,U=0,L=0,G=0,g=0,S=0,href="#registro_ciudadano|servicios|index2.html"},e.seleccionarProceso=function(_){e.procesoSeleccionado=_.id,e.btnNuevoTramtite=!1},e.limpiarFormTramite=function(){e.procesoSeleccionado="",e.btnNuevoTramtite=!0},e.template="";var M=new Array;e.recuperandoDatosInicialesCiudadano=function(){e.datosIniciales="";var _={},t=A.get("IDUSUARIO"),o="",a=new rcNatural;a.oid=t,a.datosCiudadanoNatural(function(t){if(resultadoApi=JSON.parse(t),datos=resultadoApi,o=resultadoApi[0].dtspsl_tipo_persona,e.sTipoPersona=resultadoApi[0].dtspsl_tipo_persona,e.ci_anv=resultadoApi[0].dtspsl_file_fotocopia_ci,e.ci_rev=resultadoApi[0].dtspsl_file_fotocopia_ci_r,D=p.getFullYear()+"/"+p.getMonth()+"/"+p.getDate(),"NATURAL"==o?(_.INT_SOLICITANTE=datos[0].dtspsl_nombres+" "+datos[0].dtspsl_paterno+" "+datos[0].dtspsl_materno,_.INT_TIPO_DOC_IDENTIDAD="CI",_.INT_NUM_DOC=datos[0].dtspsl_ci,_.INT_EXP=datos[0].dtspsl_expedido,_.INT_CORREO=datos[0].dtspsl_correo,_.INT_TEL_CELULAR=datos[0].dtspsl_movil,_.INT_TEL=datos[0].dtspsl_telefono,_.INT_FEC_SOLICITUD=D,_.CI_BIGDATA=datos[0]._id,_.INT_PRIMER_NOMBRE=datos[0].dtspsl_nombres,_.INT_PATERNO=datos[0].dtspsl_paterno,_.INT_MATERNO=datos[0].dtspsl_materno,_.INT_FEC_NACIMIENTO=datos[0].dtspsl_fec_nacimiento,_.INT_MACRODISTRITO=datos[0].dtspsl_macrodistrito,_.INT_DISTRITO=datos[0].dtspsl_distrito,_.INT_NUMERO_DOMICILIO="",_.INT_TIPO_VIA="",_.INT_OCUPACION=datos[0].dtspsl_ocupacion,_.INT_DIRECCION=datos[0].dtspsl_direccion,_.TIPO="AE_INT_EMISION",_.INT_DENOMINACION=datos[0].INT_DENOMINACION,_.INT_AC_SUPERFICIE="",_.INT_AC_HR_INICIO="",_.INT_AC_HR_FINAL="",_.INT_AC_ESTADO="",_.INT_AC_MACRO="",_.INT_AC_ZONA="",_.INT_AC_TIP_VIA="",_.INT_AC_NOMBRE_VIA="",_.INT_AC_NUMERO="",_.INT_AC_EDIFICIO="",_.INT_AC_BLOQUE="",_.INT_AC_PISO="",_.INT_AC_NUME="",_.INT_AC_TEL="",_.INT_AC_COR="",_.INT_AC_MACRO_ID="",_.INT_TIPO_CONTRIBUYENTE=datos[0].dtspsl_tipo_persona,_.INT_MACRO=datos[0].dtspsl_macrodistrito,_.INT_ZONA=datos[0].dtspsl_zona,_.INT_VIA=datos[0].dtspsl_tipo_via,_.INT_NOMBRE_VIA=datos[0].dtspsl_nombre_via,_.INT_NUM=datos[0].dtspsl_numero_casa,_.INT_EDIF=datos[0].dtspsl_edificio,_.INT_BLOQUE=datos[0].dtspsl_bloque,_.INT_PISO=datos[0].dtspsl_piso,_.INT_NUM_DEP=datos[0].dtspsl_oficina,_.INT_DIR_DET=datos[0].dtspsl_direccion,_.INT_TIP_VIA="",_.INT_NACIONALIDAD="BOLIVIANA"):(_.INT_TIPO_DOC_IDENTIDAD="NIT",_.INT_NUM_DOC=datos[0].dtspsl_ci_representante,_.INT_EXP=datos[0].dtspsl_expedido,_.INT_CORREO=datos[0].dtspsl_correo,_.INT_TEL_CELULAR=datos[0].dtspsl_movil,_.INT_TEL=datos[0].dtspsl_telefono,_.INT_FEC_SOLICITUD=D,_.CI_BIGDATA=datos[0]._id,_.INT_FEC_NACIMIENTO=datos[0].dtspsl_fec_nacimiento,_.TIPO="AE_INT_EMISION",_.INT_DENOMINACION=datos[0].INT_DENOMINACION,_.INT_AC_SUPERFICIE="",_.INT_AC_HR_INICIO="",_.INT_AC_HR_FINAL="",_.INT_AC_ESTADO="",_.INT_AC_MACRO="",_.INT_AC_ZONA="",_.INT_AC_TIP_VIA="",_.INT_AC_NOMBRE_VIA="",_.INT_AC_NUMERO="",_.INT_AC_EDIFICIO="",_.INT_AC_BLOQUE="",_.INT_AC_PISO="",_.INT_AC_NUME="",_.INT_AC_NUME="",_.INT_AC_TEL="",_.INT_AC_COR="",_.INT_AC_MACRO_ID="",_.INT_RL_NIT=datos[0].dtspsl_nit,_.INT_RL_RAZON_SOCIAL=datos[0].dtspsl_razon_social,_.INT_RL_TIPO_DOCUMENTO="",_.INT_RL_NUM_DOCUMENTO="",_.INT_TIPO_CONTRIBUYENTE=datos[0].dtspsl_tipo_persona,_.INT_RL_FEC_EMISION_DOCUMENTO="2016-03-2016",_.INT_NUM_NOTARIA=datos[0].dtspsl_nro_notaria,_.INT_NACIONALIDAD="BOLIVIANA",_.INT_RL_FEC_NACIMIENTO=datos[0].dtspsl_fec_nacimiento,_.INT_NIT=datos[0].dtspsl_nit),null!=datos[0].dtspsl_ci_representante){var a='{"dtspsl_ci":"'+datos[0].dtspsl_ci_representante+'","dtspsl_estado":"ACTIVO"}',l=new reglasnegocio;l.identificador="MONGO_RC_LAPAZ_179",l.parametros=a,l.llamarregla(function(e){var t=JSON.parse(e),t=results1.record,o="undefined"==typeof t.dtspsl_nombres?"":t.dtspsl_nombres,a="undefined"==typeof t.dtspsl_paterno?"":t.dtspsl_paterno,l="undefined"==typeof t.dtspsl_materno?"":t.dtspsl_materno;_.INT_SOLICITANTE=o+" "+a+" "+l,_.INT_RL_PRIMER_NOMBRE="undefined"==typeof t.dtspsl_nombres?"":t.dtspsl_nombres,_.INT_RL_PATERNO="undefined"==typeof t.dtspsl_paterno?"":t.dtspsl_paterno,_.INT_RL_MATERNO="undefined"==typeof t.dtspsl_materno?"":t.dtspsl_materno,_.INT_MACRO="undefined"==typeof t.dtspsl_macrodistrito?"":t.dtspsl_macrodistrito,_.INT_ZONA="undefined"==typeof t.dtspsl_zona?"":t.dtspsl_zona,_.INT_VIA="undefined"==typeof t.dtspsl_tipo_via?"":t.dtspsl_tipo_via,_.INT_NOMBRE_VIA="undefined"==typeof t.dtspsl_nombre_via?"":t.dtspsl_nombre_via,_.INT_NUM="undefined"==typeof t.dtspsl_numero_casa?"":t.dtspsl_numero_casa,_.INT_EDIF="undefined"==typeof t.dtspsl_edificio?"":t.dtspsl_edificio,_.INT_BLOQUE="undefined"==typeof t.dtspsl_bloque?"":t.dtspsl_bloque,_.INT_PISO="undefined"==typeof t.dtspsl_piso?"":t.dtspsl_piso,_.INT_NUM_DEP="undefined"==typeof t.dtspsl_oficina?"":t.dtspsl_oficina,_.INT_DIR_DET="undefined"==typeof t.dtspsl_direccion?"":t.dtspsl_direccion,_.INT_TIP_VIA=""})}datos[0].dtspsl_expedido||(_.INT_EXP="LPZ"),e.datosIniciales=_})},e.recuperandoDatosGenesis=function(){var _=A.get("TIPO_PERSONA"),t="",o="",a="";"NATURAL"==_?(t=A.get("CICIUDADANO"),a="C01"):"JURIDICO"==_&&(o=A.get("NITCIUDADANO"),a="C02");var l={procedure_name:"GENERAL.spDatosContribuyente",body:{params:[{name:"idContribuyente",param_type:"IN",value:""},{name:"clase",param_type:"IN",value:""},{name:"padron",param_type:"IN",value:""},{name:"identificacion",param_type:"IN",value:t},{name:"primerNombre",param_type:"IN",value:""},{name:"primerApellido",param_type:"IN",value:""},{name:"segundoApellido",param_type:"IN",value:""},{name:"nit",param_type:"IN",value:o},{name:"empresa",param_type:"IN",value:""},{name:"p_accion",param_type:"IN",value:a}]}};try{var d=DreamFactory.api[n.SERVICEGENESIS].callStoredProcWithParams(l);d.success(function(_){e.txtMsgConexionGen="",_.length>0?e.dataGenesisCidadano=_:e.dataGenesisCidadano={}}),d.error(function(_){e.txtMsgConexionGen="Se ha producido un problema de conexion al cargar los datos"})}catch(_){e.txtMsgConexionGen="Se ha producido un problema de conexion al cargar los datos"}},e.tramitesCiudadano=function(){sIdCiudadano=A.get("IDSOLICITANTE");var _=new reglasnegocio;_.identificador="RCCIUDADANO_79",_.parametros='{"sidciudadano":"'+sIdCiudadano+'"}',_.llamarregla(function(_){_=JSON.parse(_),e.tramites=_,angular.forEach(_,function(e,t){e.form_contenido&&(_[t].datos=e.form_contenido)}),e.tramitesUsuario=_,e.tablaTramites.reload()})},e.tablaTramites=new s({page:1,count:4,filter:{},sorting:{vtra_id:"desc"}},{total:e.tramitesUsuario.length,getData:function(_,t){var o=t.filter()?c("filter")(e.tramitesUsuario,t.filter()):e.tramitesUsuario,a=t.sorting()?c("orderBy")(o,t.orderBy()):e.tramitesUsuario;t.total(e.tramitesUsuario.length),_.resolve(a.slice((t.page()-1)*t.count(),t.page()*t.count()))}}),e.iniciandoDatos=function(){var _=e.datosIniciales,t=u.obtenerFechaActual();e.datos={};var o={};o.CI_BIGDATA=_.CI_BIGDATA,o.INT_FEC_SOLICITUD=t,o.INT_SOLICITANTE=_.INT_SOLICITANTE,o.INT_TIPO_DOC_IDENTIDAD=_.INT_TIPO_DOC_IDENTIDAD,o.INT_NUM_DOC=_.INT_NUM_DOC,o.INT_EXP=_.INT_EXP,o.INT_CORREO=_.INT_CORREO,o.INT_TEL_CELULAR=_.INT_TEL_CELULAR,o.INT_TEL=_.INT_TEL,o.INT_FEC_NACIMIENTO=_.INT_FEC_NACIMIENTO,o.INT_MATERNO=_.INT_MATERNO,o.INT_PATERNO=_.INT_PATERNO,o.INT_PRIMER_NOMBRE=_.INT_PRIMER_NOMBRE,o.INT_RL_NIT=_.INT_RL_NIT,o.INT_RL_RAZON_SOCIAL=_.INT_RL_RAZON_SOCIAL,o.INT_RL_TIPO_DOCUMENTO="",o.INT_RL_NUM_DOCUMENTO="",o.INT_TIPO_CONTRIBUYENTE=_.INT_TIPO_CONTRIBUYENTE,o.INT_RL_PRIMER_NOMBRE=_.INT_RL_PRIMER_NOMBRE,o.INT_RL_PATERNO=_.INT_RL_PATERNO,o.INT_RL_MATERNO=_.INT_RL_MATERNO,o.INT_MACRO=_.INT_MACRO,o.INT_ZONA=_.INT_ZONA,o.INT_VIA=_.INT_VIA,o.INT_NOMBRE_VIA=_.INT_NOMBRE_VIA,o.INT_NUM=_.INT_NUM,o.INT_EDIF=_.INT_EDIF,o.INT_BLOQUE=_.INT_BLOQUE,o.INT_PISO=_.INT_PISO,o.INT_NUM_DEP=_.INT_NUM_DEP,o.INT_DIR_DET=_.INT_DIR_DET,o.INT_RL_FEC_EMISION_DOCUMENTO=_.INT_RL_FEC_EMISION_DOCUMENTO,o.INT_NUM_NOTARIA=_.INT_NUM_NOTARIA,o.INT_NACIONALIDAD=_.INT_NACIONALIDAD,o.INT_RL_FEC_NACIMIENTO=_.INT_RL_FEC_NACIMIENTO,o.INT_NIT=_.INT_NIT,o.INT_TIP_VIA=_.INT_TIP_VIA,e.datos=o,e.ninosviajan=o,e.ninosviajanA=o},e.bloquearBtnEnviarForm=function(){e.botones=null},e.almacenarGDocumental=function(e,_){var t="",o="",a=e.name,l={};l.doc_sistema="RC_CLI",l.doc_proceso="ADJUNTO",l.doc_ci_nodo="DMS",l.doc_datos=t,l.doc_version="1",l.doc_tiempo="0",l.doc_firma_digital=0,l.doc_acceso="",l.doc_tipo_documento="pdf",l.doc_tamanio_documento="0",l.doc_tps_doc_id="1",l.doc_tipo_documentacion="U",l.doc_tipo_ingreso="I",l.doc_estado_de_envio="N",l.doc_correlativo="",l.doc_tipo_documento_ext="",l.doc_nrotramite_nexo="",l.doc_id_carpeta="",l.doc_registro=D,l.doc_modificacion=D,l.doc_usuario=A.get("USUARIO"),l.doc_estado="A",l.doc_url=_,l.doc_url_logica=o,l.doc_nombre=a},e.almacenarDocumentos=function(_){var o=t.tramiteId;e.direccionvirtual="RC_CLI";var a=n.APIURL+"/files/"+e.direccionvirtual+"/"+o+"/";angular.forEach(_,function(_,t){if("undefined"!=typeof _){var l=n.APIURL+"/files/"+e.direccionvirtual+"/"+o+"/"+_.name+"?app_name=todoangular";I.uploadFileToUrl(_,a),e.almacenarGDocumental(_,l)}else console.log("Error en el archivo")})},e.adicionarServicioGamlp=function(_){var t=new Date,o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),a=_,l=A.get("IDSOLICITANTE"),d=o,n=3,i=new reglasnegocio;i.identificador="RCCIUDADANO_68",i.parametros='{"frm_tra_dvser_id":"'+a+'","frm_tra_id_ciudadano":"'+l+'","frm_tra_fecha":"'+d+'","frm_tra_enviado":"NO","frm_tra_id_usuario":"'+n+'"}',i.llamarregla(function(_){$.blockUI(),e.tramitesCiudadano(),r.show("","Registro almacenado correctamente","success"),$("#registro").modal("hide"),e.getCaptchasX()})},e.serializarInformacionViajes=function(_){var o=(u.obtenerFechaActual(),new Array);o.push(e.FILE_FOTOCOPIA_CI),o.push(e.FILE_FACTURA_SERVICIO),o.push(e.FILE_CROQUIS_AMBIENTE),o.push(e.FILE_CERTIFICADO_PENAL);try{var a=JSON.stringify(_),l=A.get("IDSOLICITANTE"),d=A.get("IDTRAMITE"),n=A.get("IDSERVICIO"),i=new datosFormularios;i.frm_tra_dvser_id=n,i.data_json=a,i.frm_tra_id_ciudadano=l,i.frm_tra_id_usuario=1,i.frm_idTramite=d,t.btnGuardarForm=!0,$.blockUI(),i.sp_crear_datos_formulario(function(_){_=JSON.parse(_),_=_.success,_.length>0?($.unblockUI(),t.btnGuardarForm=!1,t.$broadcast("inicializarFechaOblitatorio",e.datos)):($.unblockUI(),r.show("","Formulario no almacenado","error"))})}catch(e){console.log("Error al serializar la informacion de Viajes",e),$.unblockUI()}},e.serializarInformacion=function(_){var o=u.obtenerFechaActual(),a=new Array;_.INT_AC_NOMBRE_VIA="undefined"==typeof _.INT_AC_NOMBRE_VIA||null==_.INT_AC_NOMBRE_VIA?"":_.INT_AC_NOMBRE_VIA.toUpperCase(),_.INT_DENOMINACION="undefined"==typeof _.INT_DENOMINACION||null==_.INT_DENOMINACION?"":_.INT_DENOMINACION.toUpperCase(),_.INT_AC_EDIFICIO="undefined"==typeof _.INT_AC_EDIFICIO||null==_.INT_AC_EDIFICIO?"":_.INT_AC_EDIFICIO.toUpperCase(),_.INT_AC_NUMERO="undefined"==typeof _.INT_AC_NUMERO||null==_.INT_AC_NUMERO?"":_.INT_AC_NUMERO.toUpperCase(),_.INT_AC_BLOQUE="undefined"==typeof _.INT_AC_BLOQUE||null==_.INT_AC_BLOQUE?"":_.INT_AC_BLOQUE.toUpperCase(),_.INT_AC_PISO="undefined"==typeof _.INT_AC_PISO||null==_.INT_AC_PISO?"":_.INT_AC_PISO.toUpperCase(),_.INT_AC_NUME="undefined"==typeof _.INT_AC_NUME||null==_.INT_AC_NUME?"":_.INT_AC_NUME.toUpperCase(),_.INT_FEC_SOLICITUD="undefined"==typeof _.INT_FEC_SOLICITUD||null==_.INT_FEC_SOLICITUD?"":o,_.INT_DIR_DET="undefined"==typeof _.INT_DIR_DET||null==_.INT_DIR_DET?"":_.INT_DIR_DET.toUpperCase(),a.push(e.FILE_FOTOCOPIA_CI),a.push(e.FILE_FACTURA_SERVICIO),a.push(e.FILE_CROQUIS_AMBIENTE),a.push(e.FILE_CERTIFICADO_PENAL),e.almacenarDocumentos(a);try{$.blockUI();var l=JSON.stringify(_),d=A.get("IDSOLICITANTE"),n=A.get("IDTRAMITE"),i=A.get("IDSERVICIO"),N=new datosFormularios;N.frm_tra_dvser_id=i,N.data_json=l,N.frm_tra_id_ciudadano=d,N.frm_tra_id_usuario=1,N.frm_idTramite=n,t.btnGuardarForm=!0,N.sp_crear_datos_formulario(function(_){_=JSON.parse(_),_=_.success,_.length>0?($.unblockUI(),t.btnGuardarForm=!1,t.$broadcast("inicializarFechaOblitatorio",e.datos)):($.unblockUI(),r.show("","Formulario no almacenado","error"))})}catch(e){console.log("Error al serializar la informacion",e),$.unblockUI()}},e.confirmarServicioGamlp=function(_){""!=e.procesoSeleccionado&&e.adicionarServicioGamlp(e.procesoSeleccionado)},t.TipoAutorizacion1=function(_){if("1-F"==_)var t="../catastro/img/caso1.png";if("2-F"==_)var t="../catastro/img/caso2.png";if("3-F"==_)var t="../catastro/img/caso3.png";if("4-F"==_)var t="../catastro/img/caso4.png";if("5-D"==_)var t="../catastro/img/caso5.png";e.ooooo=t},e.$on("api:ready",function(){e.tramitesCiudadano(),e.recuperandoDatosInicialesCiudadano(),e.recuperandoDatosGenesis()}),e.inicioServicios=function(){e.tramitesCiudadano(),e.recuperandoDatosInicialesCiudadano(),e.recuperandoDatosGenesis()},e.validarFecha=function(_,t){fecNacimiento=_,fecNacimiento.getDate()<10?dia="0"+fecNacimiento.getDate():dia=fecNacimiento.getDate(),mes=fecNacimiento.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fecNacimiento1=fecNacimiento.getFullYear()+"-"+mes+"-"+dia,e.c=moment(fecNacimiento1,"YYYY-MM-DD"),e.d=moment(O,"YYYY-MM-DD"),e.c<=e.d||(r.show("","La fecha nacimiento debe ser menor a la fecha actual","error"),e.model.selected.f01_NNA_G_FEC_NAC="",e.modelResp.selectedR.f01_ADUL_G_FEC_NAC="");var o=parseInt((e.d-e.c)/365/24/60/60/1e3);17==t&&o>=18&&(r.show("NO CORRESPONDE","El ciudadano es mayor de edad","error"),e.model.selected.f01_NNA_G_FEC_NAC=""),18==t&&o<18&&(r.show("NO CORRESPONDE","El ciudadano es menor de edad","error"),e.modelResp.selectedR.f01_ADUL_G_FEC_NAC="")},e.validarFechaMenor=function(_){fecNacimiento=_,fecNacimiento.getDate()<10?dia="0"+fecNacimiento.getDate():dia=fecNacimiento.getDate(),mes=fecNacimiento.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fecNacimiento1=fecNacimiento.getFullYear()+"-"+mes+"-"+dia,e.e=moment(fecNacimiento1,"YYYY-MM-DD"),e.r=moment(O,"YYYY-MM-DD"),e.e>=e.r||(r.show("","La fecha de Caducidad debe ser mayor a la fecha actual","error"),e.model.selected.f01_NNA_F_CADUC_CI="",e.modelResp.selectedR.f01_ADUL_F_CADUC_CI="")},e.verMacrodistrito=function(e,_){if(""===e)switch(_){case"1":macroNuevo="MACRODISTRITO COTAHUMA";break;case"2":macroNuevo="MACRODISTRITO MAXILIANO PAREDES";break;case"3":macroNuevo="MACRODISTRITO PERIFÉRICA";break;case"4":macroNuevo="MACRODISTRITO SAN ANTONIO";break;case"5":macroNuevo="MACRODISTRITO SUR";break;case"6":macroNuevo="MACRODISTRITO MALLASA";break;case"7":macroNuevo="MACRODISTRITO CENTRO";break;case"8":macroNuevo="MACRODISTRITO HAMPATURI";break;case"9":macroNuevo="MACRODISTRITO ZONGO";break;case"10":macroNuevo="OTRO"}else macroNuevo=e;return macroNuevo},e.consultaRC_CI=function(_,o,a,l,d,A){if("CI"==A&&1==d){e.textCambio="0";var i=new rcNatural;i.tipo_persona="NATURAL",i.ci=o,i.buscarPersona(function(_){if(results=JSON.parse(_),results.length>0){var o="undefined"==typeof results[0].dtspsl_expedido?"":results[0].dtspsl_expedido,d="undefined"==typeof results[0].dtspsl_nombres?"":results[0].dtspsl_nombres,A="undefined"==typeof results[0].dtspsl_paterno?"":results[0].dtspsl_paterno,i="undefined"==typeof results[0].dtspsl_materno?"":results[0].dtspsl_materno;fec12345679=new Date(results[0].dtspsl_fec_nacimiento),fec12345679.getDate()<10?dia="0"+fec12345679.getDate():dia=fec12345679.getDate(),mes=fec12345679.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaNacOficial=fec12345679.getFullYear()+"-"+mes+"-"+dia;var N="undefined"==typeof results[0].dtspsl_fec_nacimiento?"":fechaNacOficial,s="undefined"==typeof results[0].dtspsl_direccion?"":results[0].dtspsl_direccion,c="undefined"==typeof results[0].dtspsl_telefono?"":results[0].dtspsl_telefono,E="undefined"==typeof results[0].dtspsl_movil?"":results[0].dtspsl_movil;fec987654321=new Date(results[0].dtspsl_fec_vencimiento),fec987654321.getDate()<10?dia="0"+fec987654321.getDate():dia=fec987654321.getDate(),mes=fec987654321.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaCadOficial=fec987654321.getFullYear()+"-"+mes+"-"+dia;var R="undefined"==typeof results[0].dtspsl_fec_vencimiento?"":fechaCadOficial,T="undefined"==typeof results[0].dtspsl_departamento?"":results[0].dtspsl_departamento,I="undefined"==typeof results[0].dtspsl_sexo?"":results[0].dtspsl_sexo,u="undefined"==typeof results[0].dtspsl_macrodistrito?"":results[0].dtspsl_macrodistrito,m=e.verMacrodistrito(results[0].dtspsl_macrodistrito_desc,u),f="undefined"==typeof results[0].dtspsl_zona?"":results[0].dtspsl_zona,C="undefined"==typeof results[0].dtspsl_lugar_nacimiento?"":results[0].dtspsl_lugar_nacimiento,p="undefined"==typeof results[0].dtspsl_zona_desc?"":results[0].dtspsl_zona_desc,D=("undefined"==typeof results[0].dtspsl_distrito_desc?"":results[0].dtspsl_distrito_desc,"undefined"==typeof results[0].dtspsl_file_fotocopia_ci?"":results[0].dtspsl_file_fotocopia_ci),v="undefined"==typeof results[0].dtspsl_file_fotocopia_ci_r?"":results[0].dtspsl_file_fotocopia_ci_r;switch(t.OIDtemp="undefined"==typeof results[0]._id?"":results[0]._id,u=void 0==u?" ":u.toString(),a){case"1":1==l?e.datos.TER_TESTIGO=d.trim()+" "+A.trim()+" "+i.trim():2==l&&(e.datos.TER_TESTIGO1=d.trim()+" "+A.trim()+" "+i.trim());break;case"2":1==l?e.datos.TER_TESTIGO=d.trim()+" "+A.trim()+" "+i.trim():2==l?e.datos.TER_GARANTE=d.trim()+" "+A.trim()+" "+i.trim():3==l&&(e.datos.TER_GARANTE1=d.trim()+" "+A.trim()+" "+i.trim());break;case"3":1==l?e.datos.TER_TUTOR=d.trim()+" "+A.trim()+" "+i.trim():2==l?e.datos.TER_GARANTE=d.trim()+" "+A.trim()+" "+i.trim():3==l&&(e.datos.TER_GARANTE1=d.trim()+" "+A.trim()+" "+i.trim());break;case"99":e.datos.G_NNA_NOM=d.trim(),e.datos.G_NNA_PAT=A.trim(),e.datos.G_NNA_MAT=i.trim(),e.opcion99=!0;break;case"100":fecNacimiento=new Date(results[0].dtspsl_fec_nacimiento),fecNacimiento.getDate()<10?dia="0"+fecNacimiento.getDate():dia=fecNacimiento.getDate(),mes=fecNacimiento.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fecNacimiento1=fecNacimiento.getFullYear()+"-"+mes+"-"+dia,e.c=moment(fecNacimiento1,"YYYY-MM-DD"),e.d=moment(O,"YYYY-MM-DD");var U=parseInt((e.d-e.c)/365/24/60/60/1e3);U>=18?(e.modelResp.selectedR.f01_ADUL_EXP_CIUD=o.trim(),e.modelResp.selectedR.f01_ADUL_G_NOM=d.trim(),e.modelResp.selectedR.f01_ADUL_G_APAT=A.trim(),e.modelResp.selectedR.f01_ADUL_G_AMAT=i.trim(),e.modelResp.selectedR.f01_ADUL_G_FEC_NAC=N.trim(),e.modelResp.selectedR.f01_ADUL_LUG_NAC=C.trim(),e.modelResp.selectedR.f01_ADUL_G_GEN=I.trim(),e.modelResp.selectedR.f01_ADUL_TER_CIUD=T.trim(),e.modelResp.selectedR.f01_ADUL_TER_MACRO=m.trim(),e.cargarZonasCiudadanoA(u.trim(),f.trim()),e.modelResp.selectedR.f01_ADUL_TER_MACRO_valor=u.trim(),e.modelResp.selectedR.f01_ADUL_TER_ZONA=p.trim(),e.modelResp.selectedR.f01_ADUL_DIR=s.trim(),e.modelResp.selectedR.f01_ADUL_TER_TEL=c.trim(),e.modelResp.selectedR.f01_ADUL_G_TELF=E.trim(),e.modelResp.selectedR.f01_ADUL_F_CADUC_CI=R.trim(),e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH=e.direccionvirtual+D+"?app_name=todoangular",e.archiFileCIAnversoA=e.direccionvirtual+D+"?app_name=todoangular",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH=e.direccionvirtual+v+"?app_name=todoangular",e.archiFileCIReversoA=e.direccionvirtual+v+"?app_name=todoangular",e.modelResp.selectedR.f01_ADUL_O_ADJ_G_ARCH_CN="0",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH_DNI="0",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH_DNI="0",e.archiFileOtroA="0",e.archiFileDNIAnversoA="0",e.archiFileDNIAReversoA="0"):(r.show("NO CORRESPONDE","El ciudadano es menor de edad","error"),e.model.selected.f01_NNA_G_FEC_NAC="",e.modelResp.selectedR.f01_ADUL_G_CI="",e.modelResp.selectedR.f01_ADUL_EXP_CIUD="",e.modelResp.selectedR.f01_ADUL_G_NOM="",e.modelResp.selectedR.f01_ADUL_G_APAT="",e.modelResp.selectedR.f01_ADUL_G_AMAT="",e.modelResp.selectedR.f01_ADUL_LUG_NAC="",e.modelResp.selectedR.f01_ADUL_G_GEN="",e.modelResp.selectedR.f01_ADUL_TER_CIUD="",e.modelResp.selectedR.f01_ADUL_TER_MACRO="",e.modelResp.selectedR.f01_ADUL_TER_MACRO_valor="",e.modelResp.selectedR.f01_ADUL_TER_ZONA="",e.modelResp.selectedR.f01_ADUL_DIR="",e.modelResp.selectedR.f01_ADUL_TER_TEL="",e.modelResp.selectedR.f01_ADUL_G_TELF="",e.modelResp.selectedR.f01_ADUL_F_CADUC_CI="",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH="0",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH="0",e.modelResp.selectedR.f01_ADUL_O_ADJ_G_ARCH_CN="0",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH_DNI="0",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH_DNI="0");break;case"101":fecNacimiento=new Date(results[0].dtspsl_fec_nacimiento),fecNacimiento.getDate()<10?dia="0"+fecNacimiento.getDate():dia=fecNacimiento.getDate(),mes=fecNacimiento.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fecNacimiento1=fecNacimiento.getFullYear()+"-"+mes+"-"+dia,e.c=moment(fecNacimiento1,"YYYY-MM-DD"),e.d=moment(O,"YYYY-MM-DD");var U=parseInt((e.d-e.c)/365/24/60/60/1e3);U<18?(e.model.selected.f01_NNA_EXP_CIUD=o.trim(),e.model.selected.f01_NNA_G_NOM=d.trim(),e.model.selected.f01_NNA_G_APAT=A.trim(),e.model.selected.f01_NNA_G_AMAT=i.trim(),e.model.selected.f01_NNA_G_FEC_NAC=N.trim(),e.model.selected.f01_NNA_G_LUG_NAC=C.trim(),e.model.selected.f01_NNA_G_GEN=I.trim(),e.model.selected.f01_NNA_TER_MACRO=m.trim(),e.cargarZonasCiudadano(u.trim(),f.trim()),e.model.selected.f01_NNA_TER_MACRO_valor=u.trim(),e.model.selected.f01_NNA_TER_ZONA=p.trim(),e.model.selected.f01_NNA_DIR=s.trim(),e.model.selected.f01_NNA_TER_TEL=c.trim(),e.model.selected.f01_NNA_G_TELF=E.trim(),e.model.selected.f01_NNA_F_CADUC_CI=R.trim(),e.model.selected.f01_NNA_G_CIUD=T.trim(),e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/",e.model.selected.f01_NNA_ANVERSO_G_ARCH=e.direccionvirtual+D+"?app_name=todoangular",e.archiFileCIAnverso=e.direccionvirtual+D+"?app_name=todoangular",e.model.selected.f01_NNA_REVERSO_G_ARCH=e.direccionvirtual+v+"?app_name=todoangular",e.archiFileCIReverso=e.direccionvirtual+v+"?app_name=todoangular",e.model.selected.f01_NNA_O_ADJ_G_ARCH_CN="0",e.archiFileOtro="0",e.model.selected.f01_NNA_ANVERSO_G_ARCH_DNI="0",e.archiFileDNIAnverso="0",e.model.selected.f01_NNA_REVERSO_G_ARCH_DNI="0",e.archiFileDNIReverso="0"):(r.show("NO CORRESPONDE","El ciudadano es mayor de edad","error"),e.model.selected.f01_NNA_G_CI="",e.model.selected.f01_NNA_G_FEC_NAC="",e.model.selected.f01_NNA_EXP_CIUD="",e.model.selected.f01_NNA_G_NOM="",e.model.selected.f01_NNA_G_APAT="",e.model.selected.f01_NNA_G_AMAT="",e.model.selected.f01_NNA_G_LUG_NAC="",e.model.selected.f01_NNA_G_GEN="",e.model.selected.f01_NNA_TER_MACRO="",e.model.selected.f01_NNA_TER_MACRO_valor="",e.model.selected.f01_NNA_TER_ZONA="",e.model.selected.f01_NNA_DIR="",e.model.selected.f01_NNA_TER_TEL="",e.model.selected.f01_NNA_G_TELF="",e.model.selected.f01_NNA_F_CADUC_CI="",e.model.selected.f01_NNA_G_CIUD="",e.model.selected.f01_NNA_ANVERSO_G_ARCH="0",e.model.selected.f01_NNA_REVERSO_G_ARCH="0",e.model.selected.f01_NNA_O_ADJ_G_ARCH_CN="0",e.model.selected.f01_NNA_ANVERSO_G_ARCH_DNI="0",e.model.selected.f01_NNA_REVERSO_G_ARCH_DNI="0")}}else switch(r.show("","El carnet no se encuentra registrado","warning"),a){case"1":1==l?e.datos.TER_TESTIGO="":2==l&&(e.datos.TER_TESTIGO1="");break;case"2":1==l?e.datos.TER_TESTIGO="":2==l?e.datos.TER_GARANTE="":3==l&&(e.datos.TER_GARANTE1="");break;case"3":1==l?e.datos.TER_TUTOR="":2==l?e.datos.TER_GARANTE="":3==l&&(e.datos.TER_GARANTE1="");break;case"99":e.datos.G_NNA_NOM="",e.datos.G_NNA_PAT="",e.datos.G_NNA_MAT="",e.opcion99=!1;break;case"100":document.getElementById("f01_ADUL_G_NOM").value="",document.getElementById("f01_ADUL_G_APAT").value="",document.getElementById("f01_ADUL_G_AMAT").value="",document.getElementById("f01_ADUL_DIR").value="",document.getElementById("f01_ADUL_TER_TEL").value="",document.getElementById("f01_ADUL_G_TELF").value="",document.getElementById("f01_ADUL_F_CADUC_CI").value="";break;case"101":document.getElementById("f01_NNA_G_NOM").value="",document.getElementById("f01_NNA_G_APAT").value="",document.getElementById("f01_NNA_G_AMAT").value="",document.getElementById("f01_NNA_DIR").value="",document.getElementById("f01_NNA_TER_TEL").value="",document.getElementById("f01_NNA_G_TELF").value="",document.getElementById("f01_NNA_F_CADUC_CI").value=""}$.unblockUI()})}},e.imagenElige=function(){var e=n.APIURLIF+"/files/IF/genericas/no_disponible.jpg";e.substring(0,62);e==n.APIURLIF+"/files/IF/genericas/no_disponible.jpg"},e.recuperarSerializarInfomacion=function(_){setTimeout(function(){var o=_.vtra_id,a=A.get("IDSOLICITANTE"),l=A.get("IDSERVICIO");if(a){var d='{"sidciudadano":"'+a+'","sidservicio":"'+l+'","sidtramite":"'+o+'"}',n=new reglasnegocio;n.identificador="RCCIUDADANO_39",n.parametros=d,n.llamarregla(function(a){if(a.length>0){var l=JSON.parse(a),d=JSON.parse(l[0].form_contenido);e.publicid=[],e.publicid=e.datos.publicidad,t.looo=e.datos.INT_AC_latitud,t.laaa=e.datos.INT_AC_longitud,e.nroRegistros=d.length}else e.nroRegistros=0,e.datos="",e.adjuntosArray="",e.iniciandoDatos(),A.set("IDTRAMITE",o);"SI"==_.venviado?(t.btnGuardarForm=!0,t.desabilitado=!0,e.desabilitado=!0,t.botones=null):(t.btnGuardarForm=!1,t.desabilitado=!1,e.desabilitado=!1,t.botones="mostrar"),t.$broadcast("validarBtnEnviar",a.length),t.$broadcast("inicializarCamposInternet",e.datos),t.$broadcast("inicializarGrillaAE",[{datos:e.datos,venviado:_.venviado}]),t.$broadcast("inicializarFechaOblitatorio",e.datos)}).error(function(e){console.log("Error al recuperar y serializar la infomacion",e)})}else r.show("","No existe el Id del Ciudadano","error")},1e3)},e.formTipoPermiso=function(_){"1-F"==_&&(e.PERMISO="F"),"2-F"==_&&(e.PERMISO="F"),"3-F"==_&&(e.PERMISO="F"),"4-F"==_&&(e.PERMISO="F"),"5-D"==_&&(e.PERMISO="D"),e.TER_TIP_PERMISO=_},e.formTipoSolicitud=function(_){e.TER_TIP_SOL=_},e.formSolos=function(_){e.TER_SOLOS=_},e.formAutoriza=function(_){e.TER_2_PROG=_},e.formViajan=function(_){e.TER_NNA_DEL=_,e.datos.NNA_CANT_MAS=0,e.datos.NNA_CANT_FEM=0,e.datos.NNA_CANT_NN=0,e.datos.NNA_CAN_MAS=0,e.datos.NNA_CAN_FEM=0,e.datos.NNA_NRO_ADO=0,e.datos.NNA_CANT_TOTAL=0,e.contarGrillas()},e.getSeleccionaMunicipios=function(_){e.municipio=_},e.getProvinciasDepto=function(_){var t=_.split("-");e.depto=t[0];var o=new reglasnegocio;o.identificador="RCCIUDADANO_156",o.parametros='{"prv_dpto_codigo":"'+t[0]+'"}',o.llamarregla(function(_){_=JSON.parse(_),e.obtDatos=_,"undefined"==e.municipio&&null==e.municipio||setTimeout(function(){e.getSeleccionaMunicipios(e.municipio),e.$apply(),document.getElementById("TER_MIN").value=e.municipio},1e3)})},e.recuperarInfomacionViajes=function(){"SI"==A.get("ESTADO")?(t.desabilitado=!0,t.btnViajes=null):(t.desabilitado=!1,t.btnViajes="mostrar");var _=A.get("IDTRAMITE"),o=A.get("IDSOLICITANTE"),a=A.get("IDSERVICIO");if(o){var l='{"sidciudadano":"'+o+'","sidservicio":"'+a+'","sidtramite":"'+_+'"}',d=new reglasnegocio;d.identificador="RCCIUDADANO_39",d.parametros=l,d.llamarregla(function(o){if(I=JSON.parse(o),I[0].form_contenido){var a=JSON.parse(o),l=JSON.parse(a[0].form_contenido);e.depto=l.TER_DEST,e.ninosviajan=l,e.ninosviajanA=l,"undefined"==l.TER_TIP_PERMISO?document.getElementById("TER_TIP_PERMISO").value="":document.getElementById("TER_TIP_PERMISO").value=l.TER_TIP_PERMISO,"undefined"==l.TER_TIP_SOL?document.getElementById("TER_TIP_SOL").value="":document.getElementById("TER_TIP_SOL").value=l.TER_TIP_SOL,"undefined"==l.TER_TIP_SOL?document.getElementById("TER_TIP_SOL").value="":document.getElementById("TER_TIP_SOL").value=l.TER_TIP_SOL,void 0==l.g_datos_solicitante||""==l.g_datos_solicitante?(document.getElementById("G_CI").value=A.get("CICIUDADANO"),e.datos.G_CI=A.get("CICIUDADANO"),document.getElementById("G_NNA_NOM").value=A.get("US_NOMBRE"),e.datos.G_NNA_NOM=A.get("US_NOMBRE"),document.getElementById("G_NNA_PAT").value=A.get("US_PATERNO"),e.datos.G_NNA_PAT=A.get("US_PATERNO"),document.getElementById("G_NNA_MAT").value=A.get("US_MATERNO"),e.datos.G_NNA_MAT=A.get("US_MATERNO")):(document.getElementById("G_CI").value=l.G_CI,document.getElementById("G_NNA_NOM").value=l.G_NNA_NOM,document.getElementById("G_NNA_PAT").value=l.G_NNA_PAT,document.getElementById("G_NNA_MAT").value=l.G_NNA_MAT,
e.datos.g_datos_solicitante=l.g_datos_solicitante),"undefined"==l.TER_NOM_INST?document.getElementById("TER_NOM_INST").value="":document.getElementById("TER_NOM_INST").value=l.TER_NOM_INST,"undefined"==l.TER_INST_DIR?document.getElementById("TER_INST_DIR").value="":document.getElementById("TER_INST_DIR").value=l.TER_INST_DIR,"undefined"==l.TER_INST_TELF?document.getElementById("TER_INST_TELF").value="":document.getElementById("TER_INST_TELF").value=l.TER_INST_TELF,"undefined"==l.TER_FEC_RET?document.getElementById("TER_FEC_RET").value="":document.getElementById("TER_FEC_RET").value=l.TER_FEC_RET,"undefined"==l.TER_FEC_FIN?document.getElementById("TER_FEC_FIN").value="":document.getElementById("TER_FEC_FIN").value=l.TER_FEC_FIN,"undefined"==l.TER_NNA_DEL?document.getElementById("TER_NNA_DEL").value="":document.getElementById("TER_NNA_DEL").value=l.TER_NNA_DEL,e.TER_NNA_DEL=l.TER_NNA_DEL,"undefined"==l.NNA_CANT_MAS?document.getElementById("NNA_CANT_MAS").value="":document.getElementById("NNA_CANT_MAS").value=l.NNA_CANT_MAS,"undefined"==l.NNA_CANT_FEM?document.getElementById("NNA_CANT_FEM").value="":document.getElementById("NNA_CANT_FEM").value=l.NNA_CANT_FEM,"undefined"==l.NNA_CANT_NN?document.getElementById("NNA_CANT_NN").value="":document.getElementById("NNA_CANT_NN").value=l.NNA_CANT_NN,"undefined"==l.NNA_CAN_MAS?document.getElementById("NNA_CAN_MAS").value="":document.getElementById("NNA_CAN_MAS").value=l.NNA_CAN_MAS,"undefined"==l.NNA_CAN_FEM?document.getElementById("NNA_CAN_FEM").value="":document.getElementById("NNA_CAN_FEM").value=l.NNA_CAN_FEM,"undefined"==l.NNA_NRO_ADO?document.getElementById("NNA_NRO_ADO").value="":document.getElementById("NNA_NRO_ADO").value=l.NNA_NRO_ADO,"undefined"==l.NNA_CANT_MAS?document.getElementById("NNA_CANT_MAS").value="":document.getElementById("NNA_CANT_MAS").value=l.NNA_CANT_MAS,"undefined"==l.NNA_CANT_FEM?document.getElementById("NNA_CANT_FEM").value="":document.getElementById("NNA_CANT_FEM").value=l.NNA_CANT_FEM,"undefined"==l.NNA_CANT_NN?document.getElementById("NNA_CANT_NN").value="":document.getElementById("NNA_CANT_NN").value=l.NNA_CANT_NN,"undefined"==l.NNA_CAN_MAS?document.getElementById("NNA_CAN_MAS").value="":document.getElementById("NNA_CAN_MAS").value=l.NNA_CAN_MAS,"undefined"==l.NNA_CAN_FEM?document.getElementById("NNA_CAN_FEM").value="":document.getElementById("NNA_CAN_FEM").value=l.NNA_CAN_FEM,"undefined"==l.NNA_CANT_TOTAL?document.getElementById("NNA_CANT_TOTAL").value="":document.getElementById("NNA_CANT_TOTAL").value=l.NNA_CANT_TOTAL,"undefined"==l.TER_SOLOS?document.getElementById("TER_SOLOS").value="":document.getElementById("TER_SOLOS").value=l.TER_SOLOS,e.TER_SOLOS=l.TER_SOLOS,"undefined"==l.TER_DEST?document.getElementById("TER_DEST").value="":(document.getElementById("TER_DEST").value=l.TER_DEST,e.depto=l.TER_DEST,e.getProvinciasDepto(l.TER_DEST)),"undefined"==l.TER_MIN?document.getElementById("TER_MIN").value="":document.getElementById("TER_MIN").value=l.TER_MIN,e.municipio=l.TER_MIN,"undefined"==l.TER_MOT?document.getElementById("TER_MOT").value="":document.getElementById("TER_MOT").value=l.TER_MOT,e.datos=l,e.TER_TIP_PERMISO=l.TER_TIP_PERMISO,e.TER_TIP_SOL=l.TER_TIP_SOL,document.getElementById("TER_NNA_VIAJAN").textContent=l.TER_NNA_VIAJAN,0==l.TER_RESP.length?(document.getElementById("TER_RESP").textContent='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos|Viaja/ Autoriza|Parentesco/ Condición","campos":"f01_ADUL_TIP_DOC|f01_ADUL_G_CI|f01_ADUL_EXP_CIUD|f01_ADUL_G_NOM|f01_ADUL_G_APAT|f01_ADUL_G_AMAT|f01_ADUL_G_FEC_NAC|f01_ADUL_LUG_NAC|f01_ADUL_TER_CIUD|f01_ADUL_DEPA_OTRO|f01_ADUL_G_GEN|f01_ADUL_TER_MACRO|f01_ADUL_TER_ZONA|f01_ADUL_DIR|f01_ADUL_TER_TEL|f01_ADUL_G_TELF|f01_ADUL_G_ARCH|f01_ADUL_G_VA|f01_ADUL_G_PARE_COND","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|true|true|"}]',l.TER_RESP='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos|Viaja/ Autoriza|Parentesco/ Condición","campos":"f01_ADUL_TIP_DOC|f01_ADUL_G_CI|f01_ADUL_EXP_CIUD|f01_ADUL_G_NOM|f01_ADUL_G_APAT|f01_ADUL_G_AMAT|f01_ADUL_G_FEC_NAC|f01_ADUL_LUG_NAC|f01_ADUL_TER_CIUD|f01_ADUL_DEPA_OTRO|f01_ADUL_G_GEN|f01_ADUL_TER_MACRO|f01_ADUL_TER_ZONA|f01_ADUL_DIR|f01_ADUL_TER_TEL|f01_ADUL_G_TELF|f01_ADUL_G_ARCH|f01_ADUL_G_VA|f01_ADUL_G_PARE_COND","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|true|true|"}]'):document.getElementById("TER_RESP").textContent=l.TER_RESP,0==l.TER_NNA_VIAJAN.length?(document.getElementById("TER_NNA_VIAJAN").textContent='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos","campos":"f01_NNA_TIP_DOC|f01_NNA_G_CI|f01_NNA_EXP_CIUD|f01_NNA_G_NOM|f01_NNA_G_APAT|f01_NNA_G_AMAT|f01_NNA_G_FEC_NAC|f01_NNA_G_LUG_NAC|f01_NNA_G_CIUD|f01_NNA_DEPA_OTRO|f01_NNA_G_GEN|f01_NNA_TER_MACRO|f01_NNA_TER_ZONA|f01_NNA_DIR|f01_NNA_TER_TEL|f01_NNA_G_TELF|f01_NNA_G_ARCH","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|"}]',l.TER_NNA_VIAJAN='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos","campos":"f01_NNA_TIP_DOC|f01_NNA_G_CI|f01_NNA_EXP_CIUD|f01_NNA_G_NOM|f01_NNA_G_APAT|f01_NNA_G_AMAT|f01_NNA_G_FEC_NAC|f01_NNA_G_LUG_NAC|f01_NNA_G_CIUD|f01_NNA_DEPA_OTRO|f01_NNA_G_GEN|f01_NNA_TER_MACRO|f01_NNA_TER_ZONA|f01_NNA_DIR|f01_NNA_TER_TEL|f01_NNA_G_TELF|f01_NNA_G_ARCH","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|false|true|false|"}]'):document.getElementById("TER_NNA_VIAJAN").textContent=l.TER_NNA_VIAJAN,e.modelResp.TER_RESP=JSON.parse(l.TER_RESP),e.datos.TER_NNA_VIAJAN=JSON.parse(l.TER_NNA_VIAJAN),e.adjuntosArray=l.ARCHIVOS_MULTIPLES,e.nroRegistros=l.length,e.formTipoPermiso(l.TER_TIP_PERMISO),e.habilitarEnvioTramite(l);for(var d="Tipo de Doc.,f01_ADUL_TIP_DOC,CBO:CI|CEDULA DE IDENTIDAD#CN|CERTIFICADO DE NACIMIENTO#PAS|PASAPORTE#DN|DNI,20,obligatorio,,,No de Documento,f01_ADUL_G_CI,TXT,10,obligatorio,RC,f01_ADUL_EXP_CIUD#f01_ADUL_G_NOM#f01_ADUL_G_APAT#f01_ADUL_G_AMAT#f01_ADUL_G_FEC_NAC#f01_ADUL_LUG_NAC#f01_ADUL_TER_CIUD#f01_ADUL_G_GEN#f01_ADUL_TER_MACRO#f01_ADUL_TER_ZONA#f01_ADUL_DIR#f01_ADUL_TER_TEL#f01_ADUL_G_TELF#f01_ADUL_G_ARCH,Exp.,f01_ADUL_EXP_CIUD,CBO:LPZ|LA PAZ#ORU|ORURO#PTS|POTOSI#CBB|COCHABAMBA#CHQ|CHUQUISACA#TJA|TARIJA#BNI|BENI#PND|PANDO#SCZ|SANTA CRUZ#EXT|EXTERIOR,5,obligatorio,,,Nombre,f01_ADUL_G_NOM,TXT,20,obligatorio,,,Apellido Paterno,f01_ADUL_G_APAT,TXT,20,escritura,,,Apellido Materno,f01_ADUL_G_AMAT,TXT,20,escritura,,,Fecha de Nac.,f01_ADUL_G_FEC_NAC,FEC,10,obligatorio,,,Lugar de Nac.,f01_ADUL_LUG_NAC,CBO:LPZ|LA PAZ#ORU|ORURO#PTS|POTOSI#CBB|COCHABAMBA#CHQ|CHUQUISACA#TJA|TARIJA#BNI|BENI#PND|PANDO#SCZ|SANTA CRUZ#10|EXTERIOR,5,obligatorio,,,Ciudad de Residencia,f01_ADUL_TER_CIUD,CBO:LPZ|LA PAZ#ORU|ORURO#PTS|POTOSI#CBB|COCHABAMBA#CHQ|CHUQUISACA#TJA|TARIJA#BNI|BENI#PND|PANDO#SCZ|SANTA CRUZ#10|EXTERIOR,5,obligatorio,,,Exterior,f01_ADUL_DEPA_OTRO,TXT,20,escritura,,,Género,f01_ADUL_G_GEN,CBO:F|FEMENINO#M|MASCULINO,5,escritura,,,Macro,f01_ADUL_TER_MACRO,CBO:1|MACRODISTRITO 1 COTAHUMA#2|MACRODISTRITO 2 MAXIMILIANO PAREDES#3|MACRODISTRITO 3 PERIFERICA#4|MACRODISTRITO 4 SAN_ANTONIO#5|MACRODISTRITO 5 SUR#6|MACRODISTRITO 6 MALLASA#7|MACRODISTRITO 7 CENTRO#8|MACRODISTRITO 8 HAMPATURI#9|MACRODISTRITO 9 ZONGO#10|OTRO,30,obligatorio,f01_ADUL_TER_ZONA,select zona_id as valor* zona_nombre as dato from ae._ae_distritos * ae._ae_zona where dist_macro_id = xId and zona_distrito_id = dist_id order by 2 ,Zona,f01_ADUL_TER_ZONA,CBO:0|--Seleccione--,30,obligatorio,-,-,Dirección,f01_ADUL_DIR,TXT,50,escritura,,,Telefono,f01_ADUL_TER_TEL,TXT,10,escritura,,,Celular,f01_ADUL_G_TELF,TXT,10,escritura,,,Adjuntos,f01_ADUL_G_ARCH,ARC,10,escritura,,,Viaja/ Autoriza,f01_ADUL_G_VA,CBO:VIAJA|VIAJA#AUTORIZA|AUTORIZA#GARANTIZA|GARANTIZA,20,obligatorio,,,Parentesco/ Condición,f01_ADUL_G_PARE_COND,CBO:PADRE|PADRE#MADRE|MADRE#HERMANO(A)|HERMANO(A)#ABUELO(A)|ABUELO(A)#TIO(A)|TIO(A)#CUÑADO(A)|CUÑADO(A)#PRIMO(A)|PRIMO(A)#SOBRINO(A)|SOBRINO(A)#TUTOR(A)/APODERADO(A)/REP. LEGAL |TUTOR(A)/APODERADO(A)/REP. LEGAL#GARANTE|GARANTE#RESPONSABLE|RESPONSABLE,35,obligatorio,,",n=(d.split(","),document.getElementById("tabla_TER_RESP")),i=1,N="TER_RESP",r=1;r<e.modelResp.TER_RESP.length;r++){var s=n.insertRow(i);s.id=N+"_row"+i;var c=document.createElement("td"),E=0;cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_PARE_COND"+i;var R=document.createElement("input");R.id="f01_ADUL_G_PARE_COND"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_G_PARE_COND,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_G_PARE_COND"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_PARE_COND_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_VA"+i;var R=document.createElement("input");R.id="f01_ADUL_G_VA"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_G_VA,cell1.appendChild(R);var T=document.createElement("input");if(T.id="f01_ADUL_G_VA"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_VA_valor,cell1.appendChild(T),"-"==e.modelResp.TER_RESP[r].f01_ADUL_G_ARCH||"0"==e.modelResp.TER_RESP[r].f01_ADUL_G_ARCH||""==e.modelResp.TER_RESP[r].f01_ADUL_G_ARCH||null==e.modelResp.TER_RESP[r].f01_ADUL_G_ARCH){cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_ARCH"+i;var T=(document.createElement("div"),document.createElement("div"));T.innerHTML='<div class = "col-md-12"><button id="f01_ADUL_G_ARCH'+i+'" class = "btn btn-default btn-circle" onclick = "verImagen(0);"><i class = "fa fa-eye" style="color:#249FE6"></i></button><input style="border: none;" id="l_f01_ADUL_G_ARCH'+i+'" value="0" readonly="readonly"></div></td>',cell1.appendChild(T)}else{cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_ARCH"+i;var T=(document.createElement("div"),document.createElement("div")),I=e.modelResp.TER_RESP[r].f01_ADUL_G_ARCH.split("/");I=I[7].split("?");var u="'"+e.modelResp.TER_RESP[r].f01_ADUL_G_ARCH+"'";T.innerHTML='<div class = "col-md-12"><button id="f01_ADUL_G_ARCH'+i+'" class = "btn btn-default btn-circle" onclick = "verImagen('+u+')"><i class = "fa fa-eye" style="color:#249FE6"></i></button><input style="border: none;" id="l_f01_ADUL_G_ARCH'+i+'" value="'+I[0]+'" readonly="readonly"></div></td>',cell1.appendChild(T)}cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_TELF"+i;var T=document.createElement("input");T.id="f01_ADUL_G_TELF"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_TELF,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_TER_TEL"+i;var T=document.createElement("input");T.id="f01_ADUL_TER_TEL"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_TEL,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_DIR"+i;var T=document.createElement("input");T.id="f01_ADUL_DIR"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_DIR,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_TER_ZONA"+i;var R=document.createElement("input");R.id="f01_ADUL_TER_ZONA"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_ZONA,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_TER_ZONA"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_ZONA_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_TER_MACRO"+i;var R=document.createElement("input");R.id="f01_ADUL_TER_MACRO"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_MACRO,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_TER_MACRO"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_MACRO_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_GEN"+i;var R=document.createElement("input");R.id="f01_ADUL_G_GEN"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_G_GEN,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_G_GEN"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_GEN_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_DEPA_OTRO"+i;var T=document.createElement("input");T.id="f01_ADUL_DEPA_OTRO"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_DEPA_OTRO,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_TER_CIUD"+i;var R=document.createElement("input");R.id="f01_ADUL_TER_CIUD"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_CIUD,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_TER_CIUD"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_TER_CIUD_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_LUG_NAC"+i;var R=document.createElement("input");R.id="f01_ADUL_LUG_NAC"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_LUG_NAC,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_LUG_NAC"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_LUG_NAC_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_FEC_NAC"+i;var T=document.createElement("input");T.id="f01_ADUL_G_FEC_NAC"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_FEC_NAC,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_AMAT"+i;var T=document.createElement("input");T.id="f01_ADUL_G_AMAT"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_AMAT,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_APAT"+i;var T=document.createElement("input");T.id="f01_ADUL_G_APAT"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_APAT,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_NOM"+i;var T=document.createElement("input");T.id="f01_ADUL_G_NOM"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_NOM,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_EXP_CIUD"+i;var R=document.createElement("input");R.id="f01_ADUL_EXP_CIUD"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_EXP_CIUD,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_EXP_CIUD"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_EXP_CIUD_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_G_CI"+i;var T=document.createElement("input");T.id="f01_ADUL_G_CI"+i,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_G_CI,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_ADUL_TIP_DOC"+i;var R=document.createElement("input");R.id="f01_ADUL_TIP_DOC"+i,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.modelResp.TER_RESP[r].f01_ADUL_TIP_DOC,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_ADUL_TIP_DOC"+i+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.modelResp.TER_RESP[r].f01_ADUL_TIP_DOC_valor,cell1.appendChild(T),E++,"SI"!=A.get("ESTADO")&&(c.innerHTML='<button class="btn btn-default btn-circle" onclick="eliminarTabla('+i+",'"+N+"','"+d+'\');"><i class="fa fa-trash-o" style="color:#249FE6"></i></button> <button class="btn btn-default btn-circle" onclick="editarGrilla('+i+",'"+d+"','"+N+'\');"><i class="fa fa-pencil" style="color:#249FE6"></i></button></td>',c.id="c_btn_"+s.id,cell1=s.insertCell(0),cell1.appendChild(c)),i++}for(var m="Tipo de Doc.,f01_NNA_TIP_DOC,CBO:CI|CEDULA DE IDENTIDAD#CN|CERTIFICADO DE NACIMIENTO#PAS|PASAPORTE#DN|DNI,20,obligatorio,,,No de Documento,f01_NNA_G_CI,TXT,15,obligatorio,RC,f01_NNA_EXP_CIUD#f01_NNA_G_NOM#f01_NNA_G_APAT#f01_NNA_G_AMAT#f01_NNA_G_FEC_NAC#f01_NNA_G_LUG_NAC#f01_NNA_G_CIUD#f01_NNA_G_GEN#f01_NNA_TER_MACRO#f01_NNA_TER_ZONA#f01_NNA_DIR#f01_NNA_TER_TEL#f01_NNA_G_TELF#f01_NNA_G_ARCH,Exp.,f01_NNA_EXP_CIUD,CBO:LPZ|LA PAZ#ORU|ORURO#PTS|POTOSI#CBB|COCHABAMBA#CHQ|CHUQUISACA#TJA|TARIJA#BNI|BENI#PND|PANDO#SCZ|SANTA CRUZ#EXT|EXTERIOR,5,obligatorio,,,Nombre,f01_NNA_G_NOM,TXT,20,obligatorio,,,Apellido Paterno,f01_NNA_G_APAT,TXT,20,escritura,BSQ,f01_NNA_G_NOM#f01_NNA_G_APAT#f01_NNA_G_AMAT,Apellido Materno,f01_NNA_G_AMAT,TXT,20,escritura,BSQ,f01_NNA_G_NOM#f01_NNA_G_APAT#f01_NNA_G_AMAT,Fecha de Nac.,f01_NNA_G_FEC_NAC,FEC,10,obligatorio,,,Lugar de Nac.,f01_NNA_G_LUG_NAC,CBO:LPZ|LA PAZ#ORU|ORURO#PTS|POTOSI#CBB|COCHABAMBA#CHQ|CHUQUISACA#TJA|TARIJA#BNI|BENI#PND|PANDO#SCZ|SANTA CRUZ#10|EXTERIOR,5,obligatorio,,,Ciudad de Residencia,f01_NNA_G_CIUD,CBO:LPZ|LA PAZ#ORU|ORURO#PTS|POTOSI#CBB|COCHABAMBA#CHQ|CHUQUISACA#TJA|TARIJA#BNI|BENI#PND|PANDO#SCZ|SANTA CRUZ#10|EXTERIOR,5,obligatorio,,,Exterior,f01_NNA_DEPA_OTRO,TXT,20,escritura,,,Género,f01_NNA_G_GEN,CBO:F|FEMENINO#M|MASCULINO,5,obligatorio,,,Macro,f01_NNA_TER_MACRO,CBO:1|MACRODISTRITO 1 COTAHUMA#2|MACRODISTRITO 2 MAXIMILIANO PAREDES#3|MACRODISTRITO 3 PERIFERICA#4|MACRODISTRITO 4 SAN_ANTONIO#5|MACRODISTRITO 5 SUR#6|MACRODISTRITO 6 MALLASA#7|MACRODISTRITO 7 CENTRO#8|MACRODISTRITO 8 HAMPATURI#9|MACRODISTRITO 9 ZONGO#10|OTRO,30,obligatorio,f01_NNA_TER_ZONA,select zona_id as valor* zona_nombre as dato from ae._ae_distritos * ae._ae_zona where dist_macro_id = xId and zona_distrito_id = dist_id order by 2 ,Zona,f01_NNA_TER_ZONA,CBO:0|--Seleccione--,40,obligatorio,-,-,Dirección,f01_NNA_DIR,TXT,50,escritura,,,Telefono,f01_NNA_TER_TEL,TXT,10,escritura,,,Celular,f01_NNA_G_TELF,TXT,10,escritura,,,Adjuntos,f01_NNA_G_ARCH,ARC,10,escritura,,",f=(m.split(","),document.getElementById("tabla_TER_NNA_VIAJAN")),C=1,p="TER_NNA_VIAJAN",r=1;r<e.datos.TER_NNA_VIAJAN.length;r++){var s=f.insertRow(C);s.id=p+"_row"+C;var c=document.createElement("td"),E=0;if("-"==e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_ARCH||"0"==e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_ARCH||""==e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_ARCH||null==e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_ARCH){cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_ARCH"+C;var T=(document.createElement("div"),document.createElement("div"));T.innerHTML='<div class = "col-md-12"><button id="f01_NNA_G_ARCH'+C+'" class = "btn btn-default btn-circle" onclick = "verImagen(0);"><i class = "fa fa-eye" style="color:#249FE6"></i></button><input style="border: none;" id="l_f01_NNA_G_ARCH'+C+'" value="0" readonly="readonly"></div></td>',cell1.appendChild(T)}else{cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_ARCH"+C;var T=(document.createElement("div"),document.createElement("div")),I=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_ARCH.split("/");I=I[7].split("?");var u="'"+e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_ARCH+"'";T.innerHTML='<div class = "col-md-12"><button id="f01_NNA_G_ARCH'+C+'" class = "btn btn-default btn-circle" onclick = "verImagen('+u+');"><i class = "fa fa-eye" style="color:#249FE6"></i></button><input style="border: none;" id="l_f01_NNA_G_ARCH'+C+'" value="'+I[0]+'" readonly="readonly"></div></td>',cell1.appendChild(T)}cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_TELF"+C;var T=document.createElement("input");T.id="f01_NNA_G_TELF"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_TELF,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_TER_TEL"+C;var T=document.createElement("input");T.id="f01_NNA_TER_TEL"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TER_TEL,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_DIR"+C;var T=document.createElement("input");T.id="f01_NNA_DIR"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_DIR,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_TER_ZONA"+C;var R=document.createElement("input");R.id="f01_NNA_TER_ZONA"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TER_ZONA,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_TER_ZONA"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TER_ZONA_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_TER_MACRO"+C;var R=document.createElement("input");R.id="f01_NNA_TER_MACRO"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TER_MACRO,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_TER_MACRO"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TER_MACRO_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_GEN"+C;var R=document.createElement("input");R.id="f01_NNA_G_GEN"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_GEN,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_G_GEN"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_GEN_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_DEPA_OTRO"+C;var T=document.createElement("input");T.id="f01_NNA_DEPA_OTRO"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_DEPA_OTRO,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_CIUD"+C;var R=document.createElement("input");R.id="f01_NNA_G_CIUD"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_CIUD,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_G_CIUD"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_CIUD_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_LUG_NAC"+C;var R=document.createElement("input");R.id="f01_NNA_G_LUG_NAC"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_LUG_NAC,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_G_LUG_NAC"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_LUG_NAC_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_FEC_NAC"+C;var T=document.createElement("input");T.id="f01_NNA_G_FEC_NAC"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_FEC_NAC,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_AMAT"+C;var T=document.createElement("input");T.id="f01_NNA_G_AMAT"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_AMAT,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_APAT"+C;var T=document.createElement("input");T.id="f01_NNA_G_APAT"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_APAT,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_NOM"+C;var T=document.createElement("input");T.id="f01_NNA_G_NOM"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_NOM,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_EXP_CIUD"+C;var R=document.createElement("input");R.id="f01_NNA_EXP_CIUD"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_EXP_CIUD,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_EXP_CIUD"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_EXP_CIUD_valor,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_G_CI"+C;var T=document.createElement("input");T.id="f01_NNA_G_CI"+C,T.type="text",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_G_CI,cell1.appendChild(T),cell1=s.insertCell(0),cell1.id="c_f01_NNA_TIP_DOC"+C;var R=document.createElement("input");R.id="f01_NNA_TIP_DOC"+C,R.type="text",R.disabled="true",R.readonly="readonly",R.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TIP_DOC,cell1.appendChild(R);var T=document.createElement("input");T.id="f01_NNA_TIP_DOC"+C+"_valor",T.type="hidden",T.disabled="true",T.readonly="readonly",T.className="",T.value=e.datos.TER_NNA_VIAJAN[r].f01_NNA_TIP_DOC_valor,cell1.appendChild(T),E++,"SI"!=A.get("ESTADO")&&(c.innerHTML='<button class="btn btn-default btn-circle" onclick="eliminarTabla('+C+",'"+p+"','"+m+'\');"><i class="fa fa-trash-o" style="color:#249FE6"></i></button> <button class="btn btn-default btn-circle" onclick="editarGrilla('+C+",'"+m+"','"+p+'\');"><i class="fa fa-pencil" style="color:#249FE6"></i></button></td>',c.id="c_btn_"+s.id,cell1=s.insertCell(0),cell1.appendChild(c)),C++}}else{e.nroRegistros=0,e.datos=[],e.adjuntosArray="",e.iniciandoDatos(),A.set("IDTRAMITE",_),e.datos.G_CI=A.get("CICIUDADANO"),e.datos.G_NNA_NOM=A.get("US_NOMBRE"),e.datos.G_NNA_PAT=A.get("US_PATERNO"),e.datos.G_NNA_MAT=A.get("US_MATERNO"),e.datosNNA="",e.datosRES="";var D=$("#TER_RESP").val();void 0!=D&&void 0!=l&&(document.getElementById("TER_RESP").textContent='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos|Adjuntos2|Viaja/ Autoriza|Parentesco/ Condición","campos":"f01_ADUL_TIP_DOC|f01_ADUL_G_CI|f01_ADUL_EXP_CIUD|f01_ADUL_G_NOM|f01_ADUL_G_APAT|f01_ADUL_G_AMAT|f01_ADUL_G_FEC_NAC|f01_ADUL_LUG_NAC|f01_ADUL_TER_CIUD|f01_ADUL_DEPA_OTRO|f01_ADUL_G_GEN|f01_ADUL_TER_MACRO|f01_ADUL_TER_ZONA|f01_ADUL_DIR|f01_ADUL_TER_TEL|f01_ADUL_G_TELF|f01_ADUL_ANVERSO_G_ARCH|f01_ADUL_REVERSO_G_ARCH|f01_ADUL_G_VA|f01_ADUL_G_PARE_COND","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|false|true|true|"}]',e.modelResp.TER_RESP='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos|Viaja/ Autoriza|Parentesco/ Condición","campos":"f01_ADUL_TIP_DOC|f01_ADUL_G_CI|f01_ADUL_EXP_CIUD|f01_ADUL_G_NOM|f01_ADUL_G_APAT|f01_ADUL_G_AMAT|f01_ADUL_G_FEC_NAC|f01_ADUL_LUG_NAC|f01_ADUL_TER_CIUD|f01_ADUL_DEPA_OTRO|f01_ADUL_G_GEN|f01_ADUL_TER_MACRO|f01_ADUL_TER_ZONA|f01_ADUL_DIR|f01_ADUL_TER_TEL|f01_ADUL_G_TELF|f01_ADUL_ANVERSO_G_ARCH|f01_ADUL_REVERSO_G_ARCH|f01_ADUL_G_VA|f01_ADUL_G_PARE_COND","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|false|true|true|"}]',document.getElementById("TER_NNA_VIAJAN").textContent='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos|Adjuntos2","campos":"f01_NNA_TIP_DOC|f01_NNA_G_CI|f01_NNA_EXP_CIUD|f01_NNA_G_NOM|f01_NNA_G_APAT|f01_NNA_G_AMAT|f01_NNA_G_FEC_NAC|f01_NNA_G_LUG_NAC|f01_NNA_G_CIUD|f01_NNA_DEPA_OTRO|f01_NNA_G_GEN|f01_NNA_TER_MACRO|f01_NNA_TER_ZONA|f01_NNA_DIR|f01_NNA_TER_TEL|f01_NNA_G_TELF|f01_NNA_ANVERSO_G_ARCH|f01_NNA_REVERSO_G_ARCH","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|false|"}]',e.datos.TER_NNA_VIAJAN='[{"tipo":"GRD","titulos":"Tipo de Doc.|No de Documento|Exp.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telefono|Celular|Adjuntos|Adjuntos2","campos":"f01_NNA_TIP_DOC|f01_NNA_G_CI|f01_NNA_EXP_CIUD|f01_NNA_G_NOM|f01_NNA_G_APAT|f01_NNA_G_AMAT|f01_NNA_G_FEC_NAC|f01_NNA_G_LUG_NAC|f01_NNA_G_CIUD|f01_NNA_DEPA_OTRO|f01_NNA_G_GEN|f01_NNA_TER_MACRO|f01_NNA_TER_ZONA|f01_NNA_DIR|f01_NNA_TER_TEL|f01_NNA_G_TELF|f01_NNA_ANVERSO_G_ARCH|f01_NNA_REVERSO_G_ARCH","impresiones":"true|true|true|true|true|true|true|false|true|false|true|false|false|true|true|true|false|false|"}]',document.getElementById("TER_TIP_PERMISO").value="",document.getElementById("TER_TIP_SOL").value="",document.getElementById("TER_TIP_SOL").value="",document.getElementById("TER_NOM_INST").value="",document.getElementById("TER_INST_DIR").value="",document.getElementById("TER_INST_TELF").value="",document.getElementById("TER_NNA_DEL").value="",document.getElementById("NNA_CANT_MAS").value="",document.getElementById("NNA_CANT_FEM").value="",document.getElementById("NNA_CANT_NN").value="",document.getElementById("NNA_CAN_MAS").value="",document.getElementById("NNA_CAN_FEM").value="",document.getElementById("NNA_NRO_ADO").value="",document.getElementById("NNA_CANT_MAS").value="",document.getElementById("NNA_CANT_FEM").value="",document.getElementById("NNA_CANT_NN").value="",document.getElementById("NNA_CAN_MAS").value="",document.getElementById("NNA_CAN_FEM").value="",document.getElementById("NNA_CANT_TOTAL").value="",document.getElementById("TER_SOLOS").value="",document.getElementById("TER_DEST").value="",document.getElementById("TER_MIN").value="",document.getElementById("TER_MOT").value="",document.getElementById("TER_FEC_RET").value="",document.getElementById("TER_FEC_FIN").value="",e.habilitarEnvioTramite(e.datos))}"SI"==A.get("ESTADO")?(t.btnGuardarForm=!0,t.desabilitado=!0,e.desabilitado=!0,t.botones=null):(t.btnGuardarForm=!1,t.desabilitado=!1,e.desabilitado=!1,t.botones="mostrar"),t.$broadcast("validarBtnEnviar",o.length),t.$broadcast("inicializarCamposInternet",e.datos),t.$broadcast("inicializarGrillaAE",[{datos:e.datos,venviado:A.get("ESTADO")}]),t.$broadcast("inicializarFechaOblitatorio",e.datos)})}else r.show("","No existe el Id del Ciudadano","error");if(void 0!=e.datos.TER_TIP_PERMISO){var n=e.datos.TER_TIP_PERMISO;e.formTipoPermiso(n)}t.btnEnviarFormPermisos=!1},e.serializarInfViajes=function(_){var o=u.obtenerFechaActual(),a=new Array,l=e.ninosviajan.TER_NNA_VIAJAN,d=e.ninosviajanA.TER_RESP,n=document.getElementById("TER_TIP_PERMISO").value,i=document.getElementById("TER_TIP_SOL").value,N=document.getElementById("G_CI").value,s=document.getElementById("G_NNA_NOM").value,c=document.getElementById("G_NNA_PAT").value,E=document.getElementById("G_NNA_MAT").value,R=document.getElementById("TER_NOM_INST").value,T=document.getElementById("TER_INST_DIR").value,I=document.getElementById("TER_INST_TELF").value,m=document.getElementById("TER_FEC_RET").value,f=document.getElementById("TER_FEC_FIN").value,C=document.getElementById("TER_SOLOS").value,p=document.getElementById("TER_DEST").value,D=document.getElementById("TER_MIN").value,O=document.getElementById("TER_MOT").value,v=document.getElementById("TER_OTRO_MOT").value,U=document.getElementById("TER_NNA_DEL").value,L=document.getElementById("NNA_CANT_MAS").value,G=document.getElementById("NNA_CANT_FEM").value,g=document.getElementById("NNA_CANT_NN").value,S=document.getElementById("NNA_CAN_MAS").value,M=document.getElementById("NNA_CAN_FEM").value,P=document.getElementById("NNA_NRO_ADO").value,y=document.getElementById("NNA_CANT_TOTAL").value;
_.INT_AC_NOMBRE_VIA="undefined"==typeof _.INT_AC_NOMBRE_VIA||null==_.INT_AC_NOMBRE_VIA?"":_.INT_AC_NOMBRE_VIA.toUpperCase(),_.INT_DENOMINACION="undefined"==typeof _.INT_DENOMINACION||null==_.INT_DENOMINACION?"":_.INT_DENOMINACION.toUpperCase(),_.INT_AC_EDIFICIO="undefined"==typeof _.INT_AC_EDIFICIO||null==_.INT_AC_EDIFICIO?"":_.INT_AC_EDIFICIO.toUpperCase(),_.INT_AC_NUMERO="undefined"==typeof _.INT_AC_NUMERO||null==_.INT_AC_NUMERO?"":_.INT_AC_NUMERO.toUpperCase(),_.INT_AC_BLOQUE="undefined"==typeof _.INT_AC_BLOQUE||null==_.INT_AC_BLOQUE?"":_.INT_AC_BLOQUE.toUpperCase(),_.INT_AC_PISO="undefined"==typeof _.INT_AC_PISO||null==_.INT_AC_PISO?"":_.INT_AC_PISO.toUpperCase(),_.INT_AC_NUME="undefined"==typeof _.INT_AC_NUME||null==_.INT_AC_NUME?"":_.INT_AC_NUME.toUpperCase(),_.INT_FEC_SOLICITUD="undefined"==typeof _.INT_FEC_SOLICITUD||null==_.INT_FEC_SOLICITUD?"":o,_.INT_DIR_DET="undefined"==typeof _.INT_DIR_DET||null==_.INT_DIR_DET?"":_.INT_DIR_DET.toUpperCase(),_.TER_NNA_VIAJAN="undefined"==typeof l||null==l?"":l,_.TER_RESP="undefined"==typeof d||null==d?"":d,_.TER_TIP_PERMISO="undefined"==typeof n||null==n?"":n,_.TER_TIP_SOL="undefined"==typeof i||null==i?"":i,_.G_CI="undefined"==typeof N||null==N?"":N,_.G_NNA_NOM="undefined"==typeof s||null==s?"":s.toUpperCase(),_.G_NNA_PAT="undefined"==typeof c||null==c?"":c.toUpperCase(),_.G_NNA_MAT="undefined"==typeof E||null==E?"":E.toUpperCase(),_.TER_NOM_INST="undefined"==typeof R||null==R?"":R.toUpperCase(),_.TER_INST_DIR="undefined"==typeof T||null==T?"":T.toUpperCase(),_.TER_INST_TELF="undefined"==typeof I||null==I?"":I,_.TER_FEC_RET="undefined"==typeof m||null==m?"":m,_.TER_FEC_FIN="undefined"==typeof f||null==f?"":f,_.TER_SOLOS="undefined"==typeof C||null==C?"":C,_.TER_DEST="undefined"==typeof p||null==p?"":p,_.TER_MIN="undefined"==typeof D||null==D?"":D,_.TER_MOT="undefined"==typeof O||null==O?"":O,_.TER_OTRO_MOT="undefined"==typeof O||null==v?"":v,_.TER_NNA_DEL="undefined"==typeof U||null==U?"":U,_.NNA_CANT_MAS="undefined"==typeof L||null==L?"":L,_.NNA_CANT_FEM="undefined"==typeof G||null==G?"":G,_.NNA_CANT_NN="undefined"==typeof g||null==g?"":g,_.NNA_CAN_MAS="undefined"==typeof S||null==S?"":S,_.NNA_CAN_FEM="undefined"==typeof M||null==M?"":M,_.NNA_NRO_ADO="undefined"==typeof P||null==P?"":P,_.NNA_CANT_TOTAL="undefined"==typeof y||null==y?"":y,a.push(e.FILE_FOTOCOPIA_CI),a.push(e.FILE_FACTURA_SERVICIO),a.push(e.FILE_CROQUIS_AMBIENTE),a.push(e.FILE_CERTIFICADO_PENAL);try{var F=JSON.stringify(_),b=A.get("IDSOLICITANTE"),h=A.get("IDTRAMITE"),B=A.get("IDSERVICIO"),V=new datosFormularios;V.frm_tra_dvser_id=B,V.data_json=F,V.frm_tra_id_ciudadano=b,V.frm_tra_id_usuario=1,V.frm_idTramite=h,t.btnGuardarForm=!0,$.blockUI(),V.sp_crear_datos_formulario(function(_){_=JSON.parse(_),_=_.success,_.length>0?($.unblockUI(),t.btnEnviarForm=!1,t.btnGuardarForm=!1,t.$broadcast("inicializarFechaOblitatorio",e.datos),r.show("","Registro almacenado correctamente el Formulario","success"),$("#TER_TIP_PERMISO").prop("disabled",!0),$("#TER_FEC_RET").prop("disabled",!0),$("#TER_FEC_FIN").prop("disabled",!0),$("#TER_SOLOS").prop("disabled",!0),$("#TER_DEST").prop("disabled",!0),$("#TER_MOT").prop("disabled",!0),$("#TER_MIN").prop("disabled",!0),$("#BTN_DATE_EXIT").prop("disabled",!0),$("#BTN_DATE_RETURN").prop("disabled",!0),$("#COL_DAT_CHI").toggle(),$("td:nth-child(1)").toggle(),$("#COL_DAT_ADULT").hide()):($.unblockUI(),r.show("","Formulario no almacenado","error"))})}catch(e){console.log("Error al guardar Formulario",e),$.unblockUI()}},e.startDateOpen1=function(_){_.preventDefault(),_.stopPropagation(),e.startDateOpened1=!0},e.startDateOpen2=function(_){_.preventDefault(),_.stopPropagation(),e.startDateOpened2=!0},e.startDateOpen3=function(_){_.preventDefault(),_.stopPropagation(),e.startDateOpened3=!0},e.habilitarEnvioTramite=function(_){_.TER_NNA_VIAJAN.length>=1&&_.TER_RESP.length>=1?e.btnEnviarFormPermisos=!0:e.btnEnviarFormPermisos=!1},e.seleccionarTramite=function(_){e.datos.TER_NNA_VIAJAN="",e.datos="",void 0!=e.ninosviajanA&&(e.ninosviajanA.TER_RESP=""),t.btnEnviarFormPermisos=!1,t.habilitartab="si",void 0==e.ci_anv||""==e.ci_anv?(r.show("Estimado Ciudadano","Para iniciar alguna solicitud, es necesario completar sus datos y/o documentos digitalizados","warning"),window.location.href="#registro_ciudadano|modificarRegistro|index.html"):void 0!=e.ci_rev&&""!=e.ci_rev||(r.show("Estimado Ciudadano","Para iniciar alguna solicitud, es necesario completar sus datos y/o documentos digitalizados","warning"),window.location.href="#registro_ciudadano|modificarRegistro|index.html"),e.tramiteSelect=_,t.tramiteId=_.vtra_id,A.set("IDTRAMITE",_.vtra_id),A.set("IDSERVICIO",_.vdvser_id),A.set("ESTADO",_.venviado),e.template="",e.formulario="mostrar","SI"==_.venviado?(t.btnViajes=null,e.desabilitado=!0,e.template=e.templates[_.vdvser_id]):(t.btnViajes="mostrar",e.desabilitado=!1,e.template=e.templates[_.vdvser_id]),$("#tabla_TER_NNA_VIAJAN").find("tr:gt(0)").remove(),$("#tabla_TER_RESP").find("tr:gt(0)").remove(),null!=document.getElementById("TER_RESP")&&(document.getElementById("TER_RESP").innerText="",document.getElementById("TER_NNA_VIAJAN").innerText=""),e.recuperarInfomacionViajes(),e.tramiteSeleccionado=_.vtra_id;var o=document.getElementById("tipo_contribuyente");o&&(o.style.display="none"),t.btnEnviarFormPermisos=!1},e.getListache=function(_){e.caras=_},e.mostrarHistorico=function(_){t.tramiteId=_.vtra_id,A.set("IDTRAMITE",_.vtra_id),A.set("IDSERVICIO",_.vdvser_id),A.set("ESTADO",_.venviado),e.recuperarSerializarInfo(_),e.template="",e.formulario="mostrar","SI"==_.venviado?(e.desabilitado=!0,e.template="",e.template=e.templates[5]):(e.desabilitado=!1,e.template="",e.template=e.templates[5]);var o=document.getElementById("tipo_contribuyente");o&&(o.style.display="none")};var P=A.get("IDCIUDADANO");e.uploader=new T({url:n.APIURL+"?desripcion=ciudadano&&idCiudadano="+P});var y=e.uploader;y.filters.push({name:"customFilter",fn:function(e,_){return this.queue.length<10}}),y.onWhenAddingFileFailed=function(e,_,t){},y.onAfterAddingFile=function(_){tipoDocumento=_.file.type;var t=tipoDocumento.split("/");tipoDocumento=t[1];"png"==tipoDocumento||"jpg"==tipoDocumento||"jpeg"==tipoDocumento||"txt"==tipoDocumento||"plain"==tipoDocumento||"zip"==tipoDocumento||"rar"==tipoDocumento||"vnd.ms-word.document.12"==tipoDocumento||"vnd.openxmlformats-officedocument.spreadsheetml.sheet"==tipoDocumento||"vnd.visio"==tipoDocumento||"vnd.ms-publisher"==tipoDocumento||"msaccess"==tipoDocumento||"vnd.openxmlformats-officedocument.wordprocessingml.document"==tipoDocumento?(e.botonSubirOriginal=null,e.botonSubirError="oculta"):(e.botonSubirError=null,e.botonSubirOriginal="oculta")},e.falla=function(){r.show("","Tipo de archivo incorrecto elimine porfavor","error"),e.desabilitado2=!0};y.onSuccessItem=function(_,o,a,l){e.direccionvirtual="RC_CLI";var d=n.APIURL+"/files/"+e.direccionvirtual+"/"+t.tramiteId+"/"+_._file.name+"?app_name=todoangular",A=_._file.name,i=_._file.size/1024/1024;i=i.toFixed(2),M=e.datos.ARCHIVOS_MULTIPLES?e.datos.ARCHIVOS_MULTIPLES:new Array;var N={nombre_archivo:A,tam_archivo:i,estado_archivo:"Env.",opcion_archivo:"-",url_archivo:d};M.push(N),e.adjuntosArray=M;var r=new Array;r.push(_._file),e.almacenarDocumentos(r),_.remove(),e.datos.ARCHIVOS_MULTIPLES=M,t.$broadcast("inicializarFechaOblitatorio",e.datos)};var F=t.$on("validarBtn",function(_,t){t.frm_tra_id&&e.tramitesCiudadano()});e.$on("$destroy",function(){F()}),e.eliminarMultipleAdjunto=function(_){e.datos.ARCHIVOS_MULTIPLES&&(e.adjuntosArray=e.datos.ARCHIVOS_MULTIPLES),e.adjuntosArray&&e.adjuntosArray.splice(_,1),t.$broadcast("inicializarFechaOblitatorio",e.datos)},e.modelFecha={startDate:new Date("01/01/1950"),endDate:new Date},e.cambioTexto=function(){e.textCambio="1"},e.datosComboRender=function(e,_){exp=new RegExp("&","g"),_=_.replace(exp,"'");var t=new gModal;t.sql=_,t.reporte_dinamico(function(_){combo=JSON.parse(_).success.data;try{f(combo[0].sp_reporte_dinamico123),C(e)}catch(e){}})},e.addnna=function(){if(void 0==e.model.selected.f01_NNA_G_CI){e.ninosviajan.TER_NNA_VIAJAN||(e.ninosviajan.TER_NNA_VIAJAN=[]);var _=e.ninosviajan.TER_NNA_VIAJAN.length+1;e.contador1=_,e.model.TER_NNA_VIAJAN=e.ninosviajan.TER_NNA_VIAJAN;var t={id:_,f01_NNA_TIP_DOC:"",f01_NNA_G_CI:"",f01_NNA_EXP_CIUD:"",f01_NNA_G_NOM:"",f01_NNA_G_APAT:"",f01_NNA_G_AMAT:"",f01_NNA_G_FEC_NAC:"",f01_NNA_G_LUG_NAC:"",f01_NNA_DEP_OTRO:"",f01_NNA_G_GEN:"",f01_NNA_DIR:"",f01_NNA_TER_TEL:"",f01_NNA_G_TELF:"",f01_NNA_ANVERSO_G_ARCH:"",f01_NNA_REVERSO_G_ARCH:""};e.archiFileCIAnverso="",e.archiFileCIReverso="",e.archiFileOtro="",e.archiFileDNIAnverso="",e.archiFileDNIReverso="",e.model.TER_NNA_VIAJAN.push(t),e.editnna(t)}else sweetAlert("GUARDAR","Debe presionar el Botón GUARDAR, para agregar otro registro")},e.addresp=function(){if(void 0==e.modelResp.selectedR.f01_ADUL_G_CI){e.ninosviajanA.TER_RESP||(e.ninosviajanA.TER_RESP=[]);var _=e.ninosviajanA.TER_RESP.length+1;e.contador2=_,e.modelResp.TER_RESP=e.ninosviajanA.TER_RESP;var t={id:_,f01_ADUL_G_CI:"",f01_ADUL_EXP_CIUD:"",f01_ADUL_G_PARE:"",f01_ADUL_G_NOM:"",f01_ADUL_G_APAT:"",f01_ADUL_G_AMAT:"",f01_ADUL_G_FEC_NAC:"",f01_resp_G_LUG_NAC:"",f01_ADUL_G_GEN:"",f01_ADUL_TER_CIUD:"",f01_ADUL_DEPA_OTRO:"",f01_ADUL_TER_MACRO:"",f01_ADUL_TER_ZONA:"",f01_ADUL_DIR:"",f01_ADUL_TER_TEL:"",f01_ADUL_G_TELF:"",f01_ADUL_F_CADUC_CI:"",f01_ADUL_ANVERSO_G_ARCH:"",f01_ADUL_REVERSO_G_ARCH:"",f01_ADUL_O_ADJ_G_ARCH_CN:"",f01_ADUL_ANVERSO_G_ARCH_DNI:"",f01_ADUL_REVERSO_G_ARCH_DNI:""};e.archiFileCIAnversoA="",e.archiFileCIReversoA="",e.archiFileOtroA="",e.archiFileDNIAnversoA="",e.archiFileDNIAReversoA="",e.modelResp.TER_RESP.push(t),e.editresp(t)}else sweetAlert("GUARDAR","Debe presionar el Botón GUARDAR, para agregar otro registro")},e.contarGrillas=function(){if(v=0,U=0,L=0,G=0,g=0,S=0,dato7="",dato8="",void 0!=e.ninosviajan.TER_NNA_VIAJAN){for(var _=e.ninosviajan.TER_NNA_VIAJAN.length,t=0;t<_;t++){dato7=e.ninosviajan.TER_NNA_VIAJAN[t].f01_NNA_G_FEC_NAC,dato8=e.ninosviajan.TER_NNA_VIAJAN[t].f01_NNA_G_GEN;var o=new Date(e.ninosviajan.TER_NNA_VIAJAN[t].f01_NNA_G_FEC_NAC);o.getDate()<10?dia="0"+o.getDate():dia=o.getDate(),mes=o.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaNacOficial=o.getFullYear()+"-"+mes+"-"+dia,e.f=moment(fechaNacOficial,"YYYY-MM-DD"),e.g=moment(O,"YYYY-MM-DD");var a=parseInt((e.g-e.f)/365/24/60/60/1e3);"F"==dato8&&(a>=12?(L+=1,e.datos.NNA_CAN_FEM=L):(v+=1,e.datos.NNA_CANT_FEM=v)),"M"==dato8&&(a>=12?(G+=1,e.datos.NNA_CAN_MAS=G):(U+=1,e.datos.NNA_CANT_MAS=U))}g=v+U,S=L+G,e.datos.NNA_CANT_NN=g,e.datos.NNA_NRO_ADO=S,e.datos.NNA_CANT_TOTAL=g+S}},e.esconderAdjuntos=function(_){"CI"==e.model.selected.f01_NNA_TIP_DOC&&(e.tipoArchivo1=!1,e.tipoArchivo2=!1,e.tipoArchivo3=!0,e.tipoArchivox4=!0,e.tipoArchivox5=!0),"CN"==e.model.selected.f01_NNA_TIP_DOC&&(e.tipoArchivo1=!0,e.tipoArchivo2=!0,e.tipoArchivo3=!1,e.tipoArchivox4=!0,e.tipoArchivox5=!0),"DN"==e.model.selected.f01_NNA_TIP_DOC&&(e.tipoArchivo1=!0,e.tipoArchivo2=!0,e.tipoArchivo3=!0,e.tipoArchivox4=!1,e.tipoArchivox5=!1),"10"==e.model.selected.f01_NNA_G_CIUD?(e.tipoArchivo21=!1,e.model.selected.f01_NNA_DEP_OTRO=""):e.tipoArchivo21=!0,10==_&&(e.model.selected.f01_NNA_G_CI="",e.model.selected.f01_NNA_G_NOM="",e.model.selected.f01_NNA_G_APAT="",e.model.selected.f01_NNA_G_AMAT="",e.model.selected.f01_NNA_DIR="",e.model.selected.f01_NNA_G_LUG_NAC="",e.model.selected.f01_NNA_TER_MACRO="",e.model.selected.f01_NNA_TER_ZONA="",e.model.selected.f01_NNA_DIR="",e.model.selected.f01_NNA_TER_TEL="",e.model.selected.f01_NNA_G_TELF="",e.model.selected.f01_NNA_F_CADUC_CI="",e.model.selected.f01_NNA_EXP_CIUD="",e.model.selected.f01_NNA_G_FEC_NAC="",e.model.selected.f01_NNA_G_GEN="",e.model.selected.f01_NNA_G_CIUD="",e.model.selected.f01_NNA_DEP_OTRO="",e.model.selected.f01_NNA_ANVERSO_G_ARCH="",e.model.selected.f01_NNA_REVERSO_G_ARCH="",e.model.selected.f01_NNA_O_ADJ_G_ARCH_CN="",e.model.selected.f01_NNA_ANVERSO_G_ARCH_DNI="",e.model.selected.f01_NNA_REVERSO_G_ARCH_DNI="")},e.esconderAdjuntosA=function(_){"CI"==e.modelResp.selectedR.f01_ADUL_TIP_DOC&&(e.tipoArchivo11=!1,e.tipoArchivo12=!1,e.tipoArchivoAx1=!0,e.tipoArchivoAx2=!0),"DN"==e.modelResp.selectedR.f01_ADUL_TIP_DOC&&(e.tipoArchivo11=!0,e.tipoArchivo12=!0,e.tipoArchivoAx1=!1,e.tipoArchivoAx2=!1),"10"==e.modelResp.selectedR.f01_ADUL_TER_CIUD?(e.tipoArchivo31=!1,e.modelResp.selectedR.f01_ADUL_DEPA_OTRO=""):e.tipoArchivo31=!0,10==_&&(e.modelResp.selectedR.f01_ADUL_G_CI="",e.modelResp.selectedR.f01_ADUL_EXP_CIUD="",e.modelResp.selectedR.f01_ADUL_G_PARE_COND="",e.modelResp.selectedR.f01_ADUL_G_NOM="",e.modelResp.selectedR.f01_ADUL_G_APAT="",e.modelResp.selectedR.f01_ADUL_G_AMAT="",e.modelResp.selectedR.f01_ADUL_G_FEC_NAC="",e.modelResp.selectedR.f01_ADUL_LUG_NAC="",e.modelResp.selectedR.f01_ADUL_G_GEN="",e.modelResp.selectedR.f01_ADUL_TER_CIUD="",e.modelResp.selectedR.f01_ADUL_DEPA_OTRO="",e.modelResp.selectedR.f01_ADUL_TER_MACRO="",e.modelResp.selectedR.f01_ADUL_TER_ZONA="",e.modelResp.selectedR.f01_ADUL_DIR="",e.modelResp.selectedR.f01_ADUL_TER_TEL="",e.modelResp.selectedR.f01_ADUL_G_TELF="",e.modelResp.selectedR.f01_ADUL_G_VA="",e.model.selected.f01_ADUL_ANVERSO_G_ARCH="",e.model.selected.f01_ADUL_REVERSO_G_ARCH="",e.modelResp.selectedR.f01_ADUL_F_CADUC_CI="",e.model.selected.f01_ADUL_O_ADJ_G_ARCH_CN="",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH_DNI="0",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH_DNI="0")},e.enviarFormPermisoViajes=function(_){t.btnGuardarForm=!0;var o="T-VF",a={},l=_.TER_NNA_VIAJAN;v=0,U=0,L=0,G=0,g=0,S=0;var d={tipo:"GRD",titulos:"CI|Exp.|Cert. Nac.|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telf. 1|Cel. 2",campos:"f01_NNA_G_CI|f01_NNA_EXP_CIUD|f01_NNA_G_CN|f01_NNA_G_NOM|f01_NNA_G_APAT|f01_NNA_G_AMAT|f01_NNA_G_FEC_NAC|f01_NNA_G_LUG_NAC|f01_NNA_G_CIUD|f01_NNA_DEPA_OTRO|f01_NNA_G_GEN|f01_NNA_TER_MACRO|f01_NNA_TER_ZONA|f01_NNA_DIR|f01_NNA_TER_TEL|f01_NNA_G_TELF",impresiones:"true|true|true|true|true|true|true|no|true|no|true|no|true|true|no|true|"};l.unshift(d),_.TER_NNA_VIAJAN=l;var n={tipo:"GRD",titulos:"CI|Exp.|Parentesco/ Condición|Nombre|Apellido Paterno|Apellido Materno|Fecha de Nac.|Lugar de Nac.|Ciudad de Residencia|Exterior|Género|Macro|Zona|Dirección|Telf. 1|Cel. 2|Viaja/ Autoriza",campos:"f01_ADUL_G_CI|f01_ADUL_EXP_CIUD|f01_ADUL_G_PARE_COND|f01_ADUL_G_NOM|f01_ADUL_G_APAT|f01_ADUL_G_AMAT|f01_ADUL_G_FEC_NAC|f01_ADUL_LUG_NAC|f01_ADUL_TER_CIUD|f01_ADUL_DEPA_OTRO|f01_ADUL_G_GEN|f01_ADUL_TER_MACRO|f01_ADUL_TER_ZONA|f01_ADUL_DIR|f01_ADUL_TER_TEL|f01_ADUL_G_TELF|f01_ADUL_G_VA",impresiones:"true|true|true|true|true|true|true|no|true|no|true|no|true|true|no|true|true|"},i=_.TER_RESP;i.unshift(n),_.TER_RESP=i,a.g_tipo="T-VF",g_datos_solicitante=new Array;var N={};N.num_documento=A.get("CICIUDADANO"),N.nombre=A.get("US_NOMBRE"),N.paterno=A.get("US_PATERNO"),N.materno=A.get("US_MATERNO"),g_datos_solicitante.push(N),a.datos_solicitante=g_datos_solicitante,a.G_CI=A.get("CICIUDADANO"),"F"==e.PERMISO&&(a.TER_TIP_PERMISO=e.PERMISO,"1-F"==_.TER_TIP_PERMISO&&(a.FAM_AUTORIZA="MATRIMONIO VIGENTE"),"2-F"==_.TER_TIP_PERMISO&&(a.FAM_AUTORIZA="CASO DIVORCIO"),"3-F"==_.TER_TIP_PERMISO&&(a.FAM_AUTORIZA="FALLECIMIENTO PADRE O MADRE"),"4-F"==_.TER_TIP_PERMISO&&(a.FAM_AUTORIZA="PADRE O MADRE SOLOS"),a.TER_TIP_SOL=_.TER_TIP_SOL,a.G_NNA_NOM=_.G_NNA_NOM,a.G_NNA_PAT=_.G_NNA_PAT,a.G_NNA_MAT=_.G_NNA_MAT,a.TER_FEC_RET=_.TER_FEC_RET,a.TER_FEC_FIN=_.TER_FEC_FIN,a.TER_SOLOS=_.TER_SOLOS,a.TER_NNA_VIAJAN=_.TER_NNA_VIAJAN,a.TER_RESP=_.TER_RESP,a.TER_DEST=_.TER_DEST,a.TER_MIN=_.TER_MIN,a.TER_MOT=_.TER_MOT,a.TER_OTRO_MOT=_.TER_OTRO_MOT,a.DEF_FEC_ING=_.DEF_FEC_ING,a.TER_TIP_CASO="6",a.DEF_EDAD_ETAPA="NA",a.DEF_INSTANCIAS="UDIF_T"),"D"==e.PERMISO&&(a.G_NNA_NOM=_.G_NNA_NOM,a.G_NNA_PAT=_.G_NNA_PAT,a.G_NNA_MAT=_.G_NNA_MAT,a.TER_TIP_PERMISO=_.TER_TIP_PERMISO,a.TER_NOM_INST=_.TER_NOM_INST,a.TER_INST_DIR=_.TER_INST_DIR,a.TER_INST_TELF=_.TER_INST_TELF,a.TER_FEC_RET=_.TER_FEC_RET,a.TER_FEC_FIN=_.TER_FEC_FIN,a.TER_NNA_VIAJAN=_.TER_NNA_VIAJAN,a.TER_RESP=_.TER_RESP,a.TER_DEST=_.TER_DEST,a.TER_MIN=_.TER_MIN,a.TER_MOT=_.TER_MOT,a.TER_OTRO_MOT=_.TER_OTRO_MOT,a.TER_NNA_DEL=_.TER_NNA_DEL,a.NNA_CANT_MAS=_.NNA_CANT_MAS,a.NNA_CANT_FEM=_.NNA_CANT_FEM,a.NNA_CANT_NN=_.NNA_CANT_NN,a.NNA_CAN_MAS=_.NNA_CAN_MAS,a.NNA_CAN_FEM=_.NNA_CAN_FEM,a.NNA_NRO_ADO=_.NNA_NRO_ADO,a.NNA_CANT_TOTAL=_.NNA_CANT_TOTAL,a.DEF_FEC_ING=_.DEF_FEC_ING,a.TER_TIP_CASO="6",a.DEF_EDAD_ETAPA="NA",a.DEF_INSTANCIAS="UDIF_T");var r=(t.tramiteId,JSON.stringify(a)),s=new gCrearCaso;s.usr_id=1,s.datos=r,s.procodigo=o,s.crearSolicitudViaje(function(t){resultadoApi=JSON.parse(t);var o=resultadoApi.success.data;if(indice=0,o.length>0){datosIF=o[0].sp_pmfunction_generica.split(","),datosIF2=datosIF[2],datosIF3=datosIF[3],datosIF[0]=datosIF[0].substring(1,datosIF[0].length),e.nrotramitec=datosIF[0],A.set("NROTRAMITE",datosIF[0]),A.set("NROTRAMITEID",datosIF[2]),A.set("IDPROCESO",datosIF[3]);A.get("NROTRAMITEID");e.tramiteSelect.venviado="SI",e.tramiteSelect.vcodigo=datosIF[0],e.validarFormProcesos(_)}else e.msg="Error al enviar el formulario de permiso de viajes!";$.unblockUI()})},e.mensajevs=function(){e.mostrarMsgActividadTrue=!0},e.validarFormProcesos=function(e){var _=A.get("IDTRAMITE");nroTramiteEnviado=A.get("NROTRAMITE"),idUsuario=4;var o=new reglasnegocio;o.identificador="RCCIUDADANO_81",o.parametros='{"idTramite":"'+_+'","enviado":"SI","codigo":"'+nroTramiteEnviado+'","id_usuario":"'+idUsuario+'" }';var a=e.TER_RESP;a.shift(),e.TER_RESP=a;var l=e.TER_NNA_VIAJAN;l.shift(),e.TER_NNA_VIAJAN=l,o.llamarregla(function(e){nroTramiteEnviado=A.get("NROTRAMITE"),r.show("Señor Ciudadano su Nro de trámite  es : "+nroTramiteEnviado," NOTA: Tiene 7 días para aproximarse a la plataforma DNA terminal con su respectiva documentación, caso contrario su registro será dado de baja, NO SE REQUIERE FOTOCOPIAS."),t.btnViajes=null,t.desabilitado=!0,href="#registro_ciudadano|servicios|index2.html"}),t.btnViajes=null,t.btnEnviarFormPermisos=!1},e.model={TER_NNA_VIAJAN:[],selected:{}},e.getTemplate=function(_){return e.model.TER_NNA_VIAJAN=e.ninosviajan.TER_NNA_VIAJAN,_.id===e.model.selected.id?"edit":"display"},e.editnna=function(_){e.model.selected=angular.copy(_),e.contarGrillas()},e.savenna=function(_){var o=e.model.selected.f01_NNA_TIP_DOC,a=e.model.selected.f01_NNA_G_CI,l=e.model.selected.f01_NNA_EXP_CIUD,d=e.model.selected.f01_NNA_G_NOM,A=(e.model.selected.f01_NNA_G_APAT,e.model.selected.f01_NNA_G_AMAT,e.model.selected.f01_NNA_G_FEC_NAC),i=e.model.selected.f01_NNA_G_GEN,N=e.model.selected.f01_NNA_G_CIUD,r=(e.model.selected.f01_NNA_DEP_OTRO,e.model.selected.f01_NNA_DIR,e.model.selected.f01_NNA_F_CADUC_CI),s=e.model.selected.f01_NNA_G_CIUD,c=e.model.selected.f01_NNA_DIR;if(""==o||""==a||""==l||""==d||""==A||""==i||""==N||void 0===r||void 0===s||""==c)sweetAlert("","Complete Todos Los Datos de las casillas rojas que son obligatorias","error");else{if(e.model.selected.f01_NNA_G_FEC_NAC.length>0||(fec12345679=new Date(e.model.selected.f01_NNA_G_FEC_NAC),fec12345679.getDate()<10?dia="0"+fec12345679.getDate():dia=fec12345679.getDate(),mes=fec12345679.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaNacOficial=fec12345679.getFullYear()+"-"+mes+"-"+dia,e.model.selected.f01_NNA_G_FEC_NAC=fechaNacOficial),"CI"==e.model.selected.f01_NNA_TIP_DOC)if(e.model.selected.f01_NNA_F_CADUC_CI.length>0||(fec12345679=new Date(e.model.selected.f01_NNA_F_CADUC_CI),fec12345679.getDate()<10?dia="0"+fec12345679.getDate():dia=fec12345679.getDate(),mes=fec12345679.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaNacOficial=fec12345679.getFullYear()+"-"+mes+"-"+dia,e.model.selected.f01_NNA_F_CADUC_CI=fechaNacOficial),document.getElementById("f01_NNA_ANVERSO_G_ARCH").value&&document.getElementById("f01_NNA_REVERSO_G_ARCH").value){var E=document.getElementById("f01_NNA_ANVERSO_G_ARCH");if(void 0===E.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(E.files[0],e.direccionvirtual);e.model.selected.f01_NNA_ANVERSO_G_ARCH=e.direccionvirtual+E.files[0].name+"?app_name=todoangular"}var E=document.getElementById("f01_NNA_REVERSO_G_ARCH");if(void 0===E.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(E.files[0],e.direccionvirtual);e.model.selected.f01_NNA_REVERSO_G_ARCH=e.direccionvirtual+E.files[0].name+"?app_name=todoangular"}e.model.selected.f01_NNA_O_ADJ_G_ARCH_CN="0",e.model.selected.f01_NNA_ANVERSO_G_ARCH_DNI="0",e.model.selected.f01_NNA_REVERSO_G_ARCH_DNI="0",e.model.TER_NNA_VIAJAN[_]=angular.copy(e.model.selected),e.reset(),e.ninosviajan.TER_NNA_VIAJAN=e.model.TER_NNA_VIAJAN}else e.model.TER_NNA_VIAJAN[_]=angular.copy(e.model.selected),e.reset(),e.ninosviajan.TER_NNA_VIAJAN=e.model.TER_NNA_VIAJAN;if("CN"==e.model.selected.f01_NNA_TIP_DOC)if(t.OIDtemp=e.model.selected.f01_NNA_G_CI,document.getElementById("f01_NNA_O_ADJ_G_ARCH_CN").value){var E=document.getElementById("f01_NNA_O_ADJ_G_ARCH_CN");if(void 0===E.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(E.files[0],e.direccionvirtual);e.model.selected.f01_NNA_O_ADJ_G_ARCH_CN=e.direccionvirtual+E.files[0].name+"?app_name=todoangular"}e.model.selected.f01_NNA_ANVERSO_G_ARCH="0",e.model.selected.f01_NNA_REVERSO_G_ARCH="0",e.model.selected.f01_NNA_ANVERSO_G_ARCH_DNI="0",e.model.selected.f01_NNA_REVERSO_G_ARCH_DNI="0",e.model.TER_NNA_VIAJAN[_]=angular.copy(e.model.selected),e.reset(),e.ninosviajan.TER_NNA_VIAJAN=e.model.TER_NNA_VIAJAN}else e.model.TER_NNA_VIAJAN[_]=angular.copy(e.model.selected),e.reset(),e.ninosviajan.TER_NNA_VIAJAN=e.model.TER_NNA_VIAJAN;if("DN"==e.model.selected.f01_NNA_TIP_DOC)if(t.OIDtemp=e.model.selected.f01_NNA_G_CI,document.getElementById("f01_NNA_ANVERSO_G_ARCH_DNI").value&&document.getElementById("f01_NNA_REVERSO_G_ARCH_DNI").value){var E=document.getElementById("f01_NNA_ANVERSO_G_ARCH_DNI");if(void 0===E.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(E.files[0],e.direccionvirtual);e.model.selected.f01_NNA_ANVERSO_G_ARCH_DNI=e.direccionvirtual+E.files[0].name+"?app_name=todoangular"}var E=document.getElementById("f01_NNA_REVERSO_G_ARCH_DNI");if(void 0===E.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(E.files[0],e.direccionvirtual);e.model.selected.f01_NNA_REVERSO_G_ARCH_DNI=e.direccionvirtual+E.files[0].name+"?app_name=todoangular"}e.model.selected.f01_NNA_O_ADJ_G_ARCH_CN="0",e.model.selected.f01_NNA_ANVERSO_G_ARCH="0",e.model.selected.f01_NNA_REVERSO_G_ARCH="0",e.model.TER_NNA_VIAJAN[_]=angular.copy(e.model.selected),e.reset(),e.ninosviajan.TER_NNA_VIAJAN=e.model.TER_NNA_VIAJAN}else e.model.TER_NNA_VIAJAN[_]=angular.copy(e.model.selected),e.reset(),e.ninosviajan.TER_NNA_VIAJAN=e.model.TER_NNA_VIAJAN;e.$evalAsync()}e.contarGrillas()},e.validarCompleto=function(_,t,o,a){var l=_.toString(),d=t.toString();99==a?7==l.length||(sweetAlert("El Número telefonico debe ser de 7 dígitos :","Ej. 2234567"),(o=10)&&(e.datos.TER_INST_TELF=null),(o=20)&&(e.model.selected.f01_NNA_TER_TEL=null),(o=30)&&(e.modelResp.selectedR.f01_ADUL_TER_TEL=null)):8==d.length||(sweetAlert("El Número de celular debe ser de 8 dígitos :","Ej. 72345678"),(o=5)&&(e.model.selected.f01_NNA_G_TELF=null),(o=15)&&(e.modelResp.selectedR.f01_ADUL_G_TELF=null))},e.validarTelfDelega=function(_){var t=_.toString(),o=t.substring(0,1);if("2"==o||"3"==o||"4"==o)if(t.length<=7);else{var a=t.substring(0,7);a=parseInt(a),e.datos.TER_INST_TELF=a,sweetAlert("Error en Teléfono","Verifique que el telefono empiece con 2-3-4 y tenga 7 dígitos")}else e.datos.TER_INST_TELF=null,sweetAlert("Error en Teléfono","El primer digito debe comenzar con 2-3-4 Ej. 2237732 o 3225541 o 4124511")},e.validarTelf=function(_){var t=_.toString(),o=t.substring(0,1);if("2"==o||"3"==o||"4"==o)if(t.length<=7);else{var a=t.substring(0,7);a=parseInt(a),e.model.selected.f01_NNA_TER_TEL=a,sweetAlert("Error en Teléfono","Verifique que el telefono empiece con 2-3-4 y tenga 7 dígitos")}else e.model.selected.f01_NNA_TER_TEL=null,sweetAlert("Error en Teléfono","El primer digito debe comenzar con 2-3-4 Ej. 2237732 o 3225541 o 4124511")},e.validarCell=function(_){var t=_.toString(),o=t.substring(0,1);if("7"==o||"6"==o)if(t.length<=8);else{var a=t.substring(0,8);a=parseInt(a),e.model.selected.f01_NNA_G_TELF=a,sweetAlert("Error en Celular","Verifique que el celular empiece con 6-7 y tenga 8 dígitos")}else e.model.selected.f01_NNA_G_TELF=null,sweetAlert("Error en Celular","Verifique que el celular empiece con 6-7 y tenga 8 dígitos")},e.validarTelfA=function(_){var t=_.toString(),o=t.substring(0,1);if("2"==o||"3"==o||"4"==o)if(t.length<=7);else{var a=t.substring(0,7);a=parseInt(a),e.modelResp.selectedR.f01_ADUL_TER_TEL=a,sweetAlert("Error en Teléfono","Verifique que el telefono empiece con 2-3-4 y tenga 7 dígitos")}else e.modelResp.selectedR.f01_ADUL_TER_TEL=null,sweetAlert("Error en Teléfono","El primer digito debe comenzar con 2-3-4 Ej. 2237732 o 3225541 o 4124511")},e.validarCellA=function(_){var t=_.toString(),o=t.substring(0,1);if("7"==o||"6"==o)if(t.length<=8);else{var a=t.substring(0,8);a=parseInt(a),e.modelResp.selectedR.f01_ADUL_G_TELF=a,sweetAlert("Error en Celular","Verifique que el celular empiece con 6-7 y tenga 8 dígitos")}else e.modelResp.selectedR.f01_ADUL_G_TELF=null,sweetAlert("Error en Celular","Verifique que el celular empiece con 6-7 y tenga 8 dígitos")},e.reset=function(){e.model.selected={}},e.modelResp={TER_RESP:[],selectedR:{}},e.getTemplateResp=function(_){return e.modelResp.TER_RESP=e.ninosviajanA.TER_RESP,_.id===e.modelResp.selectedR.id?"editR":"displayR"},e.editresp=function(_){e.modelResp.selectedR=angular.copy(_)},e.saveresp=function(_){var o=e.modelResp.selectedR.f01_ADUL_TIP_DOC,a=e.modelResp.selectedR.f01_ADUL_G_CI,l=e.modelResp.selectedR.f01_ADUL_EXP_CIUD,d=e.modelResp.selectedR.f01_ADUL_G_NOM,A=(e.modelResp.selectedR.f01_NNA_G_APAT,e.modelResp.selectedR.f01_NNA_G_AMAT,e.modelResp.selectedR.f01_ADUL_G_FEC_NAC),i=e.modelResp.selectedR.f01_ADUL_G_GEN,N=(e.model.selected.f01_ADUL_DIR,e.model.selected.f01_ADUL_G_VA,e.modelResp.selectedR.f01_ADUL_TER_CIUD),r=e.modelResp.selectedR.f01_ADUL_G_VA,s=e.modelResp.selectedR.f01_ADUL_G_PARE_COND;if(""==o||""==a||""==l||""==d||""==A||""==i||void 0===N||void 0===r||void 0===s)sweetAlert("","Complete Todos Los Datos de las casillas rojas que son obligatorias","error");else{if(e.modelResp.selectedR.f01_ADUL_G_FEC_NAC.length>0||(fec12345679=new Date(e.modelResp.selectedR.f01_ADUL_G_FEC_NAC),fec12345679.getDate()<10?dia="0"+fec12345679.getDate():dia=fec12345679.getDate(),mes=fec12345679.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaNacOficial=fec12345679.getFullYear()+"-"+mes+"-"+dia,e.modelResp.selectedR.f01_ADUL_G_FEC_NAC=fechaNacOficial),"CI"==e.modelResp.selectedR.f01_ADUL_TIP_DOC)if(e.modelResp.selectedR.f01_ADUL_F_CADUC_CI.length>0||(fec12345679=new Date(e.modelResp.selectedR.f01_ADUL_F_CADUC_CI),fec12345679.getDate()<10?dia="0"+fec12345679.getDate():dia=fec12345679.getDate(),mes=fec12345679.getMonth()+1,mes<10?mes="0"+mes:mes=mes,fechaNacOficial=fec12345679.getFullYear()+"-"+mes+"-"+dia,e.modelResp.selectedR.f01_ADUL_F_CADUC_CI=fechaNacOficial),document.getElementById("f01_ADUL_ANVERSO_G_ARCH").value&&document.getElementById("f01_ADUL_REVERSO_G_ARCH").value){var c=document.getElementById("f01_ADUL_ANVERSO_G_ARCH");if(void 0===c.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(c.files[0],e.direccionvirtual);e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH=e.direccionvirtual+c.files[0].name+"?app_name=todoangular"}var c=document.getElementById("f01_ADUL_REVERSO_G_ARCH");if(void 0===c.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(c.files[0],e.direccionvirtual);e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH=e.direccionvirtual+c.files[0].name+"?app_name=todoangular"}e.modelResp.selectedR.f01_ADUL_O_ADJ_G_ARCH_CN="0",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH_DNI="0",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH_DNI="0",e.modelResp.TER_RESP[_]=angular.copy(e.modelResp.selectedR),e.resetresp(),e.ninosviajanA.TER_RESP=e.modelResp.TER_RESP}else e.modelResp.TER_RESP[_]=angular.copy(e.modelResp.selectedR),e.resetresp(),e.ninosviajanA.TER_RESP=e.modelResp.TER_RESP;if("DN"==e.modelResp.selectedR.f01_ADUL_TIP_DOC)if(document.getElementById("f01_ADUL_ANVERSO_G_ARCH_DNI").value&&document.getElementById("f01_ADUL_REVERSO_G_ARCH_DNI").value){t.OIDtemp=e.modelResp.selectedR.f01_ADUL_G_CI;var c=document.getElementById("f01_ADUL_ANVERSO_G_ARCH_DNI");if(void 0===c.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(c.files[0],e.direccionvirtual);e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH_DNI=e.direccionvirtual+c.files[0].name+"?app_name=todoangular"}var c=document.getElementById("f01_ADUL_REVERSO_G_ARCH_DNI");if(void 0===c.files[0]);else{e.direccionvirtual=n.APIURL+"/files/RC_CLI/"+t.OIDtemp+"/";I.uploadFileToUrl(c.files[0],e.direccionvirtual);e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH_DNI=e.direccionvirtual+c.files[0].name+"?app_name=todoangular"}e.modelResp.selectedR.f01_ADUL_O_ADJ_G_ARCH_CN="0",e.modelResp.selectedR.f01_ADUL_ANVERSO_G_ARCH="0",e.modelResp.selectedR.f01_ADUL_REVERSO_G_ARCH="0",e.modelResp.TER_RESP[_]=angular.copy(e.modelResp.selectedR),e.resetresp(),e.ninosviajanA.TER_RESP=e.modelResp.TER_RESP}else e.modelResp.TER_RESP[_]=angular.copy(e.modelResp.selectedR),e.resetresp(),e.ninosviajanA.TER_RESP=e.modelResp.TER_RESP;e.$evalAsync()}},e.guardarArchivo=function(_){if(nombreCampo=_.id,valorCampo=_.value,tipo=_.type,data='"{',void 0===_.files)e.direccionvirtual=n.APIURL+"/files/"+e.sIdProcesoActual+"/"+e.sIdCaso+"/",data=data+'"'+nombreCampo+'":"'+e.direccionvirtual+_.name+'?app_name=todoangular",';else{e.direccionvirtual=n.APIURLIF+"/files/SCANNER/"+A.get("CICIUDADANO")+"/";var t=(I.uploadFileToUrl(_.files[0],e.direccionvirtual),valorCampo.split("\\"));void 0===t[2]?data=data+'"'+nombreCampo+'":"'+e.direccionvirtual+valorCampo+'?app_name=todoangular",':data=data+'"'+nombreCampo+'":"'+e.direccionvirtual+t[2]+'?app_name=todoangular",'}return data},e.resetresp=function(){e.modelResp.selectedR={}},e.VerificarCapchaaViajes=function(_){void 0==e.modelResp.selectedR.f01_ADUL_G_CI&&void 0==e.model.selected.f01_NNA_G_CI?void 0==e.ninosviajan.TER_NNA_VIAJAN&&void 0==e.ninosviajanA.TER_RESP?sweetAlert("DATOS","Debe llenar los datos de los niños(as) que viajan y de los adultos viajan/acompañan"):(e.serializarInfViajes(_),e.habilitarEnvioTramite(_)):sweetAlert("GUARDAR","Debe guardar los datos de los niños(as) que viajan y de los adultos viajan/acompañan con el BOTON GUARDAR")},e.bloquearForm=function(){e.desabilitado=!0},e.desBloquearForm=function(){e.desabilitado=!1},e.cambioServicio=function(_){e.servicio=_},e.combo="<select id='servicio' class='seleccionaServicio'>  <option value='1'>Internet</option> <option value='3'>Salud</option> <option value='4'>Publicidad</option> </select> <br>";try{$("body").removeClass("modal-open"),$(".modal-backdrop").remove()}catch(e){console.log("Error en Body modal-open",e)}}),app.directive("confirmButton",function(e,_){return{restrict:"A",link:function(t,o,a){var l,d,A,n,i,N;return l=Math.floor(1e10*Math.random()),a.buttonId=l,A=a.message||"Are you sure?",N=a.yes||"Yes",n=a.no||"No",i=a.title||"Crear nuevo tramite",d="<div style='width:190px;' id=\"button-"+l+'">\n '+t.combo+'<span class="confirmbutton-msg">'+A+"</span><br>\n   <button ng-disabled='frmServicio.$invalid' data-dismiss='modal' class=\"confirmbutton-yes btn btn-success\">"+N+'</button>\n    <button class="confirmbutton-no btn btn-danger">'+n+"</button> \n</div>",o.popover({content:d,html:!0,trigger:"manual",title:i}),o.bind("click",function(d){var A,n;A=!0,d.stopPropagation(),o.popover("show"),n=$("#button-"+l),n.closest(".popover").click(function(e){A&&e.stopPropagation()}),n.find(".seleccionaServicio").change(function(e){
t.cambioServicio(servicio.value)}),n.find(".confirmbutton-yes").click(function(e){A=!1;var o=_(a.confirmButton);o(t)}),n.find(".confirmbutton-no").click(function(_){A=!1,e.off("click.confirmbutton."+l),o.popover("hide")}),e.on("click.confirmbutton."+l,":not(.popover, .popover *)",function(){e.off("click.confirmbutton."+l),o.popover("hide")})})}}});