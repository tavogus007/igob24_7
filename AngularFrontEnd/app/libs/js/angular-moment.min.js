"format global";"deps angular";"deps moment";!function(){"use strict";function e(e,n){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null}).constant("moment",n).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(n,t,o,r,a){return function(i,m,u){function f(){var e;if(r.serverTime){var n=(new Date).getTime()-M+r.serverTime;e=t(n)}else e=t();return e}function l(){v&&(n.clearTimeout(v),v=null)}function s(e){if(m.text(e.from(f(),T)),w&&!m.attr("title")&&m.attr("title",e.local().format(w)),!$){var t=Math.abs(f().diff(e,"minute")),o=3600;t<1?o=1:t<60?o=30:t<180&&(o=300),v=n.setTimeout(function(){s(e)},1e3*o)}}function c(e){x&&m.attr("datetime",e)}function d(){if(l(),p){var e=o.preprocessDate(p,z,h);s(e),c(e.toISOString())}}var p,g,v=null,h=a.format,T=r.withoutSuffix,w=r.titleFormat,M=(new Date).getTime(),z=a.preprocess,D=u.amTimeAgo.replace(/^::/,""),$=0===u.amTimeAgo.indexOf("::"),x="TIME"===m[0].nodeName.toUpperCase();g=i.$watch(D,function(e){if(void 0===e||null===e||""===e)return l(),void(p&&(m.text(""),c(""),p=null));p=e,d(),void 0!==e&&$&&g()}),e.isDefined(u.amWithoutSuffix)&&i.$watch(u.amWithoutSuffix,function(e){"boolean"==typeof e?(T=e,d()):T=r.withoutSuffix}),u.$observe("amFormat",function(e){void 0!==e&&(h=e,d())}),u.$observe("amPreprocess",function(e){z=e,d()}),i.$on("$destroy",function(){l()}),i.$on("amMoment:localeChanged",function(){d()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(n,t,o,r){var a=this;this.preprocessors={utc:n.utc,unix:n.unix},this.changeLocale=function(o){var r=(n.locale||n.lang)(o);return e.isDefined(o)&&(t.$broadcast("amMoment:localeChanged"),t.$broadcast("amMoment:languageChange")),r},this.changeLanguage=function(e){return o.warn("angular-moment: Usage of amMoment.changeLanguage() is deprecated. Please use changeLocale()"),a.changeLocale(e)},this.preprocessDate=function(t,a,i){return e.isUndefined(a)&&(a=r.preprocess),this.preprocessors[a]?this.preprocessors[a](t,i):(a&&o.warn("angular-moment: Ignoring unsupported value for preprocess: "+a),!isNaN(parseFloat(t))&&isFinite(t)?n(parseInt(t,10)):n(t,i))},this.applyTimezone=function(e){var n=r.timezone;return e&&n&&(e.tz?e=e.tz(n):o.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),e}}]).filter("amCalendar",["moment","amMoment",function(e,n){return function(t,o){if(void 0===t||null===t)return"";t=n.preprocessDate(t,o);var r=e(t);return r.isValid()?n.applyTimezone(r).calendar():""}}]).filter("amDateFormat",["moment","amMoment",function(e,n){return function(t,o,r){if(void 0===t||null===t)return"";t=n.preprocessDate(t,r);var a=e(t);return a.isValid()?n.applyTimezone(a).format(o):""}}]).filter("amDurationFormat",["moment",function(e){return function(n,t,o){return void 0===n||null===n?"":e.duration(n,t).humanize(o)}}]).filter("amTimeAgo",["moment","amMoment",function(e,n){return function(t,o,r){if(void 0===t||null===t)return"";t=n.preprocessDate(t,o);var a=e(t);return a.isValid()?n.applyTimezone(a).fromNow(r):""}}])}"function"==typeof define&&define.amd?define("angular-moment",["angular","moment"],e):"undefined"!=typeof module&&module&&module.exports?e(angular,require("moment")):e(angular,window.moment)}();