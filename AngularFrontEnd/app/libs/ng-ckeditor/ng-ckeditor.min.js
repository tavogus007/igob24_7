"use strict";(function(e,t){return"function"==typeof define&&define.amd?void define(["angular","ckeditor"],function(e){return t(e)}):t(e)})(angular||null,function(e){var t,n=e.module("ngCkeditor",[]),i=!1;return n.run(["$q","$timeout",function(n,o){function a(){"loaded"===CKEDITOR.status?(i=!0,t.resolve()):a()}if(t=n.defer(),e.isUndefined(CKEDITOR))throw new Error("CKEDITOR not found");CKEDITOR.disableAutoInline=!0,CKEDITOR.on("loaded",a),o(a,100)}]),n.directive("ckeditor",["$timeout","$q",function(n,o){return{restrict:"AC",require:["ngModel","^?form"],scope:!1,link:function(a,r,u,s){var l=s[0],d=s[1]||null,c="<p></p>",m="textarea"===r[0].tagName.toLowerCase(),f=[],C=!1;m||r.attr("contenteditable",!0);var p=function(){var t={toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},"/",{name:"styles",items:["Format","FontSize","TextColor","PasteText","PasteFromWord","RemoveFormat"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:!1,uiColor:"#FAFAFA",height:"400px",width:"100%"};t=e.extend(t,a[u.ckeditor]);var i=m?CKEDITOR.replace(r[0],t):CKEDITOR.inline(r[0],t),s=o.defer();r.bind("$destroy",function(){i&&CKEDITOR.instances[i.name]&&CKEDITOR.instances[i.name].destroy()});var p=function(e){var t=i.getData();""===t&&(t=null),n(function(){e===!0&&t===l.$viewValue||l.$setViewValue(t),e===!0&&d&&d.$setPristine()},0)},k=function(e){if(f.length){var t=f.pop()||c;C=!1,i.setData(t,function(){p(e),C=!0})}};i.on("change",p),i.on("blur",p),i.on("instanceReady",function(){a.$broadcast("ckeditor.ready"),a.$apply(function(){k(!0)}),i.document.on("keyup",p)}),i.on("customConfigLoaded",function(){s.resolve()}),l.$render=function(){f.push(l.$viewValue),C&&k()}};"loaded"===CKEDITOR.status&&(i=!0),i?p():t.promise.then(p)}}}]),n});