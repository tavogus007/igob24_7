<style>
    /*para quitar las flechas en buscador*/
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button
    {
        -webkit-appearance: none;
        margin: 0;
    }
    input[type=number] {
        -moz-appearance: textfield;
    }
    .img1{
        position: absolute;
        top:  65%;
        left: 45%;
    }
    {box-sizing: border-box;}
    .pdf-controls { width: 100%; display: block; background: #eee; padding: 1em;}
    .rotate0 {-webkit-transform: rotate(0deg); transform: rotate(0deg); }
    .rotate90 {-webkit-transform: rotate(90deg); transform: rotate(90deg); }
    .rotate180 {-webkit-transform: rotate(180deg); transform: rotate(180deg); }
    .rotate270 {-webkit-transform: rotate(270deg); transform: rotate(270deg); }
    .fixed { position: fixed; top: 0; left: calc(50% - 480px); z-index: 100; width: 100%; padding: 1em; background: rgba(238, 238, 238,.9); width: 960px; }
    /*si necesitas que sea responsive*/
    canvas {
        width: 100%;
        height: auto;
    }



    #caja {
        display: block;
    }
    #mostrar{
        display:block;
    }
    #cerrar_rc{
        position: absolute;
        top: 5px;
        left: 92%;
        font-size: 38px;
        color: #FFCB05 !important;
    }

    /*ESTILOS PROPIOS DE CODIGO CAPTCHA*/
    .ejemplo3 {
        background-color: #6F7072;

        color: #6F7072;
        margin: 1px auto;
        padding: 4px;
        text-align: center;
        width: 350px;
    }
    
    input:required:invalid {
        border: 1px solid red;
    }
    input:required:valid {
        border: 1px solid green;
    }
    select:required:invalid {
        border: 1px solid red;
    }
    select:required:valid {
        border: 1px solid green;
    }
    .form-group {
        padding-left: 8px;
    }
    .box2{
        display: inline-block;
        width: 190px;
        margin: 2px;
    }
    input[type=radio] {
        border: 0px;
        width: 16px;
        height: 16px;
    }

    ul {
        list-style: initial ! important;
    }

    .lblAdvertencia{
        font-weight: bold;
        color: red;
    }

    .btn-circle.btn-lg {
        width: 50px;
        height: 50px;
        padding: 12px 16px;
        border-radius: 25px;
        font-size: 18px;
        line-height: 1.33;
    }

    .alert-default {
        color: #bfc5c8;
        background-color: #f5f5f5;
        border-color: #dedede;
    }

    .sitv3TextBoxDisabled{
        padding: 10px;
        border: 1px;
        background-color: #f6f6f6;
        border-radius: 5px;
        width: 100%;
        text-align: center;
        font-weight: 500;
    }

    /*ESTILOS PROPIOS DE CODIGO CAPTCHA FIN*/
</style>
<script type="text/javascript" class="ng-scope">
    //$('#divPopup2').modal('show');
    $( document ).ready(function()
    {
        //$('#divPopup2').modal('show');
    });
</script>

<link href="../../libs/sit-map/OpenLayers-5.3.0/ol.css" rel="stylesheet" type="text/css" />
<link href="../../libs/sit-map/ol-ext/v3.1.0/ol-ext.css" rel="stylesheet" type="text/css" />
<link href="../../libs/sit-map/sitOL/sit-search.css" rel="stylesheet" type="text/css" />
<script src="../../libs/sit-map/OpenLayers-5.3.0/ol.js" type="text/javascript"></script>
<script src="../../libs/sit-map/ol-ext/v3.1.0/ol-ext.js" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/proj4.js"></script>
<script src="../../libs/sit-map/sitOL/sit-util.js" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/sit-codigocatastral.js" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/sit-search.js" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/sit-search-app.js" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/GridUtil.js" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/sit-scheme.js?v=20190510_1633" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/sit-layers.js?v=20190510_1633" type="text/javascript"></script>
<script src="../../libs/sit-map/sitOL/sit-mapa.js?v=20190510_1633" type="text/javascript"></script>




<div ng-controller="RegistrocatastralController" ng-init="inicio();">
    <div class="col-lg-12">
	    <div class="ibox float-e-margins">
           <div class="ibox-title" >
                <h3 ><strong>SOLICITUD DE CERTIFICADO DE REGISTRO CATASTRAL</strong></h3>
            </div>

            <!-- Bandeja -->
            <div ng-show="flujoSolicitud.paso =='bandeja'" class="ibox-content">
                <div>
                    <p>
                        Si desea solicitar un Certificado de Registro Catastral de su inmueble, presione el botón <strong>SOLICITAR REGISTRO CATASTRAL</strong>.
                        <br>
                        <!--Para m&aacute;s informaci&oacute;n presione el bot&oacute;n GU&Iacute;A DE TR&Aacute;MITE.-->
                    </p>
                </div>

                <div id="divBuscador" class="row" style="padding: 20px;">

                    <div class="col-md-3">
                        <button class="btn btn-success" ng-click="flujoSolicitud.acciones.inicio()" ><span></span>Solicitar Registro Catastral</button>
                    </div>
                    <div class="col-md-2">

                    </div>
                    <div class="col-md-2">
                        <!--<button class="btn btn-success" data-toggle="modal" data-target="#divPopup2" ng-click="cambiarImagen(0)"><span aria-hidden="true" title="Donde encontrar el c%oacute;digo catastral" ></span>Guía de trámite</button>-->
                    </div>
                    <div class="col-md-2">
                        <!--<button class="btn btn-success" data-toggle="modal" data-target="#divPopupLstCC" ><span aria-hidden="true"></span>Ver mis predios</button>-->
                    </div>
                    <div class="col-md-3"></div>
                </div>

                <div id= "mostrar" class="ibox-title">
                    <a  class="" ng-click="solicitudesCiudadano()"><h5>MIS TR&Aacute;MITES</h5></a>
                    &nbsp;&nbsp;
                    <button type="button" class="close" style="font-size:20px; color: #222831; opacity: 1 !important" ng-click="solicitudesCiudadano()"><span class="fa fa-refresh fa-spin" title="Actualizar"></span></button><!--Cambios-->
                </div>
                <div class="ibox-content" >
                    <div>
                        <div class="panel ">
                            <table  ng-table="tblSolicitudes"  class="table table-striped">
                                <tr ng-repeat="sol in $data  | filter:query " ng-style="solicitud.idEstado === '5' && {'background-color':'#fdeedc'} || solicitud.idEstado === '2' && {'background-color':'#ccf5f6'} || solicitud.idEstado === '4' && {'background-color':'#f8c7db'}" >
                                    <td data-title="'Nro. Solicitud'" >{{sol.idCatastroTramiteOL}}</td>
                                    <td data-title="'Código Catastral'" sortable="'codigoCatastral'">{{sol.codigoCatastral | FormatoSercat}}</td>
                                    <td data-title="'Fecha de registro'" sortable="'fechaRegistro'" >{{sol.fechaRegistro}} </td>
                                    <td data-title="'Profesional Externo'" sortable="'profesionalNombre'" >{{sol.profesionalNombre}}</td>
                                    <td data-title="'Estado'" sortable="'estado'" >{{sol.estado}}</td>
                                    <td data-title="'Acciones'">
                                        <div id="divAcciones{{solicitud.IdRegistro}}"  >
                                            <button class="btn btn-warning" ng-show="VerificarDespliegueFUM(solicitud)" data-toggle="modal" data-target="#divPopup4" ng-click="ImprimirProforma(solicitud.f)"><span class="glyphicon glyphicon-print" aria-hidden="true" title="Imprimir proforma de pago" ></span> Imprimir Proforma de Pago (FUM)</button>
                                            <button class="btn btn-warning" ng-show="VerificarDespliegueEpago(solicitud)" ng-click="continuarPagoOL(solicitud)"><span class="glyphicon glyphicon-usd" aria-hidden="true" title="Imprimir proforma de pago" ></span> Continuar pago en línea</button>
                                            <button class="btn btn-info" ng-show="VerificarDespliegueCC(solicitud)" data-toggle="modal" data-target="#divPopup7" ng-click="DeplegarDpl(solicitud)"><span class="glyphicon glyphicon-print" aria-hidden="true" title="Imprimir Certificado" ></span> Imprimir Duplicado del Certificado</button>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Paso 1 - Seleccion de predio -->
            <div ng-show="flujoSolicitud.paso =='seleccionPredio'" class="ibox-content">
                <div>
                    <div class="row">
                        <div class="col-sm-8">
                            <div style="padding: 12px;">
                                <!--<div class="btn-primary btn-circle btn-lg">1<span style="font-size: 12px; ">er</span></div> Paso-->
                                <button type="button" class="btn btn-primary btn-circle btn-lg">1<span style="font-size: 12px;">er.</span></button> <strong style="font-size: 15px;">&nbsp;Paso. </strong> Ubicación del predio
                            </div>
                        </div>
                        <div class="col-sm-4" style="    padding: 12px;text-align: right;" >
                            <button type="button" class="btn btn-info" ng-click="flujoSolicitud.acciones.cancelar()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-sm-6" style="cursor: pointer" ng-click="flujoSolicitud.opcionSeleccionPredio = 'A'">
                            <div class="alert " ng-class="{'alert-info': flujoSolicitud.opcionSeleccionPredio == 'A','alert-default':flujoSolicitud.opcionSeleccionPredio != 'A' }">
                                <strong>Opción A: </strong> Puede seleccionar uno de sus predios de la lista que sigue.
                            </div>
                        </div>
                        <div class="col-sm-6" style="cursor: pointer" ng-click="flujoSolicitud.opcionSeleccionPredio = 'B'">
                            <div class="alert " ng-class="{'alert-info': flujoSolicitud.opcionSeleccionPredio == 'B','alert-default':flujoSolicitud.opcionSeleccionPredio != 'B' }">
                                <strong>Opción B: </strong> Puede buscar el predio según los siguientes filtros:
                            </div>
                        </div>
                    </div>
                    <div ng-show="flujoSolicitud.opcionSeleccionPredio == 'A'">
                        <table class="table table-striped table-hover">
                            <tr>
                                <th></th>
                                <th>C&oacute;digo Catastral</th>
                                <th>Zona</th>
                                <th>Direcci&oacute;n</th>
                            </tr>
                            <tr ng-repeat="cc in predio.lista">
                                <td><button class="btn btn-success" tooltip="Seleccionar" ng-click="predio.acciones.verificarTramiteEnProceso(cc.CodigoCatastral)"><span class="glyphicon glyphicon-ok"> Seleccionar</span></button></td>
                                <td width="150px">{{cc.CodigoCatastral | FormatoSercat}}</td>
                                <td>{{cc.Zona}}</td>
                                <td>{{cc.Direccion}}</td>
                            </tr>
                        </table>
                    </div>

                    <div ng-show="flujoSolicitud.opcionSeleccionPredio == 'B'">
                        <div id="results">

                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="alert alert-warning">
                                    <label>Buscar en zona referencial.</label><br>
                                    <span>Introduzca el nombre de la zona.</span>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Zona donde se encuentra el predio" ng-model="busZona">
                                        <div class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="mapa.acciones.buscarZona(busZona)">
                                                <i class="glyphicon glyphicon-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <span style="padding: 2px">Ej.: miraflores</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="alert alert-warning">
                                    <label>Buscar por código catastral.</label><br>
                                    <span>Introduzca el Código Catastral del predio.</span>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Código Catastral">
                                        <div class="input-group-btn">
                                            <button class="btn btn-default" type="button">
                                                <i class="glyphicon glyphicon-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <span style="padding: 2px">Ej.: 1-2-3, 001-0002-0003-0000, 001000200030004</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="alert alert-warning">
                                    <label>Buscar por dirección.</label><br>
                                    <span>Introduzca la dirección del predio.</span>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Dirección del predio">
                                        <div class="input-group-btn">
                                            <button class="btn btn-default" type="button">
                                                <i class="glyphicon glyphicon-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <span style="padding: 2px">Ej.: Ej: Sucre # 100, calle &quot;23&quot; # 15*</span>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="padding-bottom: 10px;">
                            <div class="col-sm-4"></div>
                            <div class="col-sm-4">
                                <div class="btn-group btn-group-justified">
                                    <a class="btn btn-success" ng-click="mapa.acciones.marcar()">Marcar predio</a>
                                    <a class="btn btn-default" ng-click="mapa.acciones.cancelar()">Cancelar marcar predio</a>
                                </div>
                            </div>
                            <div class="col-sm-4"></div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <div >
                                    <div id="map" style="border-radius: 10px; border: 1px solid #ccc;width: 100%;height: 500px;">  </div>
                                    <div style="position: relative;">
                                        <div id="escala_txt"> </div>
                                        <div id="coords_txt" style="float: right"> </div>
                                    </div>
                                    <div id="wmsinfo"> </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Paso 2 - Delegacion a profesional -->
            <div ng-show="flujoSolicitud.paso =='delegacionProfesional'" class="ibox-content">
                <div>
                    <div class="row">
                        <div class="col-sm-8">
                            <div style="padding: 12px;">
                                <button type="button" class="btn btn-primary btn-circle btn-lg">2<span style="font-size: 12px;">do.</span></button> <strong style="font-size: 15px;">&nbsp;Paso. </strong>Delegar solicitud a profesional externo
                            </div>
                        </div>
                        <div class="col-sm-4" style="    padding: 12px;text-align: right;" >
                            <button type="button" class="btn btn-info" ng-click="flujoSolicitud.acciones.atras('seleccionPredio')"><span class="glyphicon glyphicon-chevron-left"></span> Atrás</button>
                            &nbsp;
                            <button type="button" class="btn btn-info" ng-click="flujoSolicitud.acciones.cancelar()"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
                        </div>
                    </div>


                    <div>
                        <div >
                            <h4>PREDIO SELECCIONADO</h4>
                        </div>
                        <div class="ibox-content">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group"  >
                                        <label>Código Catastral</label>
                                        <div class="controls">
                                            <label class="sitv3TextBoxDisabled">{{solicitud.codigoCatastral | FormatoSercat}}</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label>Zona</label>
                                        <div class="controls" >
                                            <label class="sitv3TextBoxDisabled">{{solicitud.zona}}</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Dirección</label>
                                        <div class="controls">
                                            <label class="sitv3TextBoxDisabled">Av/c. {{solicitud.direccion}} # {{solicitud.nroPuerta}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </div>
                    </div>

                    <div>
                        <div >
                            <h4>DATOS PROFESIONAL EXTERNO</h4>
                        </div>
                        <div class="ibox-content">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group" class="col-md-12">
                                        <label>Registro Nacional CAB</label>
                                        <div class="controls">
                                            <div class="input-group" ng-class="{'has-error': frmSolicitud.cab.$error.required }">
                                                <input type="text" class="form-control" ng-model="solicitud.profesionalCab" placeholder="Buscar por Registro CAB" name="cab" required>
                                                <div class="input-group-btn">
                                                    <button type="button" class="btn btn-info" title="Buscar profesional externo" data-toggle="modal" data-target="#divPopupListaArquitectos">
                                                        <span class="glyphicon glyphicon-search"></span> Buscar profesional externo
                                                    </button>
                                                </div>
                                            </div>
                                            <span class="help-block" style="color:red" ng-if="frmSolicitud.cab.$error.required">Requerido.</span>
                                        </div>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="col-md-12" align="left">
                                        <div class="form-group" class="col-md-12">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <form name = "frmSolicitud">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group"  >
                                            <label>Nombre del Profesional</label>
                                            <div class="controls" ng-class="{'has-error': frmSolicitud.arquitecto.$error.required }">
                                                <input  ng-model="solicitud.profesionalNombre" class="form-control" type="text" name="arquitecto" required>
                                            </div>
                                            <span class="help-block" style="color:red" ng-if="frmSolicitud.arquitecto.$error.required">Requerido.</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Teléfono Celular</label>
                                            <div class="controls" ng-class="{'has-error': frmSolicitud.arquitectoFono.$error.required }">
                                                <input  ng-model="solicitud.profesionalTelefono" class="form-control" type="text" name="arquitectoFono" required>
                                            </div>
                                            <span class="help-block" style="color:red" ng-if="frmSolicitud.arquitectoFono.$error.required">Requerido.</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label>Correo Electrónico</label>
                                            <div class="controls" ng-class="{'has-error': frmSolicitud.email.$error.required }">
                                                <input  ng-model="solicitud.profesionalEmail" class="form-control" type="email" name="email" required>
                                            </div>
                                            <span class="help-block" style="color:red" ng-if="frmSolicitud.email.$error.required">Requerido.</span>
                                            <span class="help-block" style="color:red" ng-if="frmSolicitud.email.$invalid">Formato no valido.</span>

                                        </div>
                                    </div>

                                </div>
                            </form>


                        </div>

                    </div>

                    <div class="row">
                        <div class="col-sm-12" style="    padding: 12px;text-align: right;" ng-show="solicitud.wkt !=null && frmSolicitud.$valid " >
                            <button type="button" class="btn btn-info" ng-click="solicitud.acciones.guardarEnviar()"><span class="glyphicon glyphicon-envelope"></span> Delegar soliditud al profesional externo</button>
                        </div>
                    </div>

                </div>

            </div>

        </div>
    </div>


    <!-- Modal : Lista Arquitectos-->
    <div id="divPopupListaArquitectos" class="modal fade" tabindex="-1" data-focus-on="input:first" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">Lista de Profesionales</h3>
                </div>
                <div class="modal-body">
                    <form name="searchForm" >
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Ingrese el nombre del profesional o Nro. CAB" name="searchTerm" ng-model="profesinalExterno.filtro" required=required ng-keyup="profesinalExterno.acciones.filtrar()"/>
                            <span class="input-group-btn">
                                <!--
                                  <button class="btn btn-info " type="submit" ng-disabled="searchForm.$invalid" title="Buscar">
                                      <span class="glyphicon glyphicon-search"></span>
                                  </button>
                                  -->
                                  <button class="btn btn-info " ng-click="profesinalExterno.acciones.limpiarFiltro()" title="Limpiar">
                                      <span class="glyphicon glyphicon-remove" ></span>.
                                  </button>
                            </span>
                        </div>
                    </form>
                    <br>
                    <table  ng-table="tblProfesionalExterno"  class="table table-striped" show-filter="false" >
                        <tr ng-repeat="arqui in $data "  >
                            <td data-title="'Nombre Arquitecto'" sortable="'arquitectoNombre'" filter="{'arquitectoNombre':'text'}">{{arqui.arquitectoNombre}}</td>
                            <td data-title="'Registro Nacional CAB'" sortable="'registroNacionalCAB'" filter="{'registroNacionalCAB':'text'}">{{arqui.registroNacionalCAB}}</td>
                            <td data-title="'Teléfono'" sortable="'telefonoCelular'" filter="{'telefonoCelular':'text'}">{{arqui.telefonoCelular}}</td>
                            <td data-title="'Correo Electrónico'" sortable="'correoElectronico'" filter="{'correoElectronico':'text'}">{{arqui.correoElectronico}}</td>
                            <td data-title="'Acciones'">
                                <div   >
                                    <button class="btn btn-info" data-dismiss="modal" ng-click="profesinalExterno.acciones.seleccionar(arqui)">Seleccionar</button>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal : Mensaje maatriz habilitada-->
    <div id="divPopupMatrizHabilitada" class="modal fade" tabindex="-1" data-focus-on="input:first" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">Edificio Habilitado</h3>
                </div>
                <div class="modal-body">
                    Sr. Usuario el edificio ya se encuentra habilitado en el sistema catastral, motivo por el cual usted puede realizar su registro de manera directa a través del Servicio Municipal de Catastro, apersonándose a las plataformas de atención al ciudadano.
                    <br><br>
                    Plataforma Integral de Atención al Ciudadano:<br><br>
                    <ul>
                        <li>“PIAC CAMACHO”, ubicado en el Mercado Camacho, Sub Suelo 1 (avenida Libertador Simón Bolívar esquina calle Bueno); en oficinas de la Plataforma Integral de Atención al Ciudadano</li>
                        <li>“PIAC MIRAFLORES”, ubicada en el edificio “Torre Vicenta” (avenida Argentina esquina calle Díaz Romero de la zona Miraflores); o en oficinas de la Plataforma Integral de Atención al Ciudadano</li>
                        <li>“PIAC SUR”, ubicado en el edificio “Atlanta” (avenida Ballivian entre las calles 13 y 14 de la zona Calacoto)</li>
                    </ul>
                    <br>
                    Adjuntando los siguientes requisitos:<br><br>
                    <ul>
                        <li>Tarjeta de propiedad o folio real</li>
                        <li>Testimonio de propiedad</li>
                        <li>Cédula de identidad de los propietarios</li>
                        <li>Boleta de impuestos</li>
                        <li>Fotografías de la fachada</li>
                        <li>Planos  de fraccionamiento de la Unidad (de no contar puede apersonarse a solicitar fotocopia legalizada en la plataforma de la UADT ubicada en planta baja del edificio Tobia)</li>
                    </ul>







                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>


</div>




