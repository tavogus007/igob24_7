function pagosLineaController(a,o,e,d,t,n,s,i,r){a.btnPagarForm=!0,a.sDatosCompletos=!1,a.datosCiudadano=[],a.master={};var u="";a.generarPagoLinea=function(o){a.master=angular.copy(o);var e={usr_usuario:"tecnico",usr_clave:"123456"};$.ajax({dataType:"json",type:"POST",url:"https://pagonline.lapaz.bo/api/logueo",data:e,async:!1,success:function(e){dataResp=JSON.stringify(e),a.obtenerFumDatos(o.idfum,e.token)},error:function(a,o,e){dataResp='{"error":{"message":"'+a.responseText+'","code":700}}'}})},a.obtenerFumDatos=function(){var o=t.get("IDFUM"),e=t.get("TOKEN"),d='Bearer <\\"'+e+'\\">',n={idfum:o};$.blockUI(),$.ajax({type:"POST",url:"https://pagonline.lapaz.bo/api/datosContribuyente",data:n,crossDomain:!0,headers:{authorization:d},success:function(o){var e=JSON.parse(o);if(console.log("MESAJE DE ERROR:",e.error),"undefined"==typeof e.error){o=JSON.parse(o[0]);var d=o.AcctotalGeneral;d=d.split(".");var t=d[0]+d[1];a.datosCiudadano.purchaseAmount=t,a.datosCiudadano.descriptionProducts=o.cabecera,a.datosCiudadano.reserved1=o.idFum,a.datosCiudadano.purchaseOperationNumber=o.secuencial,u=o.secuencial,a.$apply(),a.pagarWalletEnvio(a.datosCiudadano)}else swal("","Proforma pagada !!","error"),window.location.href="#dashboard",$("#messages").addClass("alert alert-success").append("<p>"+o.message+"</p>")},error:function(a,o,e){$.unblockUI(),alert("Error Intente de nuevo !!")}})},a.pagarWalletEnvio=function(o){var e=(t.get("IDFUM"),{identificacion:o.carnet_t,idfum:u,nombres:o.shippingFirstName,apellidos:o.shippingLastName,correo:o.shippingEmail,direccion:o.shippingAddress,total:o.purchaseAmount,cabecera:o.descriptionProducts}),d=t.get("TOKEN"),n='Bearer <\\"'+d+'\\">';$.ajax({type:"POST",url:"https://pagonline.lapaz.bo/api/consumoWalletEnvio",data:e,dataType:"json",crossDomain:!0,headers:{authorization:n},success:function(o){a.datosCiudadano.userCommerce=o.DatosCliente.identificacion,a.datosCiudadano.userCodePayme=o.ConsumoWallet.codAsoCardHolderWallet,a.datosCiudadano.purchaseVerification=o.DatosCliente.purchaseVerification,a.btnPagarForm=!1,a.$apply(),$.unblockUI(),o.success?$("#messages").addClass("alert alert-success").append("<p>"+o.message+"</p>"):a.deshabilitado=!1},error:function(a,o,e){$.unblockUI(),alert("Error Intente de nuevo !!")}})},a.iniciarData=function(){var o="",e="",d="",n="",s="",i="";o=a.dataCiudadano[0].dtspsl_nombres,e=a.dataCiudadano[0].dtspsl_paterno,d=a.dataCiudadano[0].dtspsl_materno,n=a.dataCiudadano[0].dtspsl_correo,s=a.dataCiudadano[0].dtspsl_zona_desc,i=a.dataCiudadano[0].dtspsl_ci,a.datosCiudadano.acquirerId="35",a.datosCiudadano.idCommerce="6935",a.datosCiudadano.purchaseAmount="",a.datosCiudadano.purchaseCurrencyCode="068",a.datosCiudadano.language="SP",a.datosCiudadano.shippingZIP="33",a.datosCiudadano.shippingCity="La Paz",a.datosCiudadano.shippingState="La Paz",a.datosCiudadano.shippingCountry="BO",a.datosCiudadano.userCommerce="",a.datosCiudadano.userCodePayme="",a.datosCiudadano.descriptionProducts="",a.datosCiudadano.programmingLanguage="PHP",a.datosCiudadano.reserved1="Prueba Reservado",a.datosCiudadano.purchaseVerification="",a.datosCiudadano.shippingAddress=a.dataCiudadano[0].dtspsl_zona_desc,a.datosCiudadano.segundo_apellido_t=a.dataCiudadano[0].dtspsl_materno,a.datosCiudadano.ci_expedido_t=a.dataCiudadano[0].dtspsl_expedido,"undefined"!=o&&"undefined"!=e&&"undefined"!=n&&"undefined"!=i&&""!=o&&""!=e&&""!=n&&""!=i?(a.datosCiudadano.purchaseOperationNumber=t.get("IDFUM"),a.datosCiudadano.shippingFirstName=a.dataCiudadano[0].dtspsl_nombres,a.datosCiudadano.shippingLastName=a.dataCiudadano[0].dtspsl_paterno,a.datosCiudadano.shippingEmail=a.dataCiudadano[0].dtspsl_correo,a.datosCiudadano.carnet_t=a.dataCiudadano[0].dtspsl_ci,a.sDatosCompletos=!0):(a.sDatosCompletos=!1,swal({title:"Editar Información",text:"Los datos personales son obligatorios, debe completar la información de su cuenta. Desea realizarlo en este instante ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"SI",closeOnConfirm:!1},function(){swal.close(),window.location.href="#registro_ciudadano|modificarRegistro"}))},a.pagarCertificado=function(){swal({title:"Pago en linea",text:"Esta seguro de realizar esta transacción ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"SI",closeOnConfirm:!1},function(){swal.close(),$('[name="frmVPOS2"]').submit(),window.location.href="#dashboard"})},a.$on("api:ready",function(){var o=t.get("IDCIUDADANO"),e=new rcNatural;e.oid=o,e.datosCiudadanoNatural(function(o){results=JSON.parse(o),a.dataCiudadano=results,a.iniciarData(),a.obtenerFumDatos()})}),a.iniciarDataCiudadano=function(){var o=t.get("IDCIUDADANO"),e=new rcNatural;e.oid=o,e.datosCiudadanoNatural(function(o){results=JSON.parse(o),a.dataCiudadano=results,a.iniciarData(),a.obtenerFumDatos()})}}