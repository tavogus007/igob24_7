<!DOCTYPE html>
<html lang="es" ng-app="myApp">

<head>
  <script src="../../libs/apiMov/api_mov.js"></script>
  <script src="../../libs/apiDeportes/apiDeportes.js"></script>
  <link href="../../libs/css/sweetalert.css" rel="stylesheet">  
  </link>
  <script src="../../libs/loading/loadingoverlay.js"></script>
  <script type="text/javascript" src="../../libs/js/sweetalert.min.js"></script>
  <script type="text/javascript" src="../../libs/js/ngSweetAlert.js"></script>


  <script type="text/javascript" src="../../libs/js/moment.js"></script>
  <script src="../../../app/view/servicios/varios/formularios/solicitudLotus/moustache/alertify/alertify.js"></script>
  <link rel="stylesheet"
    href="../../../app/view/servicios/varios/formularios/solicitudLotus/moustache/alertify/alertify.core.css" />
  <link rel="stylesheet"
    href="../../../app/view/servicios/varios/formularios/solicitudLotus/moustache/alertify/alertify.default.css"
    id="toggleCSS" />


  <script src="../../view/servicios/varios/formularios/camposDeportivos/alquileres.js"></script>



  <script type="text/javascript">
    $('#subirArchivo').change(function(e) {
        var id = 0;
        angular.element(this).scope().addImage(e,id);
    });
  </script> 
 

  <!--script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular.min.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/janantala/angular-qr/master/lib/qrcode.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/janantala/angular-qr/master/src/angular-qr.js" type="text/javascript"></script>
  <script src="script.js"></script-->  

</head>
<style>
  #caja {
    display: block;
  }

  #mostrar {
    display: block;
  }

  #cerrar_rc {
    position: absolute;
    top: 5px;
    left: 92%;
    font-size: 38px;
    color: #FFCB05 !important;
  }

  input:required:invalid {
    border: 1px solid red;
  }

  input:required:valid {
    border: 1px solid green;
  }

  select:required:invalid {
    border: 1px solid red;
  }

  select:required:valid {
    border: 1px solid green;
  }

  body {
    background: #ecf0f1;
  }

  .table1 th {
    background-color: #fff !important;
  }

  #cerrar_rc {
    position: absolute;
    top: 5px;
    left: 92%;
    font-size: 38px;
    color: #FFCB05 !important;
  }

  .accordion-titulo {
    position: relative;
    display: block;
    padding: 20px;
    font-size: 20px;
    font-weight: 300;
    background: #2c3e50;
    color: #fff;
    text-decoration: none;
  }

  .accordion-titulo.open {
    background: #16a085;
    color: #fff;
  }

  .accordion-titulo:hover {
    background: #1abc9c;
  }

  .accordion-titulo span.toggle-icon:before {
    content: "+";
  }

  .accordion-titulo.open span.toggle-icon:before {
    content: "-";
  }

  .accordion-titulo span.toggle-icon {
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 28px;
    font-weight: bold;
  }

  .tableE>thead>tr>th {
    border-bottom: 1px solid #FFFFE0;
    vertical-align: bottom;
    background: #FFEFD5;
    color: black;
  }

  .titulo {
    display: block;
    position: relative;
    padding-left: 35px;
    margin-bottom: 12px;
    cursor: pointer;
    font-size: 22px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* css pagos  */

  .img-link {
        width: 100%;
        border: 5px solid #f5f5f5;
        transition: all 0.5s ease;
        border-radius: 5px;
    }

    .img-link:hover {
        border: 5px solid #00ADB5;
    }

    .pay-link {
        width: 70%;
        margin: 0px auto;
        display: block;
    }

    .text-center-label {
        text-align: center;
        color: #000;
        display: block;
        font-size: 16px;
    }

    .advertencia {
      text-align: center;
      color: #0c72e7;
    }

  /* Hide the browser's default checkbox */
  .titulo input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
  }

  /* Create a custom checkbox */
  .checkmark {
    position: absolute;
    top: 0;
    left: 0;
    height: 25px;
    width: 25px;
    background-color: #eee;
  }

  /* On mouse-over, add a grey background color */
  .titulo:hover input~.checkmark {
    background-color: #ccc;
  }

  /* When the checkbox is checked, add a blue background */
  .titulo input:checked~.checkmark {
    background-color: #2196F3;
  }

  /* Create the checkmark/indicator (hidden when not checked) */
  .checkmark:after {
    content: "";
    position: absolute;
    display: none;
  }

  /* Show the checkmark when checked */
  .titulo input:checked~.checkmark:after {
    display: block;
  }

  /* Style the checkmark/indicator */
  .titulo .checkmark:after {
    left: 9px;
    top: 5px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 3px 3px 0;
    -webkit-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    transform: rotate(45deg);
  }

  p {
    /*size: 12;*/
    font-size: 16px;
  }

  .celda-seleccionado:hover {
    background: rgb(233, 233, 233);
  }

  .celda-select-user {
    background:url(check.png) #00acb556 no-repeat center !important;
    color: #00ADB5;

  }

  .btn-pagar {
    color: white !important;
    background: #00ADB5 !important;

  }

  .celda-tabla-bloc {
    background: #f5f5f5 !important;
    cursor: not-allowed !important;
  }

  .celda-reservado-bloc {
    background: #DB3030 !important;
    cursor: not-allowed !important;
  }

  .celda-sinrango-bloc {
    background: #f5f5f5 !important;
    cursor: not-allowed !important;
  }

  .celda-enproceso-bloc {
    background: #FEBF00 !important;
    cursor: not-allowed !important;
  }

  .celda-mantenimiento-bloc {
    background: #E8E8E8 !important;
    cursor: not-allowed !important;
  }

  .celda-actividad-bloc {
    background: #00B3BA !important;
    cursor: not-allowed !important;
  }

  .celda-masiva-bloc {
    background: #00C0EF !important;
    cursor: not-allowed !important;
  }

  .celda-reprogramacion-bloc {
    background: #A97F36 !important;
    cursor: not-allowed !important;
  }

  .celda-noDisponible-bloc {
    background: #6e4703 !important;
    cursor: not-allowed !important;
  }

  .loader-table-overlay {
    width: 100%;
    height: 700px;
    border-radius: 8px;
    border-collapse: separate;
    border: solid #cfcfcf 1px;
    overflow: hidden;
    padding-top: 310px;
    text-align: center;
  }

  .map {
    height: 410px;
    width: 100%;
  }

  .marker-gps {
    color: #ed1f1f;
    font-size: 30px;
  }

  .pin {
    width: 30px;
    height: 30px;
    border-radius: 50% 50% 50% 0;
    background: #fa1915;
    position: absolute;
    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    transform: rotate(-45deg);
    left: 50%;
    top: 50%;
    margin: -20px 0 0 -20px;
    -webkit-animation-name: bounce;
    -moz-animation-name: bounce;
    -o-animation-name: bounce;
    -ms-animation-name: bounce;
    animation-name: bounce;
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    -ms-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation-duration: 1s;
    -moz-animation-duration: 1s;
    -o-animation-duration: 1s;
    -ms-animation-duration: 1s;
    animation-duration: 1s;
  }

  .pin:after {
    content: "";
    width: 14px;
    height: 14px;
    margin: 8px 0 0 8px;
    background: #31E2F3;
    position: absolute;
    border-radius: 50%;
  }

  .pulse {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    height: 14px;
    width: 14px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin: 11px 0 0 -12px;
    -webkit-transform: rotateX(55deg);
    -moz-transform: rotateX(55deg);
    -o-transform: rotateX(55deg);
    -ms-transform: rotateX(55deg);
    transform: rotateX(55deg);

  }

  .pulse:after {
    content: "";
    border-radius: 50%;
    height: 40px;
    width: 40px;
    position: absolute;
    margin: -13px 0 0 -13px;
    -webkit-animation: pulsate 1s ease-out;
    -moz-animation: pulsate 1s ease-out;
    -o-animation: pulsate 1s ease-out;
    -ms-animation: pulsate 1s ease-out;
    animation: pulsate 1s ease-out;
    -webkit-animation-iteration-count: infinite;
    -moz-animation-iteration-count: infinite;
    -o-animation-iteration-count: infinite;
    -ms-animation-iteration-count: infinite;
    animation-iteration-count: infinite;
    opacity: 0;
    -webkit-box-shadow: 0 0 1px 2px #fa1a16;
    box-shadow: 0 0 1px 2px #fa1a16;
    -webkit-animation-delay: 1.1s;
    -moz-animation-delay: 1.1s;
    -o-animation-delay: 1.1s;
    -ms-animation-delay: 1.1s;
    animation-delay: 1.1s;
  }

  @-moz-keyframes pulsate {
    0% {
      -webkit-transform: scale(0.1, 0.1);
      -moz-transform: scale(0.1, 0.1);
      -o-transform: scale(0.1, 0.1);
      -ms-transform: scale(0.1, 0.1);
      transform: scale(0.1, 0.1);
      opacity: 0;
    }

    50% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
    }

    100% {
      -webkit-transform: scale(1.2, 1.2);
      -moz-transform: scale(1.2, 1.2);
      -o-transform: scale(1.2, 1.2);
      -ms-transform: scale(1.2, 1.2);
      transform: scale(1.2, 1.2);
      opacity: 0;
    }
  }

  @-webkit-keyframes pulsate {
    0% {
      -webkit-transform: scale(0.1, 0.1);
      -moz-transform: scale(0.1, 0.1);
      -o-transform: scale(0.1, 0.1);
      -ms-transform: scale(0.1, 0.1);
      transform: scale(0.1, 0.1);
      opacity: 0;
    }

    50% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
    }

    100% {
      -webkit-transform: scale(1.2, 1.2);
      -moz-transform: scale(1.2, 1.2);
      -o-transform: scale(1.2, 1.2);
      -ms-transform: scale(1.2, 1.2);
      transform: scale(1.2, 1.2);
      opacity: 0;
    }
  }

  @-o-keyframes pulsate {
    0% {
      -webkit-transform: scale(0.1, 0.1);
      -moz-transform: scale(0.1, 0.1);
      -o-transform: scale(0.1, 0.1);
      -ms-transform: scale(0.1, 0.1);
      transform: scale(0.1, 0.1);
      opacity: 0;
    }

    50% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
    }

    100% {
      -webkit-transform: scale(1.2, 1.2);
      -moz-transform: scale(1.2, 1.2);
      -o-transform: scale(1.2, 1.2);
      -ms-transform: scale(1.2, 1.2);
      transform: scale(1.2, 1.2);
      opacity: 0;
    }
  }

  @keyframes pulsate {
    0% {
      -webkit-transform: scale(0.1, 0.1);
      -moz-transform: scale(0.1, 0.1);
      -o-transform: scale(0.1, 0.1);
      -ms-transform: scale(0.1, 0.1);
      transform: scale(0.1, 0.1);
      opacity: 0;
    }

    50% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
    }

    100% {
      -webkit-transform: scale(1.2, 1.2);
      -moz-transform: scale(1.2, 1.2);
      -o-transform: scale(1.2, 1.2);
      -ms-transform: scale(1.2, 1.2);
      transform: scale(1.2, 1.2);
      opacity: 0;
    }
  }

  @-moz-keyframes bounce {
    0% {
      opacity: 0;
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    60% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
      -webkit-transform: translateY(20px) rotate(-45deg);
      -moz-transform: translateY(20px) rotate(-45deg);
      -o-transform: translateY(20px) rotate(-45deg);
      -ms-transform: translateY(20px) rotate(-45deg);
      transform: translateY(20px) rotate(-45deg);
    }

    80% {
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    100% {
      -webkit-transform: translateY(0) rotate(-45deg);
      -moz-transform: translateY(0) rotate(-45deg);
      -o-transform: translateY(0) rotate(-45deg);
      -ms-transform: translateY(0) rotate(-45deg);
      transform: translateY(0) rotate(-45deg);
    }
  }

  @-webkit-keyframes bounce {
    0% {
      opacity: 0;
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    60% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
      -webkit-transform: translateY(20px) rotate(-45deg);
      -moz-transform: translateY(20px) rotate(-45deg);
      -o-transform: translateY(20px) rotate(-45deg);
      -ms-transform: translateY(20px) rotate(-45deg);
      transform: translateY(20px) rotate(-45deg);
    }

    80% {
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    100% {
      -webkit-transform: translateY(0) rotate(-45deg);
      -moz-transform: translateY(0) rotate(-45deg);
      -o-transform: translateY(0) rotate(-45deg);
      -ms-transform: translateY(0) rotate(-45deg);
      transform: translateY(0) rotate(-45deg);
    }
  }

  @-o-keyframes bounce {
    0% {
      opacity: 0;
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(0) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    60% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
      -webkit-transform: translateY(20px) rotate(-45deg);
      -moz-transform: translateY(20px) rotate(-45deg);
      -o-transform: translateY(20px) rotate(-45deg);
      -ms-transform: translateY(20px) rotate(-45deg);
      transform: translateY(20px) rotate(-45deg);
    }

    80% {
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    100% {
      -webkit-transform: translateY(0) rotate(-45deg);
      -moz-transform: translateY(0) rotate(-45deg);
      -o-transform: translateY(0) rotate(-45deg);
      -ms-transform: translateY(0) rotate(-45deg);
      transform: translateY(0) rotate(-45deg);
    }
  }

  @keyframes bounce {
    0% {
      opacity: 0;
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(0) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    60% {
      opacity: 1;
      -ms-filter: none;
      filter: none;
      -webkit-transform: translateY(20px) rotate(-45deg);
      -moz-transform: translateY(20px) rotate(-45deg);
      -o-transform: translateY(20px) rotate(-45deg);
      -ms-transform: translateY(20px) rotate(-45deg);
      transform: translateY(20px) rotate(-45deg);
    }

    80% {
      -webkit-transform: translateY(-10px) rotate(-45deg);
      -moz-transform: translateY(-10px) rotate(-45deg);
      -o-transform: translateY(-10px) rotate(-45deg);
      -ms-transform: translateY(-10px) rotate(-45deg);
      transform: translateY(-10px) rotate(-45deg);
    }

    100% {
      -webkit-transform: translateY(0) rotate(-45deg);
      -moz-transform: translateY(0) rotate(-45deg);
      -o-transform: translateY(0) rotate(-45deg);
      -ms-transform: translateY(0) rotate(-45deg);
      transform: translateY(0) rotate(-45deg);
    }
  }
</style>


<div class="page-content" ng-controller="alquileresController" data-ng-init="inicio();">
  <!--div class="col-12">
    <div class="ibox-content" id="caja">
      <div class="row">

      <p>
        <qr text="qrcodeString" type-number="typeNumber" correction-level="correctionLevel" size="size"
          input-mode="inputMode" image="image" ng-model="immmm" id="immmm" name="immmm"></qr>
      </p>
      HOLA SSSSS
      </div>
    </div>  
  </div-->
  
  <div class="col-12">
    <div class="ibox-content" id="caja">
      <div class="row">
        <div class="row" align="center"><h3> Reserva en línea para uso de Campos Deportivos </h3></div>
        <ul class="nav nav-tabs">
          <li class="active">
            <a data-toggle="tab" ng-click="btnTabRealizaralquiler()" data-target="#tab-alquilar">REALIZAR RESERVA</a>
          </li>
          <li>
            <a data-toggle="tab" id="tab-mis-alqu" ng-click="btnTabMisAlquileres()"
              data-target="#tab-mis-alquileres">MIS RESERVAS </a>
            
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="tab-alquilar">
            <div class="ng-binding">
              <div class="row" style="padding-left: 15px; padding-top: 10px;">
                <div class="col-md-4">
                  <div class="form-group">
                    <label class=" control-label">Fecha:</label>

                    <input name="fechauser" id="fechauser" type="date" placeholder="Fecha" class="form-control"
                      datepicker-popup="" ng-model="fechaInput_" required min="{{fechaMin_}}"
                      ng-change="onChangeFecha()" />
                  </div>
                  <br>
                  <div class="form-group">
                    <label class=" control-label">Macrodistrito:</label>
                    <select class="form-control" ng-model="selectedItemMacrodistrito" ng-change="changeMacrodistrito()">
                      <option value="-1" ng-selected="selected">-- Seleccione --</option>
                      <option value="{{ item.xmacrodistrito_id }}" ng-repeat="item in macrodistritos">{{
                        parseDataMacro(item).nombre }}</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label class=" control-label">Campos Deportivos:</label>
                    <select class="form-control" ng-disabled="lstCamposDep.length==0" ng-model="selectedItemCamDep"
                      ng-change="changeCamposDeportivos()">
                      <option value="-1" ng-selected="selected">-- Seleccione --</option>
                      <option value="{{ item.xcampo_deportivo_id }}" ng-repeat="item in lstCamposDep">{{
                        parseData(item).descripcionItem }} </option>
                    </select>
                  </div>


                  <div class="form-group">
                    <label class=" control-label">Canchas:</label>
                    <select class="form-control" id="asunto" ng-disabled="lstCanchasDep.length==0"
                      ng-model="selectedItemCanchaDep" ng-change="changeCampoDeportivo()">
                      <option value="-1" selected="selected">-- Seleccione --</option>
                      <option value="{{ item.xcandep_id }}" ng-repeat="item in lstCanchasDep">
                        {{item.xcandep_nombre }}
                      </option>
                    </select>
                  </div>


                  <div ng-if="selectedItemCanchaDepDATA.xcandep_descripcion ">
                    <strong>Descripciòn:</strong> {{selectedItemCanchaDepDATA.xcandep_descripcion}}
                    <hr>
                  </div>

                  <div id="map" class="map"></div>

                  <div style="width: 100%; text-align: end;">
                    <button type="button" class="btn btn-success fa fa-location-arrow"
                      style="background-color: #00ADB5;" ng-click="getGPSlocation()"> </button>
                  </div>
                  <br>
                  <div ng-if="itemFeatures!=null">
                    <strong>Campos deportivos:</strong> {{itemFeatures.Nombre}} <br>
                    <strong>Direcciòn:</strong> {{itemFeatures.Direccion}} <br>
                    <strong>Zona:</strong> {{itemFeatures.Zona}} <br>
                    <strong>Macrodistrito:</strong> {{itemFeatures.Macrodistrito}}
                  </div>

                </div>

                <div class="col-md-7">
                  <br>
                  <div class="row">
                    <div class="col-md-8">
                      <h4 style="margin: auto;"> CALENDARIO DE RESERVAS - CAMPOS DEPORTIVOS </h4>
                    </div>
                    <div class="col-md-4">
                    </div>
                  </div>    
                  <div class="row">
                    <div class="col-md-8">
                      <h3 style="margin: auto;">{{getMesL(fechaInput_)}} de {{fechaInput_.getFullYear()}} </h3>
                    </div>
                    <div class="col-md-4">
                      <div style="width: 100%; text-align: end; color:#00ADB5 ; font-weight: bold;"
                        ng-if="costoTotalCancha!=0">
                        Total: Bs. {{costoTotalCancha}}
                      </div>
                    </div>
                  </div>


                  <div ng-if="!tblSemana.length!=0 && !isLoaderTable ">
                    <br> <br>
                    <div
                      style="width: 100%; background: #00ADB5; color: white; padding: 15px; border-radius: 5px; font-size: 15px; font-weight: bold;">
                      Seleccione una fecha y una cancha deportiva.
                    </div>
                  </div>


                  <div ng-if="isLoaderTable" class="loader-table-overlay">
                    <img style="width: 30px; height: 30px;"
                      src="../../view/servicios/varios/formularios/transparencia/moustache/tinymce/skins/lightgray/img/loader.gif"
                      alt="">
                    Espere..
                  </div>


                  <div ng-if="!tblSemana.length==0 ">
                    <div ng-if="!isLoaderTable">
                      <table class="table table-bordered"
                        style="border-radius: 8px; border-collapse: separate; border: solid #cfcfcf 1px; overflow: hidden;">
                        <tr>
                          <th></th>
                          <th ng-repeat="semana in tblSemana">
                            <div style="width: 100%; text-align: center;">
                              {{semana.dia}}
                              <br>
                              <div ng-if="!semana.diaActual"
                                style=" border-radius: 50%; margin: auto; align-items: center;display: flex;justify-content: center; width: 40px; height: 40px; border: solid 1px #00ADB5;">
                                {{semana.fecha}}
                              </div>

                              <div ng-if="semana.diaActual"
                                style="background: #00ADB5; border-radius: 50%; margin: auto; align-items: center;display: flex;justify-content: center; color: white; width: 40px; height: 40px;">
                                {{semana.fecha}}
                              </div>

                            </div>

                          </th>
                        </tr>
                        <tr ng-repeat="hora in tblHoras">
                          <th style="width: 100px;  text-align: center; padding-top: 1px; padding-bottom: 1px;">
                            <span style="font-size: 11px;">
                              {{hora.h}}
                            </span>
                            <p
                              style="width: 100%; background: #00ADB5;color: white; font-size: 9px; border-radius: 5px;">
                              Bs. {{hora.item.precio}}
                            </p>
                            <p ng-if="hora.item.tipo=='N'" style="color: #00ADB5; font-size: 8px; width: 100%; padding: 0;">
                              (Noche)
                            </p>
                          </th>
                          <th ng-repeat="semana in tblSemana" class="celda-seleccionado"
                            ng-click="(!semana.diaAnterior )?btnCeldaNoClick():btnCelda(semana,hora); seleccionar(semana,hora);"
                            id="{{semana.id}}{{hora.id}}"
                            ng-class="(estadoCelda(hora, semana, semana.dia)=='celda-error') || (!semana.diaAnterior )? 'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-ocupado')? 'celda-reservado-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-fuera')?'celda-sinrango-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-reserva')? 'celda-enproceso-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-mantenimiento')? 'celda-mantenimiento-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-actividad')? 'celda-actividad-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-masiva')? 'celda-masiva-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-reprogramacion')? 'celda-reprogramacion-bloc':'' || (!semana.diaAnterior ) ?'celda-tabla-bloc':(estadoCelda(hora, semana, semana.dia)=='cel-noDisponible')? 'celda-noDisponible-bloc':''">
                            <div ng-if="estadoCelda(hora, semana, semana.dia)!='celda-error'">
                              <div ng-if="semana.diaAnterior">
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-reserva'"
                                  style="color: rgb(8, 8, 8); font-weight: bold;">  
                                  {{horarioAct}}<br>En Proceso de Reserva
                                </div>
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-ocupado'" 
                                  style="color: rgb(240, 239, 243); font-weight: bold;">
                                  {{horarioAct}}<br>{{descripcionEstado}}
                                </div>
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-fuera'"
                                  style="color: rgb(8, 8, 8); font-weight: bold;">
                                  {{horarioAct}}<br>Fuera de Horario
                                </div>
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-mantenimiento'"
                                  style="color: rgb(8, 8, 8); font-weight: bold;">
                                  {{horarioAct}}<br>{{descripcionEstado}}
                                </div>
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-actividad'"
                                  style="color: rgb(8, 8, 8); font-weight: bold;">
                                  {{horarioAct}}<br>{{descripcionEstado}}
                                </div>
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-masiva'" 
                                  style="color: rgb(240, 239, 243); font-weight: bold;">
                                  {{horarioAct}}<br>{{descripcionEstado}}
                                </div>
                                <div ng-if="estadoCelda(hora, semana, semana.dia)=='cel-noDisponible'"
                                  style="color: rgb(236, 232, 232); font-weight: bold;">
                                  {{horarioAct}}<br>{{descripcionEstado}}
                                </div>
                              </div>
                            </div>
                          </th>
                        </tr>
                      </table>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <div>
                          <button type="button" ng-click="datosFactura()" ng-disabled="costoTotalCancha==0" class="btn btn-default btn-pagar" data-toggle="modal"
                            data-target="{{abModalFacts}}"><i class="icofont-send-mail"></i> Reservar (Bs.
                              {{costoTotalCancha}})</button>   
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div style="text-align: end;">
                          <button type="button" class="btn btn-success btn-pagar fa fa-refresh" ng-click="btnActualizarTabla()"> Actualización del Calendario </button>    
                        </div>
                      </div>
                    </div>

                    


                  </div>
                </div>
                <div class="col-md-1">
                  <!--div class="row">
                    <p>
                      <qr text="qrcodeString" type-number="typeNumber" correction-level="correctionLevel" size="size"
                        input-mode="inputMode" image="image" ng-model="immmm" id="immmm" name="immmm"></qr>
                    </p>
                  </div-->
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="tab-mis-alquileres">
            <div class="row" align="center"><h4><p> Estimad@ Ciudadan@, puede re imprimir su factura de acuerdo a la última reserva que realizó. </p></h4></div>
            <div style="width: 100%; text-align: end;">
              <button type="button" class="btn btn-success fa fa-refresh" style="background-color: #00ADB5;" ng-click="btnTabMisAlquileres()"> Actualización </button>
            </div>
            <table ng-table="tablareservas" class="table table-hover table-striped table-bordered todolist">
              <tr ng-repeat="item in $data">
                <td data-title="'Cancha'">{{item.xcandep_nombre }}</td>
                <td data-title="'Descripción'">{{item.xcandep_descripcion }}</td>
                <td data-title="'Hora Reserva'">{{item.xregserv_horaini }} a {{item.xregserv_horafin }} </td>
                <td data-title="'Fecha'">{{item.xregserv_fechareserva }}</td>
                <td data-title="'Estado'">{{item.xestado_uso }}</td>
                <td data-title="'Opciones'">
                  <div ng-if="item.xregserv_id_tipresv == 3 && item.xregserv_estado_reserva == 'R'">
                    <button class="btn btn-danger" ng-click="datosFactura2(item)" data-toggle="modal"
                    data-target="#modalDatosFactura2"><span
                      class="glyphicon glyphicon-credit-card"></span> PAGAR RESERVA </button>
                  </div>
                  <div ng-if="item.xregserv_estado_reserva == 'P'">
                    <button class="btn btn-primary " ng-click="imprimirFactura(item)" data-toggle="modal" data-target="{{abrirmodalFactura}}"><span
                      class="glyphicon glyphicon-file"></span> RE-IMPRIMIR FACTURA </button>
                  </div>
                  <!--div ng-if="item.xregserv_id_tipresv == 2 && item.xregserv_estado_reserva == 'R'">
                    <button class="btn btn-primary " ng-click="imprimirFactura(item)"><span
                      class="glyphicon glyphicon-file"></span> RE-IMPRIMIR FACTURA </button>
                  </div-->
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="modalDatosFactura" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" visible="modalShow" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog">
      <div class="modal-content" ng-show="habMetodos">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
          
        </div>
        <div class="modal-body">
          
          <form name="formularioMetodosPago" readOnly="true" novalidate>
            <h2><center>DATOS PARA SU FACTURA</center></h2>
            <div class="row">
              <div class="col-md-11">
                <label for="title">Tipo de Documento :</label>
                <div class="form-group">
                  <select class="js-example-basic-single form-control" id="tipDoc" name="tipDoc" ng-model="datosFact.tipDoc"
                      ng-change="seleccionDocumento(datosFact.tipDoc);" class="form-control" required>
                    <option style="display:none" value="">-- Seleccionar --</option>
                    <option ng-repeat="tpdc in tpDocs" value="{{tpdc.codigo}}">{{tpdc.nombre}}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">    
              <div class="col-md-6" ng-show="habNit">
                <label for="title">Nit :</label>
                <div class="form-group">
                    <input ng-model="datosFact.nit" id="nit" name="nit" class="form-control" type="number" placeholder="Ingrese Nit" required>
                </div>
              </div>
              <div class="col-md-3" ng-show="habNit">
                <label for="title">Buscar</label>
                <div class="form-group">
                    <button id="btnBuscar" name="btnBuscar" ng-click="buscarDatosFact2(datosFact.tipDoc,datosFact.nit)" type="button" class="btn btn-success fa fa-search"></button>
                </div>
              </div>
              <div class="col-md-3" ng-show="habNit">
                <label for="title">Nit</label>
                <div class="form-group">
                    <div style="color: #ff0a17">{{mensaje}}</div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6" ng-show="habCi">
                <label for="title">C.I. :</label> 
                <div class="form-group">
                    <input ng-model="datosFact.ci" id="ci" name="ci" class="form-control" type="number" placeholder="Ingrese C.I." required>
                </div>
              </div>
              <div class="col-md-3" ng-show="habCi">
                <label for="title">Complemento :</label>
                <div class="form-group">
                    <input ng-model="datosFact.complemento" id="complemento" name="complemento" class="form-control" type="text" placeholder="Ingrese Complemento">
                </div>
              </div>
              <div class="col-md-3" ng-show="habCi">
                <label for="title">Buscar C.I.</label>
                <div class="form-group">
                    <button id="btnBuscar" name="btnBuscar" ng-click="buscarDatosFact2(datosFact.tipDoc,datosFact.ci)" type="button" class="btn btn-success fa fa-search"></button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6" ng-show="habCEX">
                <label for="title">C.I. Extranjero :</label> 
                <div class="form-group">
                    <input ng-model="datosFact.nit" id="nit" name="nit" class="form-control" type="text" placeholder="Ingrese C.I." required>
                </div>
              </div>
              <div class="col-md-3" ng-show="habCEX">
                <label for="title">Buscar C.I. </label>
                <div class="form-group">
                    <button id="btnBuscar" name="btnBuscar" ng-click="buscarDatosFact2(datosFact.tipDoc,datosFact.nit)" type="button" class="btn btn-success fa fa-search"></button>
                </div>
              </div>
              <div class="col-md-3" ng-show="habCEX">
                <label for="title">Extranjero</label>
                <div class="form-group">
                    <div style="color: #ff0a17">{{mensaje}}</div>
                </div>
              </div>
            </div>
            <div class="row">    
              <div class="col-md-6">
                <label for="title">Razón Social :</label>
                <div class="form-group">
                    <input onkeyup="return conMayusculas(this);"
                        ng-model="datosFact.razon_social" onChange="conMayusculas(this)"
                        id="razon_social" name="razon_social" class="form-control" type="text"
                        placeholder="Ingrese Razon Social" required>
                </div>        
              </div>
            </div>
            <div class="row">     
              <div class="col-md-6">
                <label for="title">Correo :</label>
                <div class="form-group">
                    <input ng-model="datosFact.correo" id="correo" name="correo" class="form-control" type="email" ngPattern="^[A-Z.a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" placeholder="Ingrese Correo" required>
                    <span style="color:red" ng-show="formularioMetodosPago.correo.$invalid">
										<span class="error" ng-show="formularioMetodosPago.correo.$error.email">Este campo debe ser una dirección de correo electrónico en el formato "usuario@ejemplo.com"</span></span>
                </div>        
              </div>
            </div>
            <div class="row">     
              <div class="col-md-6">
                <label for="title">Celular :</label>
                <div class="form-group">
                    <input ng-model="datosFact.celular" id="celular" name="celular" class="form-control" type="text" placeholder="Ingrese Celular" required>
                </div>        
              </div>
            </div>
            <br>
            <div class="row">
              <center>
                <h3 class="advertencia"><strong>NOTA:</strong> Todos los campos son obligatorios.</h3>
              </center>              
            </div>
            <br>
            <h2><center>Métodos de Pago</center></h2>
            <br>
            <div class="row">
              <div class="col-md-12">
                <div class="col-md-2">
                </div>
                <div class="col-md-4">
                  <div class="row">
                    <button ng-disabled="formularioMetodosPago.celular.$invalid"
                        ng-click="validacionQR(datosFact);"
                        class="pay-link">
                        <label for="title" class="text-center-label">Pago con Qr</label>
                        <img src="../../view/img/pagos/qrSimple.png" title="Pago con QR" class="img-link">
                    </button>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="row">
                    <button ng-disabled="formularioMetodosPago.celular.$invalid"
                        ng-click="validacionTARJETA(datosFact)" 
                        class="pay-link">
                        <label for="title" class="text-center-label">Pago con Tarjeta</label>
                        <img src="../../view/img/pagos/tarjetas.png" title="Pago con Tarjeta" class="img-link">
                    </button>
                  </div>
                </div>
                <div class="col-md-2">
                </div>
              </div>
          </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger pull-left" class="close" data-dismiss="modal"> CERRAR </button>
        </div>
      </div>

      <div class="modal-content" ng-show="habQR">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
          <h4 class="modal-title" id="myModalLabel">Código QR-SIMPLE</h4>
        </div>
        <div class="modal-body">
          <form name="formularioGrupos" readOnly="true" novalidate>
            <div class="row">
              <div class="col-md-6">
                <p> 1. Abra la aplicación de su banco en su teléfono celular. </p>
                <p> 2. Seleccione la forma de pago QR-SIMPLE </p>
                <p> 3. Capture el siguiente código QR con la cámara de su teléfono. </p>
                <p> 4. Espere algunos segundos para que confirmemos su pago. </p>
              </div>
              <div class="col-md-6">
                <p>
                  <img src="{{qrcodeString}}" alt="">
                </p>
              </div>
            </div>
            <div class="row">
              <!--button type="button" class="btn btn-default" ng-click="" height="30"><i class="fa fa-download">  Descargar QR</i></button-->
              <!--button type="button" class="btn btn-default" ng-click="" height="30"><i class="fa fa-file">  Compartir QR</i></button--> 
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger pull-left" class="close" data-dismiss="modal"> CERRAR </button>
        </div>
      </div>  

      <div class="modal-content" ng-show="habTarjeta">
        <div class="modal-header">
            <h3 class="modal-title"><center> Solicitud de Pago </center></h3>
            <h4 class="modal-title"> Registre y revise cuidadosamente los datos de su tarjeta, luego hacer clic en Pagar para ejecutar la transacción. </h3>
            <!--button type="button" class="close" ng-click="cerrarModal();" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button-->
        </div>
        <div class="modal-body">
            <iframe  width="100%" height="450px" frameborder="0" allowfullscreen id="vistaPago"></iframe>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger pull-left"  ng-click="cerrarModal();" class="close" data-dismiss="modal"> CERRAR </button>
        </div>
      </div>

    </div>
  </div>

  <div class="modal fade " id="modalDatosFactura2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" visible="modalShow" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog">
      <div class="modal-content" ng-show="habAlerta2">
        <div class="modal-body">
          <form name="formularioGrupos" readOnly="true" novalidate>
            <div class="row">
              <div class="col-md-12">
                <h1><center> ¡ Advertencia ! </center></h1>
              </div>
            </div>
            <div class="row">
              <h3><center><p>“¿Ud. tiene tarjeta de débito o crédito? Es requisito para continuar y realizar la transacción”.</p></center></h3>
            </div>
            <div class="row" align="center">
              <a type="button" class="btn btn-danger" ng-click="cancelarDatFact();" height="30" data-dismiss="modal"><span>No</span></a>
              <a type="button" class="btn btn-success" ng-click="habilitacionPago2();" height="30"><span>Si</span></a> 
            </div>
          </form>
        </div>
      </div>
      <div class="modal-content" ng-show="habPago2">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span
                    aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
            <h4 class="modal-title" id="myModalLabel"><center>DATOS PARA SU FACTURA</center></h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="title">Nit / C.I.</label>
                        <div class="controls">
                            <input ng-model="datosFacts.nit2" id="nit2" name="nit2" class="form-control"
                                type="number" placeholder="Ingrese Nit">
                        </div>
                        <label for="title">Razón Social</label>
                        <div class="controls">
                            <input onkeyup="return conMayusculas(this);"
                                ng-model="datosFacts.razon_social2" onChange="conMayusculas(this)"
                                id="razon_social2" name="razon_social2" class="form-control" type="text"
                                placeholder="Ingrese Razon Social">
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-12"><p>Estimad@ ciudadan@, verifique si su tarjeta de débito o crédito está habilitada para realizar pagos en linea. ¿Desea continuar con la reserva del campo deportivo y pagar con tarjeta?<b>NO ES REEMBOLSABLE</b></p></div>
            </div>
            <div class="row" align="center">
                <a type="button" class="btn btn-danger" ng-click="cancelarDatFact();" height="30" data-dismiss="modal"><span>No</span></a>
                <a type="button" class="btn btn-success" ng-click="pagarReserva(datosFacts);" height="30" data-dismiss="modal"><span>Si</span></a>
            </div>
        </div>
        <!--div class="modal-footer">
            <div class="row">
                <div class="col-md-3">&nbsp;
                    <button data-dismiss="modal" type="button" class="btn btn-default pull-left"
                        ng-click="cancelarDatFact();">Cancelar</button>
                </div>
            </div>
        </div-->
      </div>
    </div>
  </div>


  <!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
  <!-- //////////////////////////////////////////////////////  MODAL CONDICIONES DE USO  ///////////////////////////////////////////////////////////// -->
  <!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
  <div class="modal fade" id="condicionesUso" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="myModalLabel">
            <center>
              .:: RECOMENDACIONES DE USABILIDAD ::.
            </center>
          </h3>          
          <button type="button" class="close" data-dismiss="modal"><span
                  aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-sm-12">
              <p>Estimad@ Ciudadan@, para realizar una solicitud de uso de Campo Deportivo en línea, favor tomar nota de las siguientes recomendaciones:</p>
            </div>            
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify">
                <b>1.</b> Seleccione la fecha, macrodistrito, campo deportivo y cancha de su preferencia.
              </p>              
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify">
                <b>2.</b> Elija el o los horarios disponibles en tiempo real, sólo se puede realizar la reserva del Campo Deportivo para un día y de forma continua.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify">
                <b>3.</b> Haga clic en la opción “RESERVAR”. El tiempo de espera para el proceso de reserva y pago es de 5min, pasado este tiempo se volverá a habilitar el horario.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify">
                <b>4.</b> Revise y registre los datos para su factura, el tipo de documento, razón social, correo electrónico y celular. 
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify"> 
                <b>5.</b> Elija la forma de Pago con QR o con Tarjeta de Débito, debe tener habilitada su tarjeta o banca móvil para registrar y pagar en línea.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify"> 
                <b>6.</b> Habiéndose efectuado el pago por uso del Campo Deportivo, éste <strong> NO ES REEMBOLSABLE </strong>.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify">
                <b>7.</b> Recibirá la factura electrónica en su correo personal y una notificación a su whatsapp con la fecha, hora y lugar de la reserva.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-1">
            </div>
            <div class="col-sm-11">
              <p align="justify">
                <b>8.</b> Presentarse 15 min antes del horario reservado, contacte con el administrador del campo deportivo para revisar y validar su registro.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3">
            </div>
            <div class="col-sm-6">
              <h4>¡GRACIAS POR USAR NUESTROS SERVICIOS!</h4>
            </div>
            <div class="col-sm-3">
            </div>            
          </div> 
          
          <div class="row">
            <div class="col-sm-12">
              <center>
                <button type="button" name="button" class="btn btn-success fa fa-save"
                  ng-click="siguiente()" class="btn-primary" data-dismiss="modal">&nbsp; ACEPTAR </button>
              </center>
            </div>
          </div>               
        </div>
      </div>
    </div>
  </div>


  <!-- ///////////////////////////////////////////////////////////////////////  REIMPRESION FACTURA  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

  <div class="modal fade" id="impresionFacturaa" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-lg" >
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
              class="sr-only">Cerrar</span></button>
          <h4 class="modal-title" id="myModalLabel">
            <center> Factura </center>
          </h4>
        </div>
        <!--div class="modal-body" class="col-md-12">
          <iframe  width="100%" height="800px" frameborder="0" allowfullscreen id="facturaa"></iframe>
        </div-->
        <div class="modal-body" class="col-md-12">
          <form name="formularioPersonas" readOnly="true" novalidate>
            <embed id="facturaa" type="application/pdf" width="100%" height="800px"></embed>        
          </form>
        </div>
      </div>
    </div>
  </div>

</html>